{
  "version": 3,
  "sources": ["../../@vue/shared/dist/shared.esm-bundler.js", "../../@vue/reactivity/dist/reactivity.esm-bundler.js", "../../reactivity-store/dist/esm/index.mjs", "../../node_modules/.pnpm/@rollup+plugin-typescript@12.1.4_rollup@4.44.0_tslib@2.8.1_typescript@5.3.3/node_modules/tslib/tslib.es6.js", "../../@git-diff-view/utils/dist/esm/index.mjs", "../../@git-diff-view/react/src/hooks/useIsMounted.ts", "../../@git-diff-view/react/src/hooks/useUnmount.ts", "../../@git-diff-view/react/src/hooks/useSafeLayout.ts", "../../@git-diff-view/react/src/hooks/useTextWidth.ts", "../../@git-diff-view/react/src/components/DiffAddWidget.tsx", "../../@git-diff-view/react/src/components/DiffNoNewLine.tsx", "../../@git-diff-view/react/src/components/DiffContent.tsx", "../../@git-diff-view/react/src/components/DiffViewContext.ts", "../../@git-diff-view/react/src/components/DiffWidgetContext.ts", "../../@git-diff-view/react/src/components/DiffSplitContentLineNormal.tsx", "../../@git-diff-view/react/src/hooks/useDomWidth.ts", "../../@git-diff-view/react/src/hooks/useSyncHeight.ts", "../../@git-diff-view/react/src/components/DiffSplitExtendLineNormal.tsx", "../../@git-diff-view/react/src/components/DiffExpand.tsx", "../../@git-diff-view/react/src/components/DiffSplitHunkLineNormal.tsx", "../../@git-diff-view/react/src/components/DiffSplitWidgetLineNormal.tsx", "../../@git-diff-view/react/src/components/DiffSplitViewNormal.tsx", "../../@git-diff-view/react/src/components/DiffSplitContentLineWrap.tsx", "../../@git-diff-view/react/src/components/DiffSplitExtendLineWrap.tsx", "../../@git-diff-view/react/src/components/DiffSplitHunkLineWrap.tsx", "../../@git-diff-view/react/src/components/DiffSplitWidgetLineWrap.tsx", "../../@git-diff-view/react/src/components/DiffSplitViewWrap.tsx", "../../@git-diff-view/react/src/components/tools.ts", "../../@git-diff-view/react/src/components/DiffSplitView.tsx", "../../@git-diff-view/react/src/components/DiffUnifiedContentLine.tsx", "../../@git-diff-view/react/src/components/DiffUnifiedExtendLine.tsx", "../../@git-diff-view/react/src/components/DiffUnifiedHunkLine.tsx", "../../@git-diff-view/react/src/components/DiffUnifiedWidgetLine.tsx", "../../@git-diff-view/react/src/components/DiffUnifiedView.tsx", "../../@git-diff-view/react/src/components/DiffView.tsx"],
  "sourcesContent": ["/**\n* @vue/shared v3.5.26\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\n// @__NO_SIDE_EFFECTS__\nfunction makeMap(str) {\n  const map = /* @__PURE__ */ Object.create(null);\n  for (const key of str.split(\",\")) map[key] = 1;\n  return (val) => val in map;\n}\n\nconst EMPTY_OBJ = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze({}) : {};\nconst EMPTY_ARR = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze([]) : [];\nconst NOOP = () => {\n};\nconst NO = () => false;\nconst isOn = (key) => key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110 && // uppercase letter\n(key.charCodeAt(2) > 122 || key.charCodeAt(2) < 97);\nconst isModelListener = (key) => key.startsWith(\"onUpdate:\");\nconst extend = Object.assign;\nconst remove = (arr, el) => {\n  const i = arr.indexOf(el);\n  if (i > -1) {\n    arr.splice(i, 1);\n  }\n};\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\nconst isArray = Array.isArray;\nconst isMap = (val) => toTypeString(val) === \"[object Map]\";\nconst isSet = (val) => toTypeString(val) === \"[object Set]\";\nconst isDate = (val) => toTypeString(val) === \"[object Date]\";\nconst isRegExp = (val) => toTypeString(val) === \"[object RegExp]\";\nconst isFunction = (val) => typeof val === \"function\";\nconst isString = (val) => typeof val === \"string\";\nconst isSymbol = (val) => typeof val === \"symbol\";\nconst isObject = (val) => val !== null && typeof val === \"object\";\nconst isPromise = (val) => {\n  return (isObject(val) || isFunction(val)) && isFunction(val.then) && isFunction(val.catch);\n};\nconst objectToString = Object.prototype.toString;\nconst toTypeString = (value) => objectToString.call(value);\nconst toRawType = (value) => {\n  return toTypeString(value).slice(8, -1);\n};\nconst isPlainObject = (val) => toTypeString(val) === \"[object Object]\";\nconst isIntegerKey = (key) => isString(key) && key !== \"NaN\" && key[0] !== \"-\" && \"\" + parseInt(key, 10) === key;\nconst isReservedProp = /* @__PURE__ */ makeMap(\n  // the leading comma is intentional so empty string \"\" is also included\n  \",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted\"\n);\nconst isBuiltInDirective = /* @__PURE__ */ makeMap(\n  \"bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo\"\n);\nconst cacheStringFunction = (fn) => {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return ((str) => {\n    const hit = cache[str];\n    return hit || (cache[str] = fn(str));\n  });\n};\nconst camelizeRE = /-\\w/g;\nconst camelize = cacheStringFunction(\n  (str) => {\n    return str.replace(camelizeRE, (c) => c.slice(1).toUpperCase());\n  }\n);\nconst hyphenateRE = /\\B([A-Z])/g;\nconst hyphenate = cacheStringFunction(\n  (str) => str.replace(hyphenateRE, \"-$1\").toLowerCase()\n);\nconst capitalize = cacheStringFunction((str) => {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n});\nconst toHandlerKey = cacheStringFunction(\n  (str) => {\n    const s = str ? `on${capitalize(str)}` : ``;\n    return s;\n  }\n);\nconst hasChanged = (value, oldValue) => !Object.is(value, oldValue);\nconst invokeArrayFns = (fns, ...arg) => {\n  for (let i = 0; i < fns.length; i++) {\n    fns[i](...arg);\n  }\n};\nconst def = (obj, key, value, writable = false) => {\n  Object.defineProperty(obj, key, {\n    configurable: true,\n    enumerable: false,\n    writable,\n    value\n  });\n};\nconst looseToNumber = (val) => {\n  const n = parseFloat(val);\n  return isNaN(n) ? val : n;\n};\nconst toNumber = (val) => {\n  const n = isString(val) ? Number(val) : NaN;\n  return isNaN(n) ? val : n;\n};\nlet _globalThis;\nconst getGlobalThis = () => {\n  return _globalThis || (_globalThis = typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n};\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/;\nfunction genPropsAccessExp(name) {\n  return identRE.test(name) ? `__props.${name}` : `__props[${JSON.stringify(name)}]`;\n}\nfunction genCacheKey(source, options) {\n  return source + JSON.stringify(\n    options,\n    (_, val) => typeof val === \"function\" ? val.toString() : val\n  );\n}\n\nconst PatchFlags = {\n  \"TEXT\": 1,\n  \"1\": \"TEXT\",\n  \"CLASS\": 2,\n  \"2\": \"CLASS\",\n  \"STYLE\": 4,\n  \"4\": \"STYLE\",\n  \"PROPS\": 8,\n  \"8\": \"PROPS\",\n  \"FULL_PROPS\": 16,\n  \"16\": \"FULL_PROPS\",\n  \"NEED_HYDRATION\": 32,\n  \"32\": \"NEED_HYDRATION\",\n  \"STABLE_FRAGMENT\": 64,\n  \"64\": \"STABLE_FRAGMENT\",\n  \"KEYED_FRAGMENT\": 128,\n  \"128\": \"KEYED_FRAGMENT\",\n  \"UNKEYED_FRAGMENT\": 256,\n  \"256\": \"UNKEYED_FRAGMENT\",\n  \"NEED_PATCH\": 512,\n  \"512\": \"NEED_PATCH\",\n  \"DYNAMIC_SLOTS\": 1024,\n  \"1024\": \"DYNAMIC_SLOTS\",\n  \"DEV_ROOT_FRAGMENT\": 2048,\n  \"2048\": \"DEV_ROOT_FRAGMENT\",\n  \"CACHED\": -1,\n  \"-1\": \"CACHED\",\n  \"BAIL\": -2,\n  \"-2\": \"BAIL\"\n};\nconst PatchFlagNames = {\n  [1]: `TEXT`,\n  [2]: `CLASS`,\n  [4]: `STYLE`,\n  [8]: `PROPS`,\n  [16]: `FULL_PROPS`,\n  [32]: `NEED_HYDRATION`,\n  [64]: `STABLE_FRAGMENT`,\n  [128]: `KEYED_FRAGMENT`,\n  [256]: `UNKEYED_FRAGMENT`,\n  [512]: `NEED_PATCH`,\n  [1024]: `DYNAMIC_SLOTS`,\n  [2048]: `DEV_ROOT_FRAGMENT`,\n  [-1]: `CACHED`,\n  [-2]: `BAIL`\n};\n\nconst ShapeFlags = {\n  \"ELEMENT\": 1,\n  \"1\": \"ELEMENT\",\n  \"FUNCTIONAL_COMPONENT\": 2,\n  \"2\": \"FUNCTIONAL_COMPONENT\",\n  \"STATEFUL_COMPONENT\": 4,\n  \"4\": \"STATEFUL_COMPONENT\",\n  \"TEXT_CHILDREN\": 8,\n  \"8\": \"TEXT_CHILDREN\",\n  \"ARRAY_CHILDREN\": 16,\n  \"16\": \"ARRAY_CHILDREN\",\n  \"SLOTS_CHILDREN\": 32,\n  \"32\": \"SLOTS_CHILDREN\",\n  \"TELEPORT\": 64,\n  \"64\": \"TELEPORT\",\n  \"SUSPENSE\": 128,\n  \"128\": \"SUSPENSE\",\n  \"COMPONENT_SHOULD_KEEP_ALIVE\": 256,\n  \"256\": \"COMPONENT_SHOULD_KEEP_ALIVE\",\n  \"COMPONENT_KEPT_ALIVE\": 512,\n  \"512\": \"COMPONENT_KEPT_ALIVE\",\n  \"COMPONENT\": 6,\n  \"6\": \"COMPONENT\"\n};\n\nconst SlotFlags = {\n  \"STABLE\": 1,\n  \"1\": \"STABLE\",\n  \"DYNAMIC\": 2,\n  \"2\": \"DYNAMIC\",\n  \"FORWARDED\": 3,\n  \"3\": \"FORWARDED\"\n};\nconst slotFlagsText = {\n  [1]: \"STABLE\",\n  [2]: \"DYNAMIC\",\n  [3]: \"FORWARDED\"\n};\n\nconst GLOBALS_ALLOWED = \"Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol\";\nconst isGloballyAllowed = /* @__PURE__ */ makeMap(GLOBALS_ALLOWED);\nconst isGloballyWhitelisted = isGloballyAllowed;\n\nconst range = 2;\nfunction generateCodeFrame(source, start = 0, end = source.length) {\n  start = Math.max(0, Math.min(start, source.length));\n  end = Math.max(0, Math.min(end, source.length));\n  if (start > end) return \"\";\n  let lines = source.split(/(\\r?\\n)/);\n  const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);\n  lines = lines.filter((_, idx) => idx % 2 === 0);\n  let count = 0;\n  const res = [];\n  for (let i = 0; i < lines.length; i++) {\n    count += lines[i].length + (newlineSequences[i] && newlineSequences[i].length || 0);\n    if (count >= start) {\n      for (let j = i - range; j <= i + range || end > count; j++) {\n        if (j < 0 || j >= lines.length) continue;\n        const line = j + 1;\n        res.push(\n          `${line}${\" \".repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`\n        );\n        const lineLength = lines[j].length;\n        const newLineSeqLength = newlineSequences[j] && newlineSequences[j].length || 0;\n        if (j === i) {\n          const pad = start - (count - (lineLength + newLineSeqLength));\n          const length = Math.max(\n            1,\n            end > count ? lineLength - pad : end - start\n          );\n          res.push(`   |  ` + \" \".repeat(pad) + \"^\".repeat(length));\n        } else if (j > i) {\n          if (end > count) {\n            const length = Math.max(Math.min(end - count, lineLength), 1);\n            res.push(`   |  ` + \"^\".repeat(length));\n          }\n          count += lineLength + newLineSeqLength;\n        }\n      }\n      break;\n    }\n  }\n  return res.join(\"\\n\");\n}\n\nfunction normalizeStyle(value) {\n  if (isArray(value)) {\n    const res = {};\n    for (let i = 0; i < value.length; i++) {\n      const item = value[i];\n      const normalized = isString(item) ? parseStringStyle(item) : normalizeStyle(item);\n      if (normalized) {\n        for (const key in normalized) {\n          res[key] = normalized[key];\n        }\n      }\n    }\n    return res;\n  } else if (isString(value) || isObject(value)) {\n    return value;\n  }\n}\nconst listDelimiterRE = /;(?![^(]*\\))/g;\nconst propertyDelimiterRE = /:([^]+)/;\nconst styleCommentRE = /\\/\\*[^]*?\\*\\//g;\nfunction parseStringStyle(cssText) {\n  const ret = {};\n  cssText.replace(styleCommentRE, \"\").split(listDelimiterRE).forEach((item) => {\n    if (item) {\n      const tmp = item.split(propertyDelimiterRE);\n      tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return ret;\n}\nfunction stringifyStyle(styles) {\n  if (!styles) return \"\";\n  if (isString(styles)) return styles;\n  let ret = \"\";\n  for (const key in styles) {\n    const value = styles[key];\n    if (isString(value) || typeof value === \"number\") {\n      const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\n      ret += `${normalizedKey}:${value};`;\n    }\n  }\n  return ret;\n}\nfunction normalizeClass(value) {\n  let res = \"\";\n  if (isString(value)) {\n    res = value;\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      const normalized = normalizeClass(value[i]);\n      if (normalized) {\n        res += normalized + \" \";\n      }\n    }\n  } else if (isObject(value)) {\n    for (const name in value) {\n      if (value[name]) {\n        res += name + \" \";\n      }\n    }\n  }\n  return res.trim();\n}\nfunction normalizeProps(props) {\n  if (!props) return null;\n  let { class: klass, style } = props;\n  if (klass && !isString(klass)) {\n    props.class = normalizeClass(klass);\n  }\n  if (style) {\n    props.style = normalizeStyle(style);\n  }\n  return props;\n}\n\nconst HTML_TAGS = \"html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot\";\nconst SVG_TAGS = \"svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view\";\nconst MATH_TAGS = \"annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics\";\nconst VOID_TAGS = \"area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr\";\nconst isHTMLTag = /* @__PURE__ */ makeMap(HTML_TAGS);\nconst isSVGTag = /* @__PURE__ */ makeMap(SVG_TAGS);\nconst isMathMLTag = /* @__PURE__ */ makeMap(MATH_TAGS);\nconst isVoidTag = /* @__PURE__ */ makeMap(VOID_TAGS);\n\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\nconst isSpecialBooleanAttr = /* @__PURE__ */ makeMap(specialBooleanAttrs);\nconst isBooleanAttr = /* @__PURE__ */ makeMap(\n  specialBooleanAttrs + `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected`\n);\nfunction includeBooleanAttr(value) {\n  return !!value || value === \"\";\n}\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\nconst attrValidationCache = {};\nfunction isSSRSafeAttrName(name) {\n  if (attrValidationCache.hasOwnProperty(name)) {\n    return attrValidationCache[name];\n  }\n  const isUnsafe = unsafeAttrCharRE.test(name);\n  if (isUnsafe) {\n    console.error(`unsafe attribute name: ${name}`);\n  }\n  return attrValidationCache[name] = !isUnsafe;\n}\nconst propsToAttrMap = {\n  acceptCharset: \"accept-charset\",\n  className: \"class\",\n  htmlFor: \"for\",\n  httpEquiv: \"http-equiv\"\n};\nconst isKnownHtmlAttr = /* @__PURE__ */ makeMap(\n  `accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap`\n);\nconst isKnownSvgAttr = /* @__PURE__ */ makeMap(\n  `xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`\n);\nconst isKnownMathMLAttr = /* @__PURE__ */ makeMap(\n  `accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns`\n);\nfunction isRenderableAttrValue(value) {\n  if (value == null) {\n    return false;\n  }\n  const type = typeof value;\n  return type === \"string\" || type === \"number\" || type === \"boolean\";\n}\n\nconst escapeRE = /[\"'&<>]/;\nfunction escapeHtml(string) {\n  const str = \"\" + string;\n  const match = escapeRE.exec(str);\n  if (!match) {\n    return str;\n  }\n  let html = \"\";\n  let escaped;\n  let index;\n  let lastIndex = 0;\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escaped = \"&quot;\";\n        break;\n      case 38:\n        escaped = \"&amp;\";\n        break;\n      case 39:\n        escaped = \"&#39;\";\n        break;\n      case 60:\n        escaped = \"&lt;\";\n        break;\n      case 62:\n        escaped = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    if (lastIndex !== index) {\n      html += str.slice(lastIndex, index);\n    }\n    lastIndex = index + 1;\n    html += escaped;\n  }\n  return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\n}\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\nfunction escapeHtmlComment(src) {\n  return src.replace(commentStripRE, \"\");\n}\nconst cssVarNameEscapeSymbolsRE = /[ !\"#$%&'()*+,./:;<=>?@[\\\\\\]^`{|}~]/g;\nfunction getEscapedCssVarName(key, doubleEscape) {\n  return key.replace(\n    cssVarNameEscapeSymbolsRE,\n    (s) => doubleEscape ? s === '\"' ? '\\\\\\\\\\\\\"' : `\\\\\\\\${s}` : `\\\\${s}`\n  );\n}\n\nfunction looseCompareArrays(a, b) {\n  if (a.length !== b.length) return false;\n  let equal = true;\n  for (let i = 0; equal && i < a.length; i++) {\n    equal = looseEqual(a[i], b[i]);\n  }\n  return equal;\n}\nfunction looseEqual(a, b) {\n  if (a === b) return true;\n  let aValidType = isDate(a);\n  let bValidType = isDate(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? a.getTime() === b.getTime() : false;\n  }\n  aValidType = isSymbol(a);\n  bValidType = isSymbol(b);\n  if (aValidType || bValidType) {\n    return a === b;\n  }\n  aValidType = isArray(a);\n  bValidType = isArray(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? looseCompareArrays(a, b) : false;\n  }\n  aValidType = isObject(a);\n  bValidType = isObject(b);\n  if (aValidType || bValidType) {\n    if (!aValidType || !bValidType) {\n      return false;\n    }\n    const aKeysCount = Object.keys(a).length;\n    const bKeysCount = Object.keys(b).length;\n    if (aKeysCount !== bKeysCount) {\n      return false;\n    }\n    for (const key in a) {\n      const aHasKey = a.hasOwnProperty(key);\n      const bHasKey = b.hasOwnProperty(key);\n      if (aHasKey && !bHasKey || !aHasKey && bHasKey || !looseEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n  }\n  return String(a) === String(b);\n}\nfunction looseIndexOf(arr, val) {\n  return arr.findIndex((item) => looseEqual(item, val));\n}\n\nconst isRef = (val) => {\n  return !!(val && val[\"__v_isRef\"] === true);\n};\nconst toDisplayString = (val) => {\n  return isString(val) ? val : val == null ? \"\" : isArray(val) || isObject(val) && (val.toString === objectToString || !isFunction(val.toString)) ? isRef(val) ? toDisplayString(val.value) : JSON.stringify(val, replacer, 2) : String(val);\n};\nconst replacer = (_key, val) => {\n  if (isRef(val)) {\n    return replacer(_key, val.value);\n  } else if (isMap(val)) {\n    return {\n      [`Map(${val.size})`]: [...val.entries()].reduce(\n        (entries, [key, val2], i) => {\n          entries[stringifySymbol(key, i) + \" =>\"] = val2;\n          return entries;\n        },\n        {}\n      )\n    };\n  } else if (isSet(val)) {\n    return {\n      [`Set(${val.size})`]: [...val.values()].map((v) => stringifySymbol(v))\n    };\n  } else if (isSymbol(val)) {\n    return stringifySymbol(val);\n  } else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\n    return String(val);\n  }\n  return val;\n};\nconst stringifySymbol = (v, i = \"\") => {\n  var _a;\n  return (\n    // Symbol.description in es2019+ so we need to cast here to pass\n    // the lib: es2016 check\n    isSymbol(v) ? `Symbol(${(_a = v.description) != null ? _a : i})` : v\n  );\n};\n\nfunction normalizeCssVarValue(value) {\n  if (value == null) {\n    return \"initial\";\n  }\n  if (typeof value === \"string\") {\n    return value === \"\" ? \" \" : value;\n  }\n  if (typeof value !== \"number\" || !Number.isFinite(value)) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      console.warn(\n        \"[Vue warn] Invalid value used for CSS binding. Expected a string or a finite number but received:\",\n        value\n      );\n    }\n  }\n  return String(value);\n}\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, PatchFlags, ShapeFlags, SlotFlags, camelize, capitalize, cssVarNameEscapeSymbolsRE, def, escapeHtml, escapeHtmlComment, extend, genCacheKey, genPropsAccessExp, generateCodeFrame, getEscapedCssVarName, getGlobalThis, hasChanged, hasOwn, hyphenate, includeBooleanAttr, invokeArrayFns, isArray, isBooleanAttr, isBuiltInDirective, isDate, isFunction, isGloballyAllowed, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownHtmlAttr, isKnownMathMLAttr, isKnownSvgAttr, isMap, isMathMLTag, isModelListener, isObject, isOn, isPlainObject, isPromise, isRegExp, isRenderableAttrValue, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, looseToNumber, makeMap, normalizeClass, normalizeCssVarValue, normalizeProps, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n", "/**\n* @vue/reactivity v3.5.26\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\nimport { extend, hasChanged, isArray, isIntegerKey, isSymbol, isMap, hasOwn, makeMap, isObject, capitalize, toRawType, def, isFunction, EMPTY_OBJ, isSet, isPlainObject, remove, NOOP } from '@vue/shared';\n\nfunction warn(msg, ...args) {\n  console.warn(`[Vue warn] ${msg}`, ...args);\n}\n\nlet activeEffectScope;\nclass EffectScope {\n  constructor(detached = false) {\n    this.detached = detached;\n    /**\n     * @internal\n     */\n    this._active = true;\n    /**\n     * @internal track `on` calls, allow `on` call multiple times\n     */\n    this._on = 0;\n    /**\n     * @internal\n     */\n    this.effects = [];\n    /**\n     * @internal\n     */\n    this.cleanups = [];\n    this._isPaused = false;\n    this.parent = activeEffectScope;\n    if (!detached && activeEffectScope) {\n      this.index = (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(\n        this\n      ) - 1;\n    }\n  }\n  get active() {\n    return this._active;\n  }\n  pause() {\n    if (this._active) {\n      this._isPaused = true;\n      let i, l;\n      if (this.scopes) {\n        for (i = 0, l = this.scopes.length; i < l; i++) {\n          this.scopes[i].pause();\n        }\n      }\n      for (i = 0, l = this.effects.length; i < l; i++) {\n        this.effects[i].pause();\n      }\n    }\n  }\n  /**\n   * Resumes the effect scope, including all child scopes and effects.\n   */\n  resume() {\n    if (this._active) {\n      if (this._isPaused) {\n        this._isPaused = false;\n        let i, l;\n        if (this.scopes) {\n          for (i = 0, l = this.scopes.length; i < l; i++) {\n            this.scopes[i].resume();\n          }\n        }\n        for (i = 0, l = this.effects.length; i < l; i++) {\n          this.effects[i].resume();\n        }\n      }\n    }\n  }\n  run(fn) {\n    if (this._active) {\n      const currentEffectScope = activeEffectScope;\n      try {\n        activeEffectScope = this;\n        return fn();\n      } finally {\n        activeEffectScope = currentEffectScope;\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(`cannot run an inactive effect scope.`);\n    }\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  on() {\n    if (++this._on === 1) {\n      this.prevScope = activeEffectScope;\n      activeEffectScope = this;\n    }\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  off() {\n    if (this._on > 0 && --this._on === 0) {\n      activeEffectScope = this.prevScope;\n      this.prevScope = void 0;\n    }\n  }\n  stop(fromParent) {\n    if (this._active) {\n      this._active = false;\n      let i, l;\n      for (i = 0, l = this.effects.length; i < l; i++) {\n        this.effects[i].stop();\n      }\n      this.effects.length = 0;\n      for (i = 0, l = this.cleanups.length; i < l; i++) {\n        this.cleanups[i]();\n      }\n      this.cleanups.length = 0;\n      if (this.scopes) {\n        for (i = 0, l = this.scopes.length; i < l; i++) {\n          this.scopes[i].stop(true);\n        }\n        this.scopes.length = 0;\n      }\n      if (!this.detached && this.parent && !fromParent) {\n        const last = this.parent.scopes.pop();\n        if (last && last !== this) {\n          this.parent.scopes[this.index] = last;\n          last.index = this.index;\n        }\n      }\n      this.parent = void 0;\n    }\n  }\n}\nfunction effectScope(detached) {\n  return new EffectScope(detached);\n}\nfunction getCurrentScope() {\n  return activeEffectScope;\n}\nfunction onScopeDispose(fn, failSilently = false) {\n  if (activeEffectScope) {\n    activeEffectScope.cleanups.push(fn);\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onScopeDispose() is called when there is no active effect scope to be associated with.`\n    );\n  }\n}\n\nlet activeSub;\nconst EffectFlags = {\n  \"ACTIVE\": 1,\n  \"1\": \"ACTIVE\",\n  \"RUNNING\": 2,\n  \"2\": \"RUNNING\",\n  \"TRACKING\": 4,\n  \"4\": \"TRACKING\",\n  \"NOTIFIED\": 8,\n  \"8\": \"NOTIFIED\",\n  \"DIRTY\": 16,\n  \"16\": \"DIRTY\",\n  \"ALLOW_RECURSE\": 32,\n  \"32\": \"ALLOW_RECURSE\",\n  \"PAUSED\": 64,\n  \"64\": \"PAUSED\",\n  \"EVALUATED\": 128,\n  \"128\": \"EVALUATED\"\n};\nconst pausedQueueEffects = /* @__PURE__ */ new WeakSet();\nclass ReactiveEffect {\n  constructor(fn) {\n    this.fn = fn;\n    /**\n     * @internal\n     */\n    this.deps = void 0;\n    /**\n     * @internal\n     */\n    this.depsTail = void 0;\n    /**\n     * @internal\n     */\n    this.flags = 1 | 4;\n    /**\n     * @internal\n     */\n    this.next = void 0;\n    /**\n     * @internal\n     */\n    this.cleanup = void 0;\n    this.scheduler = void 0;\n    if (activeEffectScope && activeEffectScope.active) {\n      activeEffectScope.effects.push(this);\n    }\n  }\n  pause() {\n    this.flags |= 64;\n  }\n  resume() {\n    if (this.flags & 64) {\n      this.flags &= -65;\n      if (pausedQueueEffects.has(this)) {\n        pausedQueueEffects.delete(this);\n        this.trigger();\n      }\n    }\n  }\n  /**\n   * @internal\n   */\n  notify() {\n    if (this.flags & 2 && !(this.flags & 32)) {\n      return;\n    }\n    if (!(this.flags & 8)) {\n      batch(this);\n    }\n  }\n  run() {\n    if (!(this.flags & 1)) {\n      return this.fn();\n    }\n    this.flags |= 2;\n    cleanupEffect(this);\n    prepareDeps(this);\n    const prevEffect = activeSub;\n    const prevShouldTrack = shouldTrack;\n    activeSub = this;\n    shouldTrack = true;\n    try {\n      return this.fn();\n    } finally {\n      if (!!(process.env.NODE_ENV !== \"production\") && activeSub !== this) {\n        warn(\n          \"Active effect was not restored correctly - this is likely a Vue internal bug.\"\n        );\n      }\n      cleanupDeps(this);\n      activeSub = prevEffect;\n      shouldTrack = prevShouldTrack;\n      this.flags &= -3;\n    }\n  }\n  stop() {\n    if (this.flags & 1) {\n      for (let link = this.deps; link; link = link.nextDep) {\n        removeSub(link);\n      }\n      this.deps = this.depsTail = void 0;\n      cleanupEffect(this);\n      this.onStop && this.onStop();\n      this.flags &= -2;\n    }\n  }\n  trigger() {\n    if (this.flags & 64) {\n      pausedQueueEffects.add(this);\n    } else if (this.scheduler) {\n      this.scheduler();\n    } else {\n      this.runIfDirty();\n    }\n  }\n  /**\n   * @internal\n   */\n  runIfDirty() {\n    if (isDirty(this)) {\n      this.run();\n    }\n  }\n  get dirty() {\n    return isDirty(this);\n  }\n}\nlet batchDepth = 0;\nlet batchedSub;\nlet batchedComputed;\nfunction batch(sub, isComputed = false) {\n  sub.flags |= 8;\n  if (isComputed) {\n    sub.next = batchedComputed;\n    batchedComputed = sub;\n    return;\n  }\n  sub.next = batchedSub;\n  batchedSub = sub;\n}\nfunction startBatch() {\n  batchDepth++;\n}\nfunction endBatch() {\n  if (--batchDepth > 0) {\n    return;\n  }\n  if (batchedComputed) {\n    let e = batchedComputed;\n    batchedComputed = void 0;\n    while (e) {\n      const next = e.next;\n      e.next = void 0;\n      e.flags &= -9;\n      e = next;\n    }\n  }\n  let error;\n  while (batchedSub) {\n    let e = batchedSub;\n    batchedSub = void 0;\n    while (e) {\n      const next = e.next;\n      e.next = void 0;\n      e.flags &= -9;\n      if (e.flags & 1) {\n        try {\n          ;\n          e.trigger();\n        } catch (err) {\n          if (!error) error = err;\n        }\n      }\n      e = next;\n    }\n  }\n  if (error) throw error;\n}\nfunction prepareDeps(sub) {\n  for (let link = sub.deps; link; link = link.nextDep) {\n    link.version = -1;\n    link.prevActiveLink = link.dep.activeLink;\n    link.dep.activeLink = link;\n  }\n}\nfunction cleanupDeps(sub) {\n  let head;\n  let tail = sub.depsTail;\n  let link = tail;\n  while (link) {\n    const prev = link.prevDep;\n    if (link.version === -1) {\n      if (link === tail) tail = prev;\n      removeSub(link);\n      removeDep(link);\n    } else {\n      head = link;\n    }\n    link.dep.activeLink = link.prevActiveLink;\n    link.prevActiveLink = void 0;\n    link = prev;\n  }\n  sub.deps = head;\n  sub.depsTail = tail;\n}\nfunction isDirty(sub) {\n  for (let link = sub.deps; link; link = link.nextDep) {\n    if (link.dep.version !== link.version || link.dep.computed && (refreshComputed(link.dep.computed) || link.dep.version !== link.version)) {\n      return true;\n    }\n  }\n  if (sub._dirty) {\n    return true;\n  }\n  return false;\n}\nfunction refreshComputed(computed) {\n  if (computed.flags & 4 && !(computed.flags & 16)) {\n    return;\n  }\n  computed.flags &= -17;\n  if (computed.globalVersion === globalVersion) {\n    return;\n  }\n  computed.globalVersion = globalVersion;\n  if (!computed.isSSR && computed.flags & 128 && (!computed.deps && !computed._dirty || !isDirty(computed))) {\n    return;\n  }\n  computed.flags |= 2;\n  const dep = computed.dep;\n  const prevSub = activeSub;\n  const prevShouldTrack = shouldTrack;\n  activeSub = computed;\n  shouldTrack = true;\n  try {\n    prepareDeps(computed);\n    const value = computed.fn(computed._value);\n    if (dep.version === 0 || hasChanged(value, computed._value)) {\n      computed.flags |= 128;\n      computed._value = value;\n      dep.version++;\n    }\n  } catch (err) {\n    dep.version++;\n    throw err;\n  } finally {\n    activeSub = prevSub;\n    shouldTrack = prevShouldTrack;\n    cleanupDeps(computed);\n    computed.flags &= -3;\n  }\n}\nfunction removeSub(link, soft = false) {\n  const { dep, prevSub, nextSub } = link;\n  if (prevSub) {\n    prevSub.nextSub = nextSub;\n    link.prevSub = void 0;\n  }\n  if (nextSub) {\n    nextSub.prevSub = prevSub;\n    link.nextSub = void 0;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && dep.subsHead === link) {\n    dep.subsHead = nextSub;\n  }\n  if (dep.subs === link) {\n    dep.subs = prevSub;\n    if (!prevSub && dep.computed) {\n      dep.computed.flags &= -5;\n      for (let l = dep.computed.deps; l; l = l.nextDep) {\n        removeSub(l, true);\n      }\n    }\n  }\n  if (!soft && !--dep.sc && dep.map) {\n    dep.map.delete(dep.key);\n  }\n}\nfunction removeDep(link) {\n  const { prevDep, nextDep } = link;\n  if (prevDep) {\n    prevDep.nextDep = nextDep;\n    link.prevDep = void 0;\n  }\n  if (nextDep) {\n    nextDep.prevDep = prevDep;\n    link.nextDep = void 0;\n  }\n}\nfunction effect(fn, options) {\n  if (fn.effect instanceof ReactiveEffect) {\n    fn = fn.effect.fn;\n  }\n  const e = new ReactiveEffect(fn);\n  if (options) {\n    extend(e, options);\n  }\n  try {\n    e.run();\n  } catch (err) {\n    e.stop();\n    throw err;\n  }\n  const runner = e.run.bind(e);\n  runner.effect = e;\n  return runner;\n}\nfunction stop(runner) {\n  runner.effect.stop();\n}\nlet shouldTrack = true;\nconst trackStack = [];\nfunction pauseTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = false;\n}\nfunction enableTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = true;\n}\nfunction resetTracking() {\n  const last = trackStack.pop();\n  shouldTrack = last === void 0 ? true : last;\n}\nfunction onEffectCleanup(fn, failSilently = false) {\n  if (activeSub instanceof ReactiveEffect) {\n    activeSub.cleanup = fn;\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onEffectCleanup() was called when there was no active effect to associate with.`\n    );\n  }\n}\nfunction cleanupEffect(e) {\n  const { cleanup } = e;\n  e.cleanup = void 0;\n  if (cleanup) {\n    const prevSub = activeSub;\n    activeSub = void 0;\n    try {\n      cleanup();\n    } finally {\n      activeSub = prevSub;\n    }\n  }\n}\n\nlet globalVersion = 0;\nclass Link {\n  constructor(sub, dep) {\n    this.sub = sub;\n    this.dep = dep;\n    this.version = dep.version;\n    this.nextDep = this.prevDep = this.nextSub = this.prevSub = this.prevActiveLink = void 0;\n  }\n}\nclass Dep {\n  // TODO isolatedDeclarations \"__v_skip\"\n  constructor(computed) {\n    this.computed = computed;\n    this.version = 0;\n    /**\n     * Link between this dep and the current active effect\n     */\n    this.activeLink = void 0;\n    /**\n     * Doubly linked list representing the subscribing effects (tail)\n     */\n    this.subs = void 0;\n    /**\n     * For object property deps cleanup\n     */\n    this.map = void 0;\n    this.key = void 0;\n    /**\n     * Subscriber counter\n     */\n    this.sc = 0;\n    /**\n     * @internal\n     */\n    this.__v_skip = true;\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      this.subsHead = void 0;\n    }\n  }\n  track(debugInfo) {\n    if (!activeSub || !shouldTrack || activeSub === this.computed) {\n      return;\n    }\n    let link = this.activeLink;\n    if (link === void 0 || link.sub !== activeSub) {\n      link = this.activeLink = new Link(activeSub, this);\n      if (!activeSub.deps) {\n        activeSub.deps = activeSub.depsTail = link;\n      } else {\n        link.prevDep = activeSub.depsTail;\n        activeSub.depsTail.nextDep = link;\n        activeSub.depsTail = link;\n      }\n      addSub(link);\n    } else if (link.version === -1) {\n      link.version = this.version;\n      if (link.nextDep) {\n        const next = link.nextDep;\n        next.prevDep = link.prevDep;\n        if (link.prevDep) {\n          link.prevDep.nextDep = next;\n        }\n        link.prevDep = activeSub.depsTail;\n        link.nextDep = void 0;\n        activeSub.depsTail.nextDep = link;\n        activeSub.depsTail = link;\n        if (activeSub.deps === link) {\n          activeSub.deps = next;\n        }\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && activeSub.onTrack) {\n      activeSub.onTrack(\n        extend(\n          {\n            effect: activeSub\n          },\n          debugInfo\n        )\n      );\n    }\n    return link;\n  }\n  trigger(debugInfo) {\n    this.version++;\n    globalVersion++;\n    this.notify(debugInfo);\n  }\n  notify(debugInfo) {\n    startBatch();\n    try {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        for (let head = this.subsHead; head; head = head.nextSub) {\n          if (head.sub.onTrigger && !(head.sub.flags & 8)) {\n            head.sub.onTrigger(\n              extend(\n                {\n                  effect: head.sub\n                },\n                debugInfo\n              )\n            );\n          }\n        }\n      }\n      for (let link = this.subs; link; link = link.prevSub) {\n        if (link.sub.notify()) {\n          ;\n          link.sub.dep.notify();\n        }\n      }\n    } finally {\n      endBatch();\n    }\n  }\n}\nfunction addSub(link) {\n  link.dep.sc++;\n  if (link.sub.flags & 4) {\n    const computed = link.dep.computed;\n    if (computed && !link.dep.subs) {\n      computed.flags |= 4 | 16;\n      for (let l = computed.deps; l; l = l.nextDep) {\n        addSub(l);\n      }\n    }\n    const currentTail = link.dep.subs;\n    if (currentTail !== link) {\n      link.prevSub = currentTail;\n      if (currentTail) currentTail.nextSub = link;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && link.dep.subsHead === void 0) {\n      link.dep.subsHead = link;\n    }\n    link.dep.subs = link;\n  }\n}\nconst targetMap = /* @__PURE__ */ new WeakMap();\nconst ITERATE_KEY = /* @__PURE__ */ Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Object iterate\" : \"\"\n);\nconst MAP_KEY_ITERATE_KEY = /* @__PURE__ */ Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Map keys iterate\" : \"\"\n);\nconst ARRAY_ITERATE_KEY = /* @__PURE__ */ Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Array iterate\" : \"\"\n);\nfunction track(target, type, key) {\n  if (shouldTrack && activeSub) {\n    let depsMap = targetMap.get(target);\n    if (!depsMap) {\n      targetMap.set(target, depsMap = /* @__PURE__ */ new Map());\n    }\n    let dep = depsMap.get(key);\n    if (!dep) {\n      depsMap.set(key, dep = new Dep());\n      dep.map = depsMap;\n      dep.key = key;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      dep.track({\n        target,\n        type,\n        key\n      });\n    } else {\n      dep.track();\n    }\n  }\n}\nfunction trigger(target, type, key, newValue, oldValue, oldTarget) {\n  const depsMap = targetMap.get(target);\n  if (!depsMap) {\n    globalVersion++;\n    return;\n  }\n  const run = (dep) => {\n    if (dep) {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        dep.trigger({\n          target,\n          type,\n          key,\n          newValue,\n          oldValue,\n          oldTarget\n        });\n      } else {\n        dep.trigger();\n      }\n    }\n  };\n  startBatch();\n  if (type === \"clear\") {\n    depsMap.forEach(run);\n  } else {\n    const targetIsArray = isArray(target);\n    const isArrayIndex = targetIsArray && isIntegerKey(key);\n    if (targetIsArray && key === \"length\") {\n      const newLength = Number(newValue);\n      depsMap.forEach((dep, key2) => {\n        if (key2 === \"length\" || key2 === ARRAY_ITERATE_KEY || !isSymbol(key2) && key2 >= newLength) {\n          run(dep);\n        }\n      });\n    } else {\n      if (key !== void 0 || depsMap.has(void 0)) {\n        run(depsMap.get(key));\n      }\n      if (isArrayIndex) {\n        run(depsMap.get(ARRAY_ITERATE_KEY));\n      }\n      switch (type) {\n        case \"add\":\n          if (!targetIsArray) {\n            run(depsMap.get(ITERATE_KEY));\n            if (isMap(target)) {\n              run(depsMap.get(MAP_KEY_ITERATE_KEY));\n            }\n          } else if (isArrayIndex) {\n            run(depsMap.get(\"length\"));\n          }\n          break;\n        case \"delete\":\n          if (!targetIsArray) {\n            run(depsMap.get(ITERATE_KEY));\n            if (isMap(target)) {\n              run(depsMap.get(MAP_KEY_ITERATE_KEY));\n            }\n          }\n          break;\n        case \"set\":\n          if (isMap(target)) {\n            run(depsMap.get(ITERATE_KEY));\n          }\n          break;\n      }\n    }\n  }\n  endBatch();\n}\nfunction getDepFromReactive(object, key) {\n  const depMap = targetMap.get(object);\n  return depMap && depMap.get(key);\n}\n\nfunction reactiveReadArray(array) {\n  const raw = toRaw(array);\n  if (raw === array) return raw;\n  track(raw, \"iterate\", ARRAY_ITERATE_KEY);\n  return isShallow(array) ? raw : raw.map(toReactive);\n}\nfunction shallowReadArray(arr) {\n  track(arr = toRaw(arr), \"iterate\", ARRAY_ITERATE_KEY);\n  return arr;\n}\nfunction toWrapped(target, item) {\n  if (isReadonly(target)) {\n    return isReactive(target) ? toReadonly(toReactive(item)) : toReadonly(item);\n  }\n  return toReactive(item);\n}\nconst arrayInstrumentations = {\n  __proto__: null,\n  [Symbol.iterator]() {\n    return iterator(this, Symbol.iterator, (item) => toWrapped(this, item));\n  },\n  concat(...args) {\n    return reactiveReadArray(this).concat(\n      ...args.map((x) => isArray(x) ? reactiveReadArray(x) : x)\n    );\n  },\n  entries() {\n    return iterator(this, \"entries\", (value) => {\n      value[1] = toWrapped(this, value[1]);\n      return value;\n    });\n  },\n  every(fn, thisArg) {\n    return apply(this, \"every\", fn, thisArg, void 0, arguments);\n  },\n  filter(fn, thisArg) {\n    return apply(\n      this,\n      \"filter\",\n      fn,\n      thisArg,\n      (v) => v.map((item) => toWrapped(this, item)),\n      arguments\n    );\n  },\n  find(fn, thisArg) {\n    return apply(\n      this,\n      \"find\",\n      fn,\n      thisArg,\n      (item) => toWrapped(this, item),\n      arguments\n    );\n  },\n  findIndex(fn, thisArg) {\n    return apply(this, \"findIndex\", fn, thisArg, void 0, arguments);\n  },\n  findLast(fn, thisArg) {\n    return apply(\n      this,\n      \"findLast\",\n      fn,\n      thisArg,\n      (item) => toWrapped(this, item),\n      arguments\n    );\n  },\n  findLastIndex(fn, thisArg) {\n    return apply(this, \"findLastIndex\", fn, thisArg, void 0, arguments);\n  },\n  // flat, flatMap could benefit from ARRAY_ITERATE but are not straight-forward to implement\n  forEach(fn, thisArg) {\n    return apply(this, \"forEach\", fn, thisArg, void 0, arguments);\n  },\n  includes(...args) {\n    return searchProxy(this, \"includes\", args);\n  },\n  indexOf(...args) {\n    return searchProxy(this, \"indexOf\", args);\n  },\n  join(separator) {\n    return reactiveReadArray(this).join(separator);\n  },\n  // keys() iterator only reads `length`, no optimization required\n  lastIndexOf(...args) {\n    return searchProxy(this, \"lastIndexOf\", args);\n  },\n  map(fn, thisArg) {\n    return apply(this, \"map\", fn, thisArg, void 0, arguments);\n  },\n  pop() {\n    return noTracking(this, \"pop\");\n  },\n  push(...args) {\n    return noTracking(this, \"push\", args);\n  },\n  reduce(fn, ...args) {\n    return reduce(this, \"reduce\", fn, args);\n  },\n  reduceRight(fn, ...args) {\n    return reduce(this, \"reduceRight\", fn, args);\n  },\n  shift() {\n    return noTracking(this, \"shift\");\n  },\n  // slice could use ARRAY_ITERATE but also seems to beg for range tracking\n  some(fn, thisArg) {\n    return apply(this, \"some\", fn, thisArg, void 0, arguments);\n  },\n  splice(...args) {\n    return noTracking(this, \"splice\", args);\n  },\n  toReversed() {\n    return reactiveReadArray(this).toReversed();\n  },\n  toSorted(comparer) {\n    return reactiveReadArray(this).toSorted(comparer);\n  },\n  toSpliced(...args) {\n    return reactiveReadArray(this).toSpliced(...args);\n  },\n  unshift(...args) {\n    return noTracking(this, \"unshift\", args);\n  },\n  values() {\n    return iterator(this, \"values\", (item) => toWrapped(this, item));\n  }\n};\nfunction iterator(self, method, wrapValue) {\n  const arr = shallowReadArray(self);\n  const iter = arr[method]();\n  if (arr !== self && !isShallow(self)) {\n    iter._next = iter.next;\n    iter.next = () => {\n      const result = iter._next();\n      if (!result.done) {\n        result.value = wrapValue(result.value);\n      }\n      return result;\n    };\n  }\n  return iter;\n}\nconst arrayProto = Array.prototype;\nfunction apply(self, method, fn, thisArg, wrappedRetFn, args) {\n  const arr = shallowReadArray(self);\n  const needsWrap = arr !== self && !isShallow(self);\n  const methodFn = arr[method];\n  if (methodFn !== arrayProto[method]) {\n    const result2 = methodFn.apply(self, args);\n    return needsWrap ? toReactive(result2) : result2;\n  }\n  let wrappedFn = fn;\n  if (arr !== self) {\n    if (needsWrap) {\n      wrappedFn = function(item, index) {\n        return fn.call(this, toWrapped(self, item), index, self);\n      };\n    } else if (fn.length > 2) {\n      wrappedFn = function(item, index) {\n        return fn.call(this, item, index, self);\n      };\n    }\n  }\n  const result = methodFn.call(arr, wrappedFn, thisArg);\n  return needsWrap && wrappedRetFn ? wrappedRetFn(result) : result;\n}\nfunction reduce(self, method, fn, args) {\n  const arr = shallowReadArray(self);\n  let wrappedFn = fn;\n  if (arr !== self) {\n    if (!isShallow(self)) {\n      wrappedFn = function(acc, item, index) {\n        return fn.call(this, acc, toWrapped(self, item), index, self);\n      };\n    } else if (fn.length > 3) {\n      wrappedFn = function(acc, item, index) {\n        return fn.call(this, acc, item, index, self);\n      };\n    }\n  }\n  return arr[method](wrappedFn, ...args);\n}\nfunction searchProxy(self, method, args) {\n  const arr = toRaw(self);\n  track(arr, \"iterate\", ARRAY_ITERATE_KEY);\n  const res = arr[method](...args);\n  if ((res === -1 || res === false) && isProxy(args[0])) {\n    args[0] = toRaw(args[0]);\n    return arr[method](...args);\n  }\n  return res;\n}\nfunction noTracking(self, method, args = []) {\n  pauseTracking();\n  startBatch();\n  const res = toRaw(self)[method].apply(self, args);\n  endBatch();\n  resetTracking();\n  return res;\n}\n\nconst isNonTrackableKeys = /* @__PURE__ */ makeMap(`__proto__,__v_isRef,__isVue`);\nconst builtInSymbols = new Set(\n  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((key) => key !== \"arguments\" && key !== \"caller\").map((key) => Symbol[key]).filter(isSymbol)\n);\nfunction hasOwnProperty(key) {\n  if (!isSymbol(key)) key = String(key);\n  const obj = toRaw(this);\n  track(obj, \"has\", key);\n  return obj.hasOwnProperty(key);\n}\nclass BaseReactiveHandler {\n  constructor(_isReadonly = false, _isShallow = false) {\n    this._isReadonly = _isReadonly;\n    this._isShallow = _isShallow;\n  }\n  get(target, key, receiver) {\n    if (key === \"__v_skip\") return target[\"__v_skip\"];\n    const isReadonly2 = this._isReadonly, isShallow2 = this._isShallow;\n    if (key === \"__v_isReactive\") {\n      return !isReadonly2;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly2;\n    } else if (key === \"__v_isShallow\") {\n      return isShallow2;\n    } else if (key === \"__v_raw\") {\n      if (receiver === (isReadonly2 ? isShallow2 ? shallowReadonlyMap : readonlyMap : isShallow2 ? shallowReactiveMap : reactiveMap).get(target) || // receiver is not the reactive proxy, but has the same prototype\n      // this means the receiver is a user proxy of the reactive proxy\n      Object.getPrototypeOf(target) === Object.getPrototypeOf(receiver)) {\n        return target;\n      }\n      return;\n    }\n    const targetIsArray = isArray(target);\n    if (!isReadonly2) {\n      let fn;\n      if (targetIsArray && (fn = arrayInstrumentations[key])) {\n        return fn;\n      }\n      if (key === \"hasOwnProperty\") {\n        return hasOwnProperty;\n      }\n    }\n    const res = Reflect.get(\n      target,\n      key,\n      // if this is a proxy wrapping a ref, return methods using the raw ref\n      // as receiver so that we don't have to call `toRaw` on the ref in all\n      // its class methods\n      isRef(target) ? target : receiver\n    );\n    if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {\n      return res;\n    }\n    if (!isReadonly2) {\n      track(target, \"get\", key);\n    }\n    if (isShallow2) {\n      return res;\n    }\n    if (isRef(res)) {\n      const value = targetIsArray && isIntegerKey(key) ? res : res.value;\n      return isReadonly2 && isObject(value) ? readonly(value) : value;\n    }\n    if (isObject(res)) {\n      return isReadonly2 ? readonly(res) : reactive(res);\n    }\n    return res;\n  }\n}\nclass MutableReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(false, isShallow2);\n  }\n  set(target, key, value, receiver) {\n    let oldValue = target[key];\n    const isArrayWithIntegerKey = isArray(target) && isIntegerKey(key);\n    if (!this._isShallow) {\n      const isOldValueReadonly = isReadonly(oldValue);\n      if (!isShallow(value) && !isReadonly(value)) {\n        oldValue = toRaw(oldValue);\n        value = toRaw(value);\n      }\n      if (!isArrayWithIntegerKey && isRef(oldValue) && !isRef(value)) {\n        if (isOldValueReadonly) {\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            warn(\n              `Set operation on key \"${String(key)}\" failed: target is readonly.`,\n              target[key]\n            );\n          }\n          return true;\n        } else {\n          oldValue.value = value;\n          return true;\n        }\n      }\n    }\n    const hadKey = isArrayWithIntegerKey ? Number(key) < target.length : hasOwn(target, key);\n    const result = Reflect.set(\n      target,\n      key,\n      value,\n      isRef(target) ? target : receiver\n    );\n    if (target === toRaw(receiver)) {\n      if (!hadKey) {\n        trigger(target, \"add\", key, value);\n      } else if (hasChanged(value, oldValue)) {\n        trigger(target, \"set\", key, value, oldValue);\n      }\n    }\n    return result;\n  }\n  deleteProperty(target, key) {\n    const hadKey = hasOwn(target, key);\n    const oldValue = target[key];\n    const result = Reflect.deleteProperty(target, key);\n    if (result && hadKey) {\n      trigger(target, \"delete\", key, void 0, oldValue);\n    }\n    return result;\n  }\n  has(target, key) {\n    const result = Reflect.has(target, key);\n    if (!isSymbol(key) || !builtInSymbols.has(key)) {\n      track(target, \"has\", key);\n    }\n    return result;\n  }\n  ownKeys(target) {\n    track(\n      target,\n      \"iterate\",\n      isArray(target) ? \"length\" : ITERATE_KEY\n    );\n    return Reflect.ownKeys(target);\n  }\n}\nclass ReadonlyReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(true, isShallow2);\n  }\n  set(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Set operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n  deleteProperty(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Delete operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n}\nconst mutableHandlers = /* @__PURE__ */ new MutableReactiveHandler();\nconst readonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler();\nconst shallowReactiveHandlers = /* @__PURE__ */ new MutableReactiveHandler(true);\nconst shallowReadonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler(true);\n\nconst toShallow = (value) => value;\nconst getProto = (v) => Reflect.getPrototypeOf(v);\nfunction createIterableMethod(method, isReadonly2, isShallow2) {\n  return function(...args) {\n    const target = this[\"__v_raw\"];\n    const rawTarget = toRaw(target);\n    const targetIsMap = isMap(rawTarget);\n    const isPair = method === \"entries\" || method === Symbol.iterator && targetIsMap;\n    const isKeyOnly = method === \"keys\" && targetIsMap;\n    const innerIterator = target[method](...args);\n    const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;\n    !isReadonly2 && track(\n      rawTarget,\n      \"iterate\",\n      isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY\n    );\n    return {\n      // iterator protocol\n      next() {\n        const { value, done } = innerIterator.next();\n        return done ? { value, done } : {\n          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),\n          done\n        };\n      },\n      // iterable protocol\n      [Symbol.iterator]() {\n        return this;\n      }\n    };\n  };\n}\nfunction createReadonlyMethod(type) {\n  return function(...args) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      const key = args[0] ? `on key \"${args[0]}\" ` : ``;\n      warn(\n        `${capitalize(type)} operation ${key}failed: target is readonly.`,\n        toRaw(this)\n      );\n    }\n    return type === \"delete\" ? false : type === \"clear\" ? void 0 : this;\n  };\n}\nfunction createInstrumentations(readonly, shallow) {\n  const instrumentations = {\n    get(key) {\n      const target = this[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const rawKey = toRaw(key);\n      if (!readonly) {\n        if (hasChanged(key, rawKey)) {\n          track(rawTarget, \"get\", key);\n        }\n        track(rawTarget, \"get\", rawKey);\n      }\n      const { has } = getProto(rawTarget);\n      const wrap = shallow ? toShallow : readonly ? toReadonly : toReactive;\n      if (has.call(rawTarget, key)) {\n        return wrap(target.get(key));\n      } else if (has.call(rawTarget, rawKey)) {\n        return wrap(target.get(rawKey));\n      } else if (target !== rawTarget) {\n        target.get(key);\n      }\n    },\n    get size() {\n      const target = this[\"__v_raw\"];\n      !readonly && track(toRaw(target), \"iterate\", ITERATE_KEY);\n      return target.size;\n    },\n    has(key) {\n      const target = this[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const rawKey = toRaw(key);\n      if (!readonly) {\n        if (hasChanged(key, rawKey)) {\n          track(rawTarget, \"has\", key);\n        }\n        track(rawTarget, \"has\", rawKey);\n      }\n      return key === rawKey ? target.has(key) : target.has(key) || target.has(rawKey);\n    },\n    forEach(callback, thisArg) {\n      const observed = this;\n      const target = observed[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const wrap = shallow ? toShallow : readonly ? toReadonly : toReactive;\n      !readonly && track(rawTarget, \"iterate\", ITERATE_KEY);\n      return target.forEach((value, key) => {\n        return callback.call(thisArg, wrap(value), wrap(key), observed);\n      });\n    }\n  };\n  extend(\n    instrumentations,\n    readonly ? {\n      add: createReadonlyMethod(\"add\"),\n      set: createReadonlyMethod(\"set\"),\n      delete: createReadonlyMethod(\"delete\"),\n      clear: createReadonlyMethod(\"clear\")\n    } : {\n      add(value) {\n        if (!shallow && !isShallow(value) && !isReadonly(value)) {\n          value = toRaw(value);\n        }\n        const target = toRaw(this);\n        const proto = getProto(target);\n        const hadKey = proto.has.call(target, value);\n        if (!hadKey) {\n          target.add(value);\n          trigger(target, \"add\", value, value);\n        }\n        return this;\n      },\n      set(key, value) {\n        if (!shallow && !isShallow(value) && !isReadonly(value)) {\n          value = toRaw(value);\n        }\n        const target = toRaw(this);\n        const { has, get } = getProto(target);\n        let hadKey = has.call(target, key);\n        if (!hadKey) {\n          key = toRaw(key);\n          hadKey = has.call(target, key);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          checkIdentityKeys(target, has, key);\n        }\n        const oldValue = get.call(target, key);\n        target.set(key, value);\n        if (!hadKey) {\n          trigger(target, \"add\", key, value);\n        } else if (hasChanged(value, oldValue)) {\n          trigger(target, \"set\", key, value, oldValue);\n        }\n        return this;\n      },\n      delete(key) {\n        const target = toRaw(this);\n        const { has, get } = getProto(target);\n        let hadKey = has.call(target, key);\n        if (!hadKey) {\n          key = toRaw(key);\n          hadKey = has.call(target, key);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          checkIdentityKeys(target, has, key);\n        }\n        const oldValue = get ? get.call(target, key) : void 0;\n        const result = target.delete(key);\n        if (hadKey) {\n          trigger(target, \"delete\", key, void 0, oldValue);\n        }\n        return result;\n      },\n      clear() {\n        const target = toRaw(this);\n        const hadItems = target.size !== 0;\n        const oldTarget = !!(process.env.NODE_ENV !== \"production\") ? isMap(target) ? new Map(target) : new Set(target) : void 0;\n        const result = target.clear();\n        if (hadItems) {\n          trigger(\n            target,\n            \"clear\",\n            void 0,\n            void 0,\n            oldTarget\n          );\n        }\n        return result;\n      }\n    }\n  );\n  const iteratorMethods = [\n    \"keys\",\n    \"values\",\n    \"entries\",\n    Symbol.iterator\n  ];\n  iteratorMethods.forEach((method) => {\n    instrumentations[method] = createIterableMethod(method, readonly, shallow);\n  });\n  return instrumentations;\n}\nfunction createInstrumentationGetter(isReadonly2, shallow) {\n  const instrumentations = createInstrumentations(isReadonly2, shallow);\n  return (target, key, receiver) => {\n    if (key === \"__v_isReactive\") {\n      return !isReadonly2;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly2;\n    } else if (key === \"__v_raw\") {\n      return target;\n    }\n    return Reflect.get(\n      hasOwn(instrumentations, key) && key in target ? instrumentations : target,\n      key,\n      receiver\n    );\n  };\n}\nconst mutableCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, false)\n};\nconst shallowCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, true)\n};\nconst readonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, false)\n};\nconst shallowReadonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, true)\n};\nfunction checkIdentityKeys(target, has, key) {\n  const rawKey = toRaw(key);\n  if (rawKey !== key && has.call(target, rawKey)) {\n    const type = toRawType(target);\n    warn(\n      `Reactive ${type} contains both the raw and reactive versions of the same object${type === `Map` ? ` as keys` : ``}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`\n    );\n  }\n}\n\nconst reactiveMap = /* @__PURE__ */ new WeakMap();\nconst shallowReactiveMap = /* @__PURE__ */ new WeakMap();\nconst readonlyMap = /* @__PURE__ */ new WeakMap();\nconst shallowReadonlyMap = /* @__PURE__ */ new WeakMap();\nfunction targetTypeMap(rawType) {\n  switch (rawType) {\n    case \"Object\":\n    case \"Array\":\n      return 1 /* COMMON */;\n    case \"Map\":\n    case \"Set\":\n    case \"WeakMap\":\n    case \"WeakSet\":\n      return 2 /* COLLECTION */;\n    default:\n      return 0 /* INVALID */;\n  }\n}\nfunction getTargetType(value) {\n  return value[\"__v_skip\"] || !Object.isExtensible(value) ? 0 /* INVALID */ : targetTypeMap(toRawType(value));\n}\nfunction reactive(target) {\n  if (isReadonly(target)) {\n    return target;\n  }\n  return createReactiveObject(\n    target,\n    false,\n    mutableHandlers,\n    mutableCollectionHandlers,\n    reactiveMap\n  );\n}\nfunction shallowReactive(target) {\n  return createReactiveObject(\n    target,\n    false,\n    shallowReactiveHandlers,\n    shallowCollectionHandlers,\n    shallowReactiveMap\n  );\n}\nfunction readonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    readonlyHandlers,\n    readonlyCollectionHandlers,\n    readonlyMap\n  );\n}\nfunction shallowReadonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    shallowReadonlyHandlers,\n    shallowReadonlyCollectionHandlers,\n    shallowReadonlyMap\n  );\n}\nfunction createReactiveObject(target, isReadonly2, baseHandlers, collectionHandlers, proxyMap) {\n  if (!isObject(target)) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `value cannot be made ${isReadonly2 ? \"readonly\" : \"reactive\"}: ${String(\n          target\n        )}`\n      );\n    }\n    return target;\n  }\n  if (target[\"__v_raw\"] && !(isReadonly2 && target[\"__v_isReactive\"])) {\n    return target;\n  }\n  const targetType = getTargetType(target);\n  if (targetType === 0 /* INVALID */) {\n    return target;\n  }\n  const existingProxy = proxyMap.get(target);\n  if (existingProxy) {\n    return existingProxy;\n  }\n  const proxy = new Proxy(\n    target,\n    targetType === 2 /* COLLECTION */ ? collectionHandlers : baseHandlers\n  );\n  proxyMap.set(target, proxy);\n  return proxy;\n}\nfunction isReactive(value) {\n  if (isReadonly(value)) {\n    return isReactive(value[\"__v_raw\"]);\n  }\n  return !!(value && value[\"__v_isReactive\"]);\n}\nfunction isReadonly(value) {\n  return !!(value && value[\"__v_isReadonly\"]);\n}\nfunction isShallow(value) {\n  return !!(value && value[\"__v_isShallow\"]);\n}\nfunction isProxy(value) {\n  return value ? !!value[\"__v_raw\"] : false;\n}\nfunction toRaw(observed) {\n  const raw = observed && observed[\"__v_raw\"];\n  return raw ? toRaw(raw) : observed;\n}\nfunction markRaw(value) {\n  if (!hasOwn(value, \"__v_skip\") && Object.isExtensible(value)) {\n    def(value, \"__v_skip\", true);\n  }\n  return value;\n}\nconst toReactive = (value) => isObject(value) ? reactive(value) : value;\nconst toReadonly = (value) => isObject(value) ? readonly(value) : value;\n\nfunction isRef(r) {\n  return r ? r[\"__v_isRef\"] === true : false;\n}\nfunction ref(value) {\n  return createRef(value, false);\n}\nfunction shallowRef(value) {\n  return createRef(value, true);\n}\nfunction createRef(rawValue, shallow) {\n  if (isRef(rawValue)) {\n    return rawValue;\n  }\n  return new RefImpl(rawValue, shallow);\n}\nclass RefImpl {\n  constructor(value, isShallow2) {\n    this.dep = new Dep();\n    this[\"__v_isRef\"] = true;\n    this[\"__v_isShallow\"] = false;\n    this._rawValue = isShallow2 ? value : toRaw(value);\n    this._value = isShallow2 ? value : toReactive(value);\n    this[\"__v_isShallow\"] = isShallow2;\n  }\n  get value() {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      this.dep.track({\n        target: this,\n        type: \"get\",\n        key: \"value\"\n      });\n    } else {\n      this.dep.track();\n    }\n    return this._value;\n  }\n  set value(newValue) {\n    const oldValue = this._rawValue;\n    const useDirectValue = this[\"__v_isShallow\"] || isShallow(newValue) || isReadonly(newValue);\n    newValue = useDirectValue ? newValue : toRaw(newValue);\n    if (hasChanged(newValue, oldValue)) {\n      this._rawValue = newValue;\n      this._value = useDirectValue ? newValue : toReactive(newValue);\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        this.dep.trigger({\n          target: this,\n          type: \"set\",\n          key: \"value\",\n          newValue,\n          oldValue\n        });\n      } else {\n        this.dep.trigger();\n      }\n    }\n  }\n}\nfunction triggerRef(ref2) {\n  if (ref2.dep) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      ref2.dep.trigger({\n        target: ref2,\n        type: \"set\",\n        key: \"value\",\n        newValue: ref2._value\n      });\n    } else {\n      ref2.dep.trigger();\n    }\n  }\n}\nfunction unref(ref2) {\n  return isRef(ref2) ? ref2.value : ref2;\n}\nfunction toValue(source) {\n  return isFunction(source) ? source() : unref(source);\n}\nconst shallowUnwrapHandlers = {\n  get: (target, key, receiver) => key === \"__v_raw\" ? target : unref(Reflect.get(target, key, receiver)),\n  set: (target, key, value, receiver) => {\n    const oldValue = target[key];\n    if (isRef(oldValue) && !isRef(value)) {\n      oldValue.value = value;\n      return true;\n    } else {\n      return Reflect.set(target, key, value, receiver);\n    }\n  }\n};\nfunction proxyRefs(objectWithRefs) {\n  return isReactive(objectWithRefs) ? objectWithRefs : new Proxy(objectWithRefs, shallowUnwrapHandlers);\n}\nclass CustomRefImpl {\n  constructor(factory) {\n    this[\"__v_isRef\"] = true;\n    this._value = void 0;\n    const dep = this.dep = new Dep();\n    const { get, set } = factory(dep.track.bind(dep), dep.trigger.bind(dep));\n    this._get = get;\n    this._set = set;\n  }\n  get value() {\n    return this._value = this._get();\n  }\n  set value(newVal) {\n    this._set(newVal);\n  }\n}\nfunction customRef(factory) {\n  return new CustomRefImpl(factory);\n}\nfunction toRefs(object) {\n  if (!!(process.env.NODE_ENV !== \"production\") && !isProxy(object)) {\n    warn(`toRefs() expects a reactive object but received a plain one.`);\n  }\n  const ret = isArray(object) ? new Array(object.length) : {};\n  for (const key in object) {\n    ret[key] = propertyToRef(object, key);\n  }\n  return ret;\n}\nclass ObjectRefImpl {\n  constructor(_object, _key, _defaultValue) {\n    this._object = _object;\n    this._key = _key;\n    this._defaultValue = _defaultValue;\n    this[\"__v_isRef\"] = true;\n    this._value = void 0;\n    this._raw = toRaw(_object);\n    let shallow = true;\n    let obj = _object;\n    if (!isArray(_object) || !isIntegerKey(String(_key))) {\n      do {\n        shallow = !isProxy(obj) || isShallow(obj);\n      } while (shallow && (obj = obj[\"__v_raw\"]));\n    }\n    this._shallow = shallow;\n  }\n  get value() {\n    let val = this._object[this._key];\n    if (this._shallow) {\n      val = unref(val);\n    }\n    return this._value = val === void 0 ? this._defaultValue : val;\n  }\n  set value(newVal) {\n    if (this._shallow && isRef(this._raw[this._key])) {\n      const nestedRef = this._object[this._key];\n      if (isRef(nestedRef)) {\n        nestedRef.value = newVal;\n        return;\n      }\n    }\n    this._object[this._key] = newVal;\n  }\n  get dep() {\n    return getDepFromReactive(this._raw, this._key);\n  }\n}\nclass GetterRefImpl {\n  constructor(_getter) {\n    this._getter = _getter;\n    this[\"__v_isRef\"] = true;\n    this[\"__v_isReadonly\"] = true;\n    this._value = void 0;\n  }\n  get value() {\n    return this._value = this._getter();\n  }\n}\nfunction toRef(source, key, defaultValue) {\n  if (isRef(source)) {\n    return source;\n  } else if (isFunction(source)) {\n    return new GetterRefImpl(source);\n  } else if (isObject(source) && arguments.length > 1) {\n    return propertyToRef(source, key, defaultValue);\n  } else {\n    return ref(source);\n  }\n}\nfunction propertyToRef(source, key, defaultValue) {\n  return new ObjectRefImpl(source, key, defaultValue);\n}\n\nclass ComputedRefImpl {\n  constructor(fn, setter, isSSR) {\n    this.fn = fn;\n    this.setter = setter;\n    /**\n     * @internal\n     */\n    this._value = void 0;\n    /**\n     * @internal\n     */\n    this.dep = new Dep(this);\n    /**\n     * @internal\n     */\n    this.__v_isRef = true;\n    // TODO isolatedDeclarations \"__v_isReadonly\"\n    // A computed is also a subscriber that tracks other deps\n    /**\n     * @internal\n     */\n    this.deps = void 0;\n    /**\n     * @internal\n     */\n    this.depsTail = void 0;\n    /**\n     * @internal\n     */\n    this.flags = 16;\n    /**\n     * @internal\n     */\n    this.globalVersion = globalVersion - 1;\n    /**\n     * @internal\n     */\n    this.next = void 0;\n    // for backwards compat\n    this.effect = this;\n    this[\"__v_isReadonly\"] = !setter;\n    this.isSSR = isSSR;\n  }\n  /**\n   * @internal\n   */\n  notify() {\n    this.flags |= 16;\n    if (!(this.flags & 8) && // avoid infinite self recursion\n    activeSub !== this) {\n      batch(this, true);\n      return true;\n    } else if (!!(process.env.NODE_ENV !== \"production\")) ;\n  }\n  get value() {\n    const link = !!(process.env.NODE_ENV !== \"production\") ? this.dep.track({\n      target: this,\n      type: \"get\",\n      key: \"value\"\n    }) : this.dep.track();\n    refreshComputed(this);\n    if (link) {\n      link.version = this.dep.version;\n    }\n    return this._value;\n  }\n  set value(newValue) {\n    if (this.setter) {\n      this.setter(newValue);\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\"Write operation failed: computed value is readonly\");\n    }\n  }\n}\nfunction computed(getterOrOptions, debugOptions, isSSR = false) {\n  let getter;\n  let setter;\n  if (isFunction(getterOrOptions)) {\n    getter = getterOrOptions;\n  } else {\n    getter = getterOrOptions.get;\n    setter = getterOrOptions.set;\n  }\n  const cRef = new ComputedRefImpl(getter, setter, isSSR);\n  if (!!(process.env.NODE_ENV !== \"production\") && debugOptions && !isSSR) {\n    cRef.onTrack = debugOptions.onTrack;\n    cRef.onTrigger = debugOptions.onTrigger;\n  }\n  return cRef;\n}\n\nconst TrackOpTypes = {\n  \"GET\": \"get\",\n  \"HAS\": \"has\",\n  \"ITERATE\": \"iterate\"\n};\nconst TriggerOpTypes = {\n  \"SET\": \"set\",\n  \"ADD\": \"add\",\n  \"DELETE\": \"delete\",\n  \"CLEAR\": \"clear\"\n};\nconst ReactiveFlags = {\n  \"SKIP\": \"__v_skip\",\n  \"IS_REACTIVE\": \"__v_isReactive\",\n  \"IS_READONLY\": \"__v_isReadonly\",\n  \"IS_SHALLOW\": \"__v_isShallow\",\n  \"RAW\": \"__v_raw\",\n  \"IS_REF\": \"__v_isRef\"\n};\n\nconst WatchErrorCodes = {\n  \"WATCH_GETTER\": 2,\n  \"2\": \"WATCH_GETTER\",\n  \"WATCH_CALLBACK\": 3,\n  \"3\": \"WATCH_CALLBACK\",\n  \"WATCH_CLEANUP\": 4,\n  \"4\": \"WATCH_CLEANUP\"\n};\nconst INITIAL_WATCHER_VALUE = {};\nconst cleanupMap = /* @__PURE__ */ new WeakMap();\nlet activeWatcher = void 0;\nfunction getCurrentWatcher() {\n  return activeWatcher;\n}\nfunction onWatcherCleanup(cleanupFn, failSilently = false, owner = activeWatcher) {\n  if (owner) {\n    let cleanups = cleanupMap.get(owner);\n    if (!cleanups) cleanupMap.set(owner, cleanups = []);\n    cleanups.push(cleanupFn);\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onWatcherCleanup() was called when there was no active watcher to associate with.`\n    );\n  }\n}\nfunction watch(source, cb, options = EMPTY_OBJ) {\n  const { immediate, deep, once, scheduler, augmentJob, call } = options;\n  const warnInvalidSource = (s) => {\n    (options.onWarn || warn)(\n      `Invalid watch source: `,\n      s,\n      `A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.`\n    );\n  };\n  const reactiveGetter = (source2) => {\n    if (deep) return source2;\n    if (isShallow(source2) || deep === false || deep === 0)\n      return traverse(source2, 1);\n    return traverse(source2);\n  };\n  let effect;\n  let getter;\n  let cleanup;\n  let boundCleanup;\n  let forceTrigger = false;\n  let isMultiSource = false;\n  if (isRef(source)) {\n    getter = () => source.value;\n    forceTrigger = isShallow(source);\n  } else if (isReactive(source)) {\n    getter = () => reactiveGetter(source);\n    forceTrigger = true;\n  } else if (isArray(source)) {\n    isMultiSource = true;\n    forceTrigger = source.some((s) => isReactive(s) || isShallow(s));\n    getter = () => source.map((s) => {\n      if (isRef(s)) {\n        return s.value;\n      } else if (isReactive(s)) {\n        return reactiveGetter(s);\n      } else if (isFunction(s)) {\n        return call ? call(s, 2) : s();\n      } else {\n        !!(process.env.NODE_ENV !== \"production\") && warnInvalidSource(s);\n      }\n    });\n  } else if (isFunction(source)) {\n    if (cb) {\n      getter = call ? () => call(source, 2) : source;\n    } else {\n      getter = () => {\n        if (cleanup) {\n          pauseTracking();\n          try {\n            cleanup();\n          } finally {\n            resetTracking();\n          }\n        }\n        const currentEffect = activeWatcher;\n        activeWatcher = effect;\n        try {\n          return call ? call(source, 3, [boundCleanup]) : source(boundCleanup);\n        } finally {\n          activeWatcher = currentEffect;\n        }\n      };\n    }\n  } else {\n    getter = NOOP;\n    !!(process.env.NODE_ENV !== \"production\") && warnInvalidSource(source);\n  }\n  if (cb && deep) {\n    const baseGetter = getter;\n    const depth = deep === true ? Infinity : deep;\n    getter = () => traverse(baseGetter(), depth);\n  }\n  const scope = getCurrentScope();\n  const watchHandle = () => {\n    effect.stop();\n    if (scope && scope.active) {\n      remove(scope.effects, effect);\n    }\n  };\n  if (once && cb) {\n    const _cb = cb;\n    cb = (...args) => {\n      _cb(...args);\n      watchHandle();\n    };\n  }\n  let oldValue = isMultiSource ? new Array(source.length).fill(INITIAL_WATCHER_VALUE) : INITIAL_WATCHER_VALUE;\n  const job = (immediateFirstRun) => {\n    if (!(effect.flags & 1) || !effect.dirty && !immediateFirstRun) {\n      return;\n    }\n    if (cb) {\n      const newValue = effect.run();\n      if (deep || forceTrigger || (isMultiSource ? newValue.some((v, i) => hasChanged(v, oldValue[i])) : hasChanged(newValue, oldValue))) {\n        if (cleanup) {\n          cleanup();\n        }\n        const currentWatcher = activeWatcher;\n        activeWatcher = effect;\n        try {\n          const args = [\n            newValue,\n            // pass undefined as the old value when it's changed for the first time\n            oldValue === INITIAL_WATCHER_VALUE ? void 0 : isMultiSource && oldValue[0] === INITIAL_WATCHER_VALUE ? [] : oldValue,\n            boundCleanup\n          ];\n          oldValue = newValue;\n          call ? call(cb, 3, args) : (\n            // @ts-expect-error\n            cb(...args)\n          );\n        } finally {\n          activeWatcher = currentWatcher;\n        }\n      }\n    } else {\n      effect.run();\n    }\n  };\n  if (augmentJob) {\n    augmentJob(job);\n  }\n  effect = new ReactiveEffect(getter);\n  effect.scheduler = scheduler ? () => scheduler(job, false) : job;\n  boundCleanup = (fn) => onWatcherCleanup(fn, false, effect);\n  cleanup = effect.onStop = () => {\n    const cleanups = cleanupMap.get(effect);\n    if (cleanups) {\n      if (call) {\n        call(cleanups, 4);\n      } else {\n        for (const cleanup2 of cleanups) cleanup2();\n      }\n      cleanupMap.delete(effect);\n    }\n  };\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    effect.onTrack = options.onTrack;\n    effect.onTrigger = options.onTrigger;\n  }\n  if (cb) {\n    if (immediate) {\n      job(true);\n    } else {\n      oldValue = effect.run();\n    }\n  } else if (scheduler) {\n    scheduler(job.bind(null, true), true);\n  } else {\n    effect.run();\n  }\n  watchHandle.pause = effect.pause.bind(effect);\n  watchHandle.resume = effect.resume.bind(effect);\n  watchHandle.stop = watchHandle;\n  return watchHandle;\n}\nfunction traverse(value, depth = Infinity, seen) {\n  if (depth <= 0 || !isObject(value) || value[\"__v_skip\"]) {\n    return value;\n  }\n  seen = seen || /* @__PURE__ */ new Map();\n  if ((seen.get(value) || 0) >= depth) {\n    return value;\n  }\n  seen.set(value, depth);\n  depth--;\n  if (isRef(value)) {\n    traverse(value.value, depth, seen);\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      traverse(value[i], depth, seen);\n    }\n  } else if (isSet(value) || isMap(value)) {\n    value.forEach((v) => {\n      traverse(v, depth, seen);\n    });\n  } else if (isPlainObject(value)) {\n    for (const key in value) {\n      traverse(value[key], depth, seen);\n    }\n    for (const key of Object.getOwnPropertySymbols(value)) {\n      if (Object.prototype.propertyIsEnumerable.call(value, key)) {\n        traverse(value[key], depth, seen);\n      }\n    }\n  }\n  return value;\n}\n\nexport { ARRAY_ITERATE_KEY, EffectFlags, EffectScope, ITERATE_KEY, MAP_KEY_ITERATE_KEY, ReactiveEffect, ReactiveFlags, TrackOpTypes, TriggerOpTypes, WatchErrorCodes, computed, customRef, effect, effectScope, enableTracking, getCurrentScope, getCurrentWatcher, isProxy, isReactive, isReadonly, isRef, isShallow, markRaw, onEffectCleanup, onScopeDispose, onWatcherCleanup, pauseTracking, proxyRefs, reactive, reactiveReadArray, readonly, ref, resetTracking, shallowReactive, shallowReadArray, shallowReadonly, shallowRef, stop, toRaw, toReactive, toReadonly, toRef, toRefs, toValue, track, traverse, trigger, triggerRef, unref, watch };\n", "import { ReactiveEffect, isReactive, isRef, isProxy, ReactiveFlags, toRaw, effectScope, reactive, readonly } from '@vue/reactivity';\nexport * from '@vue/reactivity';\nimport { isPromise, isObject, isArray, isSet, isMap, isPlainObject, isFunction } from '@vue/shared';\nimport { isValidElement, useRef, useCallback, useMemo, useEffect, useState } from 'react';\nimport { useSyncExternalStore } from 'use-sync-external-store/shim/index.js';\n\n/**\n * @internal\n */\nconst isServer = typeof window === \"undefined\";\n/**\n * @internal\n */\nvar InternalNameSpace;\n(function (InternalNameSpace) {\n    InternalNameSpace[\"$$__ignore__$$\"] = \"$$__ignore__$$\";\n    InternalNameSpace[\"$$__persist__$$\"] = \"$$__persist__$$\";\n    InternalNameSpace[\"$$__subscribe__$$\"] = \"$$__subscribe__$$\";\n    InternalNameSpace[\"$$__redux_dev_tool__$$\"] = \"$$__redux_dev_tool__$$\";\n})(InternalNameSpace || (InternalNameSpace = {}));\n\nconst jobs = new Set();\nconst MAX_UPDATE = 20;\nlet process$1 = false;\nlet updateCount = 0;\nconst flushQueue = () => {\n    const all = [...jobs.values()].slice(0);\n    jobs.clear();\n    for (const job of all) {\n        job.notify();\n    }\n    process$1 = false;\n    // fix miss update\n    if (jobs.size) {\n        updateCount++;\n        if (updateCount > MAX_UPDATE) {\n            throw new Error(`[reactivity-store] have a infinity update for current store, pendingJobs: ${new Set(jobs)}`);\n        }\n        flushQueue();\n    }\n};\n/**\n * @internal\n */\nconst queueJob = (job) => {\n    jobs.add(job);\n    if (process$1)\n        return;\n    process$1 = true;\n    updateCount = 0;\n    Promise.resolve().then(flushQueue);\n};\n\nlet currentController = null;\n/**\n * @public\n */\nfunction getCurrentController() {\n    return currentController;\n}\nclass ControllerEffect extends ReactiveEffect {\n    get _isControllerEffect() {\n        return true;\n    }\n    constructor(getter) {\n        super(getter);\n        if (process.env.NODE_ENV === \"development\") {\n            this._devVersion = \"3.5.22\";\n        }\n    }\n}\nconst catchError = (cb, instance) => {\n    return () => {\n        if (!instance._isActive)\n            return;\n        if (process.env.NODE_ENV === \"development\") {\n            instance._devRunCount = instance._devRunCount || 0;\n            instance._devRunCount++;\n        }\n        try {\n            const res = cb();\n            if (isPromise(res)) {\n                throw new Error(`[reactivity-store] selector should be a pure function, but current is a async function`);\n            }\n            return res;\n        }\n        catch (e) {\n            if (process.env.NODE_ENV === \"development\") {\n                console.error(`[reactivity-store] have an error for current selector, ${e === null || e === void 0 ? void 0 : e.message}, maybe you use the middleware with wrong usage, %o`, instance);\n            }\n            return null;\n        }\n    };\n};\n/**\n * @public\n */\nclass Controller {\n    constructor(_getState, _compare, _lifeCycle, _namespace, _onUpdate) {\n        this._getState = _getState;\n        this._compare = _compare;\n        this._lifeCycle = _lifeCycle;\n        this._namespace = _namespace;\n        this._onUpdate = _onUpdate;\n        this._listeners = new Set();\n        // make the state change and component update\n        this._updateCount = 0;\n        this._isActive = true;\n        this.notify = () => {\n            var _a;\n            if (!this._isActive)\n                return;\n            // TODO implement server side initialState\n            if (process.env.NODE_ENV === \"development\" && isServer) {\n                console.error(`[reactivity-store] unexpected update for reactivity-store, should not update a state on the server`);\n            }\n            this._updateCount++;\n            try {\n                (_a = this._onUpdate) === null || _a === void 0 ? void 0 : _a.call(this);\n            }\n            catch (e) {\n                if (process.env.NODE_ENV === \"development\") {\n                    console.error(`[reactivity-store] have an error for current updater, ${e === null || e === void 0 ? void 0 : e.message}, please check your subscribe, %o`, this);\n                }\n                this._lifeCycle.canUpdateComponent = false;\n            }\n            this._listeners.forEach((f) => f());\n        };\n        this._scheduler = () => {\n            const p = getCurrentController();\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            currentController = this;\n            const newState = this._effect.run();\n            currentController = p;\n            if (!this._isActive)\n                return;\n            const isSame = this._compare(this._state, newState);\n            this._state = newState;\n            if (!isSame) {\n                if (this._lifeCycle.canUpdateComponent) {\n                    if (this._lifeCycle.syncUpdateComponent) {\n                        this.notify();\n                    }\n                    else {\n                        queueJob(this);\n                    }\n                }\n            }\n        };\n        this.subscribe = (listener) => {\n            this._listeners.add(listener);\n            return () => this._listeners.delete(listener);\n        };\n        this.getState = () => {\n            return this._updateCount;\n        };\n        this.getEffect = () => {\n            return this._effect;\n        };\n        this.getSelectorState = () => {\n            return this._getStateSafe();\n        };\n        this.getLifeCycle = () => {\n            return this._lifeCycle;\n        };\n        this._getStateSafe = catchError(_getState, this);\n        this._effect = new ControllerEffect(this._getStateSafe);\n        this._effect.scheduler = this._scheduler;\n        if (process.env.NODE_ENV === \"development\") {\n            this._devVersion = \"0.3.12\";\n        }\n    }\n    // TODO move into constructor function?\n    run() {\n        const p = getCurrentController();\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        currentController = this;\n        this._state = this._effect.run();\n        currentController = p;\n    }\n    stop() {\n        this._effect.stop();\n        this._listeners.clear();\n        this._isActive = false;\n        this._state = null;\n    }\n    setActive(d) {\n        this._isActive = d;\n    }\n}\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\n/**\n * @internal\n */\nconst createLifeCycle = () => ({\n    onBeforeMount: [],\n    onBeforeUpdate: [],\n    onBeforeUnmount: [],\n    onMounted: [],\n    onUpdated: [],\n    onUnmounted: [],\n    hasHookInstall: false,\n    canUpdateComponent: true,\n    syncUpdateComponent: false,\n});\n\n/* eslint-disable @typescript-eslint/no-unused-expressions */\nfunction _traverse(value, seen) {\n    if (!isObject(value) || value[ReactiveFlags.SKIP] || isValidElement(value)) {\n        return value;\n    }\n    seen = seen || new Set();\n    if (seen.has(value)) {\n        return value;\n    }\n    seen.add(value);\n    if (isRef(value)) {\n        traverse(value.value, seen);\n    }\n    else if (isArray(value)) {\n        for (let i = 0; i < value.length; i++) {\n            traverse(value[i], seen);\n        }\n    }\n    else if (isSet(value) || isMap(value)) {\n        value.forEach((v) => {\n            traverse(v, seen);\n        });\n    }\n    else if (isPlainObject(value)) {\n        for (const key in value) {\n            traverse(value[key], seen);\n        }\n    }\n    return value;\n}\nfunction traverseShallow(value) {\n    if (!isObject(value) || value[ReactiveFlags.SKIP] || isValidElement(value)) {\n        return value;\n    }\n    if (isRef(value)) {\n        value.value;\n    }\n    else if (isArray(value)) {\n        for (let i = 0; i < value.length; i++) {\n            value[i];\n        }\n    }\n    else if (isSet(value) || isMap(value)) {\n        value.forEach((v) => {\n        });\n    }\n    else if (isPlainObject(value)) {\n        for (const key in value) {\n            value[key];\n        }\n    }\n    return value;\n}\n/**\n * @internal\n */\nfunction traverse(value, seen) {\n    if (process.env.NODE_ENV === \"development\") {\n        const start = Date.now();\n        const re = _traverse(value, seen);\n        const end = Date.now();\n        if (end - start > 5) {\n            console.warn(`[reactivity-store] 'traverse' current data: %o take a lot of time`, re);\n        }\n        return re;\n    }\n    else {\n        return _traverse(value, seen);\n    }\n}\n/**\n * @internal\n */\nfunction checkHasReactive(value) {\n    let hasReactive = false;\n    function traverse(value, seen) {\n        if (!isObject(value))\n            return;\n        if (hasReactive)\n            return;\n        if (isReactive(value) || isRef(value) || isProxy(value)) {\n            hasReactive = true;\n            return;\n        }\n        seen = seen || new Set();\n        if (seen.has(value)) {\n            return;\n        }\n        seen.add(value);\n        if (isArray(value)) {\n            for (let i = 0; i < value.length; i++) {\n                traverse(value[i], seen);\n            }\n        }\n        else if (isSet(value) || isMap(value)) {\n            value.forEach((v) => {\n                traverse(v, seen);\n            });\n        }\n        else if (isPlainObject(value)) {\n            for (const key in value) {\n                traverse(value[key], seen);\n            }\n        }\n        return;\n    }\n    traverse(value);\n    return hasReactive;\n}\n/**\n * @internal\n */\nfunction checkHasFunction(value) {\n    let hasFunction = false;\n    function traverse(value, seen) {\n        if (hasFunction)\n            return;\n        if (isFunction(value)) {\n            hasFunction = true;\n            return;\n        }\n        seen = seen || new Set();\n        if (seen.has(value)) {\n            return;\n        }\n        seen.add(value);\n        if (isArray(value)) {\n            for (let i = 0; i < value.length; i++) {\n                traverse(value[i], seen);\n            }\n        }\n        else if (isSet(value) || isMap(value)) {\n            value.forEach((v) => {\n                traverse(v, seen);\n            });\n        }\n        else if (isPlainObject(value)) {\n            for (const key in value) {\n                traverse(value[key], seen);\n            }\n        }\n        return;\n    }\n    traverse(value);\n    return hasFunction;\n}\n/**\n * @internal\n */\nfunction checkHasSameField(source, target) {\n    return Object.keys(source).filter((key) => key in target);\n}\n/**\n * @internal\n */\nfunction checkHasMiddleware(value) {\n    if (value && (value === null || value === void 0 ? void 0 : value[\"$$__state__$$\"]) && (value === null || value === void 0 ? void 0 : value[\"$$__middleware__$$\"])) {\n        return true;\n    }\n}\n\nconst namespaceMap = Object.create(null);\nconst defaultCompare$2 = () => false;\n/**\n * @internal\n */\nconst setNamespaceMap = (key, value) => {\n    namespaceMap[key] = value;\n};\n/**\n * @internal\n */\nconst delNamespace = (key) => {\n    delete namespaceMap[key];\n};\n/**\n * @internal\n */\nconst checkHasKey = (key) => {\n    return key in namespaceMap;\n};\n// cache state which has connect to devtool\nconst devToolMap = Object.create(null);\nconst devController = Object.create(null);\nconst globalName = \"__reactivity-store-redux-devtools__\";\nlet globalDevTools = null;\n/**\n * @internal\n */\nconst sendToDevTools = (action) => {\n    var _a;\n    const { getUpdatedState } = action, rest = __rest(action, [\"getUpdatedState\"]);\n    try {\n        const state = getUpdatedState();\n        (_a = globalDevTools === null || globalDevTools === void 0 ? void 0 : globalDevTools.send) === null || _a === void 0 ? void 0 : _a.call(globalDevTools, rest, state);\n    }\n    catch (e) {\n        console.log(e);\n    }\n};\nconst initDevTools = () => {\n    const devTools = window.__REDUX_DEVTOOLS_EXTENSION__.connect({ name: globalName });\n    devTools.subscribe((message) => {\n        switch (message.type) {\n            case \"DISPATCH\":\n            case \"ACTION\":\n                console.warn(`[reactivity-store] currently don't support time-travel or dispatch action in devtools`);\n                devTools.init(Object.assign({}, devToolMap));\n                break;\n        }\n    });\n    return devTools;\n};\n/**\n * @internal\n */\nconst connectDevTool = (name, actions, readonlyState, reactiveState, options) => {\n    if (window && window.__REDUX_DEVTOOLS_EXTENSION__ && typeof window.__REDUX_DEVTOOLS_EXTENSION__.connect === \"function\") {\n        try {\n            const devTools = globalDevTools || initDevTools();\n            globalDevTools = devTools;\n            const existController = devController[name];\n            if (existController) {\n                existController.stop();\n            }\n            devToolMap[name] = readonlyState;\n            const lifeCycle = createLifeCycle();\n            lifeCycle.syncUpdateComponent = true;\n            let updateInActionCount = 0;\n            const onUpdateWithoutAction = () => {\n                if (updateInActionCount > 0)\n                    return;\n                sendToDevTools({\n                    type: `subscribeAction-${name}`,\n                    getUpdatedState: () => (Object.assign(Object.assign({}, devToolMap), { [name]: readonlyState })),\n                });\n            };\n            const subscribe = () => {\n                let re = reactiveState;\n                if ((options === null || options === void 0 ? void 0 : options.listener) && typeof (options === null || options === void 0 ? void 0 : options.listener) === \"function\") {\n                    re = options.listener(reactiveState);\n                }\n                if (options === null || options === void 0 ? void 0 : options.shallow) {\n                    traverseShallow(re);\n                }\n                else {\n                    traverse(re);\n                }\n            };\n            // create a subscribe controller to listen to the state change, because some state change may not trigger by the `action`\n            const controller = new Controller(subscribe, defaultCompare$2, lifeCycle, InternalNameSpace.$$__redux_dev_tool__$$, onUpdateWithoutAction);\n            controller._devReduxOptions = options;\n            devController[name] = controller;\n            controller.run();\n            const obj = Object.assign({}, devToolMap);\n            devTools.init(obj);\n            return Object.keys(actions).reduce((p, c) => {\n                p[c] = (...args) => {\n                    updateInActionCount++;\n                    const len = actions[c].length || 0;\n                    const re = actions[c](...args);\n                    const action = actions[c];\n                    if (isPromise(re)) {\n                        re.finally(() => {\n                            sendToDevTools({\n                                type: `asyncAction-${name}/${action.name || \"anonymous\"}`,\n                                $payload: args.slice(0, len),\n                                getUpdatedState: () => (Object.assign(Object.assign({}, devToolMap), { [name]: readonlyState })),\n                            });\n                            updateInActionCount--;\n                        });\n                    }\n                    else {\n                        sendToDevTools({\n                            type: `syncAction-${name}/${action.name || \"anonymous\"}`,\n                            $payload: args.slice(0, len),\n                            getUpdatedState: () => (Object.assign(Object.assign({}, devToolMap), { [name]: readonlyState })),\n                        });\n                        updateInActionCount--;\n                    }\n                    return re;\n                };\n                return p;\n            }, {});\n        }\n        catch (e) {\n            if (process.env.NODE_ENV === \"development\") {\n                console.warn(`[reactivity-store] connect to redux devtools failed, please check the redux devtools extension`, e);\n            }\n            return actions;\n        }\n    }\n    else {\n        return actions;\n    }\n};\n\n/* eslint-disable @typescript-eslint/no-unsafe-function-type */\n/**\n * @internal\n */\nconst useCallbackRef = (callback) => {\n    const callbackRef = useRef(callback);\n    callbackRef.current = callback;\n    const memoCallback = useCallback((...args) => {\n        var _a;\n        return (_a = callbackRef.current) === null || _a === void 0 ? void 0 : _a.call(null, ...args);\n    }, []);\n    return memoCallback;\n};\n/**\n * @internal\n */\nconst useSubscribeCallbackRef = (callback, deepSelector) => {\n    const callbackRef = useRef();\n    callbackRef.current = typeof callback === \"function\" ? callback : null;\n    const memoCallback = useCallbackRef((arg) => {\n        if (callbackRef.current) {\n            const re = callbackRef.current(arg);\n            if (deepSelector) {\n                traverse(re);\n            }\n            else {\n                // fix useState(s => s) not subscribe reactive state update\n                traverseShallow(re);\n            }\n            return re;\n        }\n        else {\n            // !BREAKING CHANGE, will change the default behavior when the deepSelector is true\n            if (deepSelector) {\n                traverse(arg);\n            }\n            else {\n                traverseShallow(arg);\n            }\n            return arg;\n        }\n    });\n    return memoCallback;\n};\n/**\n * @internal\n */\nconst usePrevValue = (v) => {\n    const vRef = useRef(v);\n    useEffect(() => {\n        vRef.current = v;\n    }, [v]);\n    return vRef.current;\n};\nconst createHook = (reactiveState, readonlyState, initialState, lifeCycle, deepSelector = true, stableSelector = false, stableCompare = true, namespace, actions = undefined) => {\n    const controllerList = new Set();\n    // TODO\n    if (process.env.NODE_ENV === \"development\" && !isServer && namespace) {\n        setNamespaceMap(namespace, initialState);\n    }\n    let active = true;\n    namespace = namespace || InternalNameSpace.$$__ignore__$$;\n    // tool function to generate `useSelector` hook\n    const generateUseHook = (type) => {\n        const currentIsDeep = type === \"default\" ? deepSelector : type === \"deep\" || type === \"deep-stable\";\n        const currentIsStable = type === \"default\" ? stableSelector : type === \"deep-stable\" || type === \"shallow-stable\";\n        function useReactiveHookWithSelector(selector, compare) {\n            const ref = useRef();\n            const selectorRef = useSubscribeCallbackRef(selector, currentIsDeep);\n            const getSelected = useCallbackRef(() => {\n                // 0.1.9\n                // make the returned value as a readonly value, so the only way to change the state is in the `actions` middleware\n                if (selector) {\n                    ref.current = selector(Object.assign(Object.assign({}, readonlyState), actions));\n                }\n                else {\n                    ref.current = Object.assign(Object.assign({}, readonlyState), actions);\n                }\n            });\n            const memoCompare = useCallbackRef((p, n) => {\n                if (compare && typeof compare === \"function\") {\n                    return compare(p, n);\n                }\n                return false;\n            });\n            // may not work will with hmr\n            const prevSelector = currentIsStable ? selector : usePrevValue(selector);\n            const prevCompare = stableCompare ? compare : usePrevValue(compare);\n            const ControllerInstance = useMemo(() => new Controller(() => selectorRef(reactiveState), memoCompare, lifeCycle, namespace, getSelected), []);\n            useSyncExternalStore(ControllerInstance.subscribe, ControllerInstance.getState, ControllerInstance.getState);\n            // initial\n            useMemo(() => {\n                ControllerInstance.run();\n                getSelected();\n            }, [ControllerInstance, getSelected]);\n            // !TODO try to improve the performance\n            // rerun when the 'selector' change\n            useMemo(() => {\n                if (prevSelector !== selector) {\n                    ControllerInstance.run();\n                    getSelected();\n                }\n            }, [ControllerInstance, prevSelector, selector]);\n            useMemo(() => {\n                if (prevCompare !== compare) {\n                    ControllerInstance.run();\n                    getSelected();\n                }\n            }, [ControllerInstance, prevCompare, compare]);\n            if (process.env.NODE_ENV === \"development\") {\n                ControllerInstance._devSelector = selector;\n                ControllerInstance._devCompare = compare;\n                ControllerInstance._devActions = actions;\n                ControllerInstance._devWithDeep = currentIsDeep;\n                ControllerInstance._devWithStable = currentIsStable;\n                ControllerInstance._devType = type;\n                ControllerInstance._devState = initialState;\n                ControllerInstance._devResult = ref.current;\n            }\n            useEffect(() => {\n                ControllerInstance.setActive(true);\n                controllerList.add(ControllerInstance);\n                return () => {\n                    // fix React strictMode issue\n                    if (process.env.NODE_ENV === \"development\") {\n                        ControllerInstance.setActive(false);\n                    }\n                    else {\n                        ControllerInstance.stop();\n                    }\n                    controllerList.delete(ControllerInstance);\n                };\n            }, [ControllerInstance]);\n            return ref.current;\n        }\n        return useReactiveHookWithSelector;\n    };\n    const defaultHook = generateUseHook(\"default\");\n    const deepHook = generateUseHook(\"deep\");\n    const deepStableHook = generateUseHook(\"deep-stable\");\n    const shallowHook = generateUseHook(\"shallow\");\n    const shallowStableHook = generateUseHook(\"shallow-stable\");\n    function useSelector(selector, compare) {\n        return defaultHook(selector, compare);\n    }\n    const typedUseSelector = useSelector;\n    typedUseSelector.getState = () => {\n        if (process.env.NODE_ENV === \"development\") {\n            console.warn(\"[reactivity-store] `getState` is deprecated, use `getReactiveState` or `getReadonlyState` instead\");\n        }\n        return toRaw(initialState);\n    };\n    typedUseSelector.getLifeCycle = () => lifeCycle;\n    typedUseSelector.getActions = () => actions;\n    typedUseSelector.getReactiveState = () => reactiveState;\n    typedUseSelector.getReadonlyState = () => readonlyState;\n    typedUseSelector.useDeepSelector = deepHook;\n    typedUseSelector.useDeepStableSelector = deepStableHook;\n    typedUseSelector.useShallowSelector = shallowHook;\n    typedUseSelector.useShallowStableSelector = shallowStableHook;\n    typedUseSelector.subscribe = (selector, cb, shallow) => {\n        const subscribeSelector = () => {\n            const re = selector(reactiveState);\n            if (process.env.NODE_ENV === \"development\" && isPromise(re)) {\n                console.error(`[reactivity-store/subscribe] selector should return a plain object, but current is a promise`);\n            }\n            if (shallow) {\n                traverseShallow(re);\n            }\n            else {\n                traverse(re);\n            }\n            return re;\n        };\n        const controller = new Controller(subscribeSelector, Object.is, lifeCycle, InternalNameSpace.$$__subscribe__$$, () => cb());\n        controller.run();\n        controllerList.add(controller);\n        return () => {\n            controllerList.delete(controller);\n            controller.stop();\n        };\n    };\n    typedUseSelector.getIsActive = () => active;\n    typedUseSelector.clear = () => {\n        controllerList.forEach((i) => i.stop());\n        if (process.env.NODE_ENV === \"development\" && !isServer && namespace) {\n            delNamespace(namespace);\n        }\n        active = false;\n    };\n    return typedUseSelector;\n};\n\n/* eslint-disable @typescript-eslint/no-unsafe-function-type */\n/**\n * @internal\n */\nconst persistKey = \"reactivity-store/persist-\";\n/**\n * @internal\n */\nconst debounce = (cb, time) => {\n    let id = null;\n    return ((...args) => {\n        clearTimeout(id);\n        id = setTimeout(() => cb.call(null, ...args), time);\n    });\n};\n/**\n * @internal\n */\nconst getFinalState = (state) => {\n    if (state[\"$$__state__$$\"])\n        return state[\"$$__state__$$\"];\n    return state;\n};\n/**\n * @internal\n */\nconst getFinalMiddleware = (state) => {\n    if (state[\"$$__state__$$\"])\n        return (state[\"$$__middleware__$$\"] || {});\n    return {};\n};\n/**\n * @internal\n */\nconst getFinalActions = (state) => {\n    if (state[\"$$__state__$$\"])\n        return (state[\"$$__actions__$$\"] || {});\n    return {};\n};\n/**\n * @internal\n */\nconst getFinalNamespace = (state) => {\n    if (state[\"$$__state__$$\"])\n        return (state[\"$$__namespace__$$\"] || {});\n    return {};\n};\n/**\n * @internal\n */\nconst getFinalSelectorOptions = (state) => {\n    if (state[\"$$__state__$$\"])\n        return (state[\"$$__selectorOptions__$$\"] || {});\n    return {};\n};\n// function for help to build external middleware\n/**\n * @internal\n */\nfunction createMiddleware(setup, options) {\n    return () => {\n        const state = setup();\n        const initialState = getFinalState(state);\n        const middleware = getFinalMiddleware(state);\n        const actions = getFinalActions(state);\n        const namespace = getFinalNamespace(state);\n        const selectorOptions = getFinalSelectorOptions(state);\n        if (process.env.NODE_ENV === \"development\" && middleware[options.name]) {\n            console.warn(`[reactivity-store/middleware] you are using multiple of the '${options.name}' middleware, this is a unexpected usage`);\n        }\n        middleware[options.name] = true;\n        return {\n            [\"$$__state__$$\"]: toRaw(initialState),\n            [\"$$__actions__$$\"]: actions,\n            // field to check duplicate middleware\n            [\"$$__middleware__$$\"]: middleware,\n            [\"$$__namespace__$$\"]: namespace,\n            [\"$$__selectorOptions__$$\"]: selectorOptions,\n        };\n    };\n}\n\n/**\n * @internal\n */\nconst _internalCreateStore = (creator, name = \"createStore\", lifeCycle) => {\n    const state = creator();\n    if (process.env.NODE_ENV === \"development\" && isPromise(state)) {\n        console.error(`[reactivity-store] '${name}' expect receive a reactive object but got a promise %o, this is a unexpected usage. should not return a promise in this 'creator' function`, state);\n    }\n    if (process.env.NODE_ENV === \"development\" && !isObject(state)) {\n        console.error(`[reactivity-store] '${name}' expect receive a reactive object but got a ${state}, this is a unexpected usage. should return a reactive object in this 'creator' function`);\n    }\n    if (process.env.NODE_ENV === \"development\" && checkHasMiddleware(state)) {\n        console.error(`[reactivity-store] '${name}' not support middleware usage, please change to use 'createState'`);\n    }\n    if (process.env.NODE_ENV === \"development\" && !checkHasReactive(state)) {\n        console.error(`[reactivity-store] '${name}' expect receive a reactive object but got a plain object %o, this is a unexpected usage. should return a reactive object in this 'creator' function`, state);\n    }\n    const _state = getFinalState(state);\n    const rawState = toRaw(_state);\n    const reactiveState = reactive(_state);\n    const readonlyState = readonly(_state);\n    const lifeCycleInstance = lifeCycle || createLifeCycle();\n    const useSelector = createHook(reactiveState, readonlyState, rawState, lifeCycleInstance);\n    return useSelector;\n};\n/**\n * @internal\n */\nconst internalCreateStore = (creator, name = \"createStore\", lifeCycle) => {\n    const scope = effectScope();\n    const useSelector = scope.run(() => _internalCreateStore(creator, name, lifeCycle));\n    useSelector.scope = scope;\n    return useSelector;\n};\n/**\n * @internal\n */\nlet globalStoreLifeCycle = null;\n/**\n * @internal\n */\nconst setGlobalStoreLifeCycle = (instance) => {\n    globalStoreLifeCycle = instance;\n};\n\n// vue like lifeCycle for react app;\n/**\n * @public\n */\nconst onMounted = (cb) => {\n    if (!globalStoreLifeCycle)\n        throw new Error(\"[reactivity-store] can not use 'onMounted' outside of the 'createStoreWithComponent' function\");\n    globalStoreLifeCycle.onMounted.push(cb);\n    globalStoreLifeCycle.hasHookInstall = true;\n};\n/**\n * @public\n */\nconst onUpdated = (cb) => {\n    if (!globalStoreLifeCycle)\n        throw new Error(\"[reactivity-store] can not use 'onUpdated' outside of the 'createStoreWithComponent' function\");\n    globalStoreLifeCycle.onUpdated.push(cb);\n    globalStoreLifeCycle.hasHookInstall = true;\n};\n/**\n * @public\n */\nconst onUnmounted = (cb) => {\n    if (!globalStoreLifeCycle)\n        throw new Error(\"[reactivity-store] can not use 'onUnmounted' outside of the 'createStoreWithComponent' function\");\n    globalStoreLifeCycle.onUnmounted.push(cb);\n    globalStoreLifeCycle.hasHookInstall = true;\n};\n/**\n * @public\n */\nconst onBeforeMount = (cb) => {\n    if (!globalStoreLifeCycle)\n        throw new Error(\"[reactivity-store] can not use 'onBeforeMount' outside of the 'createStoreWithComponent' function\");\n    globalStoreLifeCycle.onBeforeMount.push(cb);\n    globalStoreLifeCycle.hasHookInstall = true;\n};\n/**\n * @public\n */\nconst onBeforeUpdate = (cb) => {\n    if (!globalStoreLifeCycle)\n        throw new Error(\"[reactivity-store] can not use 'onBeforeUpdate' outside of the 'createStoreWithComponent' function\");\n    globalStoreLifeCycle.onBeforeUpdate.push(cb);\n    globalStoreLifeCycle.hasHookInstall = true;\n};\n/**\n * @public\n */\nconst onBeforeUnmount = (cb) => {\n    if (!globalStoreLifeCycle)\n        throw new Error(\"[reactivity-store] can not use 'onBeforeUnmount' outside of the 'createStoreWithComponent' function\");\n    globalStoreLifeCycle.onBeforeUnmount.push(cb);\n    globalStoreLifeCycle.hasHookInstall = true;\n};\n\n/* eslint-disable @typescript-eslint/no-unsafe-function-type */\n/**\n * @public\n */\nfunction withActions(setup, options) {\n    return createMiddleware(() => {\n        const _initialState = setup();\n        const initialState = getFinalState(_initialState);\n        const middleware = getFinalMiddleware(_initialState);\n        const actions = getFinalActions(_initialState);\n        const namespace = getFinalNamespace(_initialState);\n        const selectorOptions = getFinalSelectorOptions(_initialState);\n        const reactiveState = reactive(initialState);\n        const pendingGenerate = options.generateActions;\n        const allActions = pendingGenerate === null || pendingGenerate === void 0 ? void 0 : pendingGenerate(reactiveState);\n        const batchActions = allActions;\n        // check duplicate key\n        if (process.env.NODE_ENV === \"development\") {\n            Object.keys(initialState).forEach((key) => {\n                if (allActions[key]) {\n                    console.error(`[reactivity-store/actions] there are duplicate key: [${key}] in the 'setup' and 'generateAction' returned value, this is a unexpected behavior.`);\n                }\n            });\n            Object.keys(allActions).forEach((key) => {\n                if (typeof allActions[key] !== \"function\") {\n                    console.error(`[reactivity-store/actions] the value[${key}] return from 'generateActions' should be a function, but current is ${allActions[key]} in %o`, allActions);\n                }\n            });\n            Object.keys(actions).forEach((key) => {\n                if (allActions[key]) {\n                    console.error(`[reactivity-store/actions] there are duplicate key: [${key}] in the 'action' return from 'withActions', this is a unexpected behavior.`);\n                }\n            });\n        }\n        return {\n            [\"$$__state__$$\"]: toRaw(reactiveState),\n            [\"$$__actions__$$\"]: Object.assign(Object.assign({}, actions), batchActions),\n            [\"$$__middleware__$$\"]: middleware,\n            [\"$$__namespace__$$\"]: namespace,\n            [\"$$__selectorOptions__$$\"]: selectorOptions,\n        };\n    }, { name: \"withActions\" });\n}\n\n/* eslint-disable @typescript-eslint/no-unsafe-function-type */\nconst defaultCompare$1 = () => false;\n/**\n * @public\n */\nfunction withPersist(setup, options) {\n    return createMiddleware(() => {\n        var _a, _b, _c, _d, _e;\n        const _initialState = setup();\n        const initialState = getFinalState(_initialState);\n        const middleware = getFinalMiddleware(_initialState);\n        const auctions = getFinalActions(_initialState);\n        const namespace = getFinalNamespace(_initialState);\n        const selectorOptions = getFinalSelectorOptions(_initialState);\n        let hasSet = false;\n        if (middleware[\"withPersist\"])\n            hasSet = true;\n        if (process.env.NODE_ENV === \"development\" && checkHasReactive(initialState)) {\n            console.error(`[reactivity-store/persist] the 'setup' which from 'withPersist' should return a plain object, but current is a reactive object %o, you may use 'reactiveApi' in the 'setup' function`, initialState);\n        }\n        const getMigrateState = (storage) => {\n            try {\n                if (options.migrateVersion) {\n                    const migrateKey = persistKey + options.key + `_${options.migrateVersion}`;\n                    const migrateStateString = storage.getItem(migrateKey);\n                    if (migrateStateString) {\n                        const migrateState = JSON.parse(migrateStateString);\n                        if ((migrateState === null || migrateState === void 0 ? void 0 : migrateState.version) === options.migrateVersion && migrateState.data) {\n                            return options.migrateState(migrateState, () => { var _a; return (_a = storage.removeItem) === null || _a === void 0 ? void 0 : _a.call(storage, migrateKey); });\n                        }\n                    }\n                }\n                return null;\n            }\n            catch (_a) {\n            }\n        };\n        if (!isServer && !hasSet) {\n            let re = initialState;\n            const storageKey = persistKey + options.key + (options.version ? `_${options.version}` : \"\");\n            let storage = null;\n            try {\n                storage = ((_a = options === null || options === void 0 ? void 0 : options.getStorage) === null || _a === void 0 ? void 0 : _a.call(options)) || (window === null || window === void 0 ? void 0 : window.localStorage);\n                if (!storage) {\n                    if (process.env.NODE_ENV === \"development\") {\n                        console.error(`[reactivity-store/persist] can't find storage, please check your environment`);\n                    }\n                    return {\n                        [\"$$__state__$$\"]: toRaw(initialState),\n                        [\"$$__middleware__$$\"]: middleware,\n                        [\"$$__actions__$$\"]: auctions,\n                        [\"$$__namespace__$$\"]: namespace,\n                        [\"$$__selectorOptions__$$\"]: selectorOptions,\n                    };\n                }\n                const storageStateString = storage.getItem(storageKey);\n                const storageState = JSON.parse(storageStateString);\n                const migrateState = getMigrateState(storage);\n                if (process.env.NODE_ENV === \"development\" && migrateState && storageState) {\n                    console.warn(`[reactivity-store/persist] found both migrate state and current version state, you may forget to remove the old version state from storage, please check it, current version: ${options.version}, migrate version: ${options.migrateVersion}`);\n                }\n                if ((storageState === null || storageState === void 0 ? void 0 : storageState.version) === (options.version || options.key) && storageState.data) {\n                    const cachedState = ((_b = options === null || options === void 0 ? void 0 : options.parse) === null || _b === void 0 ? void 0 : _b.call(options, storageState.data)) || JSON.parse(storageState.data);\n                    re = ((_c = options === null || options === void 0 ? void 0 : options.merge) === null || _c === void 0 ? void 0 : _c.call(options, initialState, cachedState)) || Object.assign(initialState, cachedState);\n                }\n                else if (migrateState) {\n                    re = ((_d = options === null || options === void 0 ? void 0 : options.merge) === null || _d === void 0 ? void 0 : _d.call(options, initialState, migrateState)) || Object.assign(initialState, migrateState);\n                }\n            }\n            catch (e) {\n                if (process.env.NODE_ENV === \"development\") {\n                    console.error(`[reactivity-store/persist] middleware failed, error: ${e.message}`);\n                }\n                try {\n                    (_e = storage.removeItem) === null || _e === void 0 ? void 0 : _e.call(storage, storageKey);\n                }\n                catch (_f) {\n                }\n            }\n            re = reactive(re);\n            const onUpdate = debounce(() => {\n                var _a, _b, _c;\n                try {\n                    const stringifyState = ((_a = options === null || options === void 0 ? void 0 : options.stringify) === null || _a === void 0 ? void 0 : _a.call(options, re)) || JSON.stringify(re);\n                    const cache = { data: stringifyState, version: options.version || options.key };\n                    if (process.env.NODE_ENV === \"development\" && options.devLog) {\n                        console.log(`[reactivity-store/persist] state changed, try to cache newState: %o`, cache);\n                    }\n                    (_b = storage.setItem) === null || _b === void 0 ? void 0 : _b.call(storage, storageKey, JSON.stringify(cache));\n                }\n                catch (e) {\n                    if (process.env.NODE_ENV === \"development\") {\n                        console.error(`[reactivity-store/persist] cache newState error, error: %o`, e);\n                    }\n                    try {\n                        (_c = storage.removeItem) === null || _c === void 0 ? void 0 : _c.call(storage, storageKey);\n                    }\n                    catch (_d) {\n                    }\n                }\n            }, options.debounceTime || 40);\n            const subscribe = () => {\n                let _re = re;\n                if (typeof options.listener === \"function\") {\n                    _re = options.listener(re);\n                }\n                if (process.env.NODE_ENV === \"development\" && isPromise(_re)) {\n                    console.error(`[reactivity-store/persist] listener should return a plain object, but current is a promise`);\n                    return;\n                }\n                if (options.shallow) {\n                    traverseShallow(_re);\n                }\n                else {\n                    traverse(_re);\n                }\n            };\n            const ControllerInstance = new Controller(subscribe, defaultCompare$1, createLifeCycle(), InternalNameSpace.$$__persist__$$, onUpdate);\n            ControllerInstance.run();\n            if (process.env.NODE_ENV === \"development\") {\n                ControllerInstance._devPersistOptions = options;\n            }\n            return {\n                [\"$$__state__$$\"]: toRaw(re),\n                [\"$$__middleware__$$\"]: middleware,\n                [\"$$__actions__$$\"]: auctions,\n                [\"$$__namespace__$$\"]: namespace,\n                [\"$$__selectorOptions__$$\"]: selectorOptions,\n            };\n        }\n        else {\n            return {\n                [\"$$__state__$$\"]: toRaw(initialState),\n                [\"$$__middleware__$$\"]: middleware,\n                [\"$$__actions__$$\"]: auctions,\n                [\"$$__namespace__$$\"]: namespace,\n                [\"$$__selectorOptions__$$\"]: selectorOptions,\n            };\n        }\n    }, { name: \"withPersist\" });\n}\n\n/* eslint-disable @typescript-eslint/no-unsafe-function-type */\n/**\n * @public\n */\nfunction withNamespace(setup, options) {\n    return createMiddleware(() => {\n        const _initialState = setup();\n        const initialState = getFinalState(_initialState);\n        const middleware = getFinalMiddleware(_initialState);\n        const actions = getFinalActions(_initialState);\n        const namespace = getFinalNamespace(_initialState);\n        const selectorOptions = getFinalSelectorOptions(_initialState);\n        if (process.env.NODE_ENV === \"development\" &&\n            (options.namespace === InternalNameSpace.$$__ignore__$$ ||\n                options.namespace === InternalNameSpace.$$__persist__$$ ||\n                options.namespace === InternalNameSpace.$$__subscribe__$$ ||\n                options.namespace === InternalNameSpace.$$__redux_dev_tool__$$)) {\n            console.warn(`[reactivity-store/namespace] current namespace: '${options.namespace}' is a internal namespace, try to use another one`);\n        }\n        if (process.env.NODE_ENV === \"development\" &&\n            !isServer &&\n            options.namespace !== InternalNameSpace.$$__ignore__$$ &&\n            options.namespace !== InternalNameSpace.$$__persist__$$ &&\n            options.namespace !== InternalNameSpace.$$__subscribe__$$ &&\n            options.namespace !== InternalNameSpace.$$__redux_dev_tool__$$) {\n            const alreadyHasNameSpace = checkHasKey(options.namespace);\n            if (alreadyHasNameSpace) {\n                console.warn(`[reactivity-store/middleware] you have duplicate namespace '${options.namespace}' for current store, this is a unexpected usage`);\n            }\n            // setNamespaceMap(options.namespace, initialState);\n        }\n        return {\n            [\"$$__state__$$\"]: toRaw(initialState),\n            [\"$$__actions__$$\"]: actions,\n            [\"$$__middleware__$$\"]: middleware,\n            [\"$$__namespace__$$\"]: Object.assign(Object.assign({}, namespace), options),\n            [\"$$__selectorOptions__$$\"]: selectorOptions,\n        };\n    }, { name: \"withNamespace\" });\n}\n\n/* eslint-disable @typescript-eslint/no-unsafe-function-type */\n/**\n * @public\n */\nfunction withSelectorOptions(setup, options) {\n    return createMiddleware(() => {\n        const _initialState = setup();\n        const initialState = getFinalState(_initialState);\n        const middleware = getFinalMiddleware(_initialState);\n        const actions = getFinalActions(_initialState);\n        const namespace = getFinalNamespace(_initialState);\n        const selectorOptions = getFinalSelectorOptions(_initialState);\n        return {\n            [\"$$__state__$$\"]: toRaw(initialState),\n            [\"$$__actions__$$\"]: actions,\n            [\"$$__middleware__$$\"]: middleware,\n            [\"$$__namespace__$$\"]: namespace,\n            [\"$$__selectorOptions__$$\"]: Object.assign(Object.assign({}, selectorOptions), options),\n        };\n    }, { name: \"withSelectorOptions\" });\n}\n/**\n * @public\n * @deprecated\n * use `withSelectorOptions` instead\n */\nconst withDeepSelector = withSelectorOptions;\n\n/**\n * @public\n * @deprecated\n * not recommend to use this function, use `createStore` instead\n */\nfunction createStoreWithComponent(props) {\n    const { setup, render } = props;\n    const ComponentWithState = (props) => {\n        const useSelector = useMemo(() => {\n            const lifeCycleInstance = createLifeCycle();\n            setGlobalStoreLifeCycle(lifeCycleInstance);\n            const useSelector = internalCreateStore(setup, \"createStoreWithComponent\", lifeCycleInstance);\n            setGlobalStoreLifeCycle(null);\n            return useSelector;\n        }, []);\n        const [isMount, setIsMount] = useState(false);\n        const state = useSelector.getReadonlyState();\n        if (process.env.NODE_ENV === \"development\") {\n            const sameField = checkHasSameField(state, props);\n            sameField.forEach((key) => console.warn(`[reactivity-store] duplicate key: [${key}] in Component props and RStore state, this is a unexpected usage`));\n        }\n        const lifeCycleInstance = useSelector.getLifeCycle();\n        const { children } = props, last = __rest(props, [\"children\"]);\n        const _targetRender = render || props.children;\n        const targetRender = _targetRender !== null && _targetRender !== void 0 ? _targetRender : (() => {\n            lifeCycleInstance.canUpdateComponent = false;\n            if (process.env.NODE_ENV === \"development\") {\n                console.warn(`[reactivity-store] current reactive component not have a render function`);\n            }\n        });\n        // subscribe reactivity-store update\n        useSelector();\n        useEffect(() => {\n            if (lifeCycleInstance.hasHookInstall) {\n                if (!isMount) {\n                    lifeCycleInstance.onBeforeMount.forEach((f) => f());\n                    lifeCycleInstance.onMounted.forEach((f) => f());\n                    setIsMount(true);\n                }\n                else {\n                    const lastSync = lifeCycleInstance.syncUpdateComponent;\n                    lifeCycleInstance.syncUpdateComponent = true;\n                    lifeCycleInstance.canUpdateComponent = false;\n                    lifeCycleInstance.onBeforeUpdate.forEach((f) => f());\n                    lifeCycleInstance.canUpdateComponent = true;\n                    lifeCycleInstance.syncUpdateComponent = lastSync;\n                    lifeCycleInstance.onUpdated.forEach((f) => f());\n                }\n            }\n        });\n        useEffect(() => {\n            return () => {\n                if (lifeCycleInstance.hasHookInstall) {\n                    lifeCycleInstance.onBeforeUnmount.forEach((f) => f());\n                    lifeCycleInstance.onUnmounted.forEach((f) => f());\n                }\n            };\n        }, [lifeCycleInstance]);\n        useEffect(() => () => { var _a; return (_a = useSelector.scope) === null || _a === void 0 ? void 0 : _a.stop(); }, [useSelector]);\n        const renderedChildren = targetRender(Object.assign(Object.assign({}, last), state)) || null;\n        return renderedChildren;\n    };\n    return ComponentWithState;\n}\n\n/**\n * @public\n *\n * @example\n * ```typescript\n * import { createStore, ref } from \"r-store\";\n *\n * const count = createStore(() => {\n *  const state = ref(0);\n *\n *  const increment = () => {\n *    state.value++;\n *  };\n *\n *  return { state, increment };\n * });\n * ```\n */\nconst createStore = (creator) => {\n    return internalCreateStore(creator);\n};\n\n/**\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\nfunction internalCreateState(setup, name, option) {\n    var _a, _b, _c;\n    let creator = setup;\n    if (option === null || option === void 0 ? void 0 : option.withPersist) {\n        creator = withPersist(creator, typeof option.withPersist === \"string\" ? { key: option.withPersist } : option.withPersist);\n    }\n    if (option === null || option === void 0 ? void 0 : option.withActions) {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        creator = withActions(creator, { generateActions: option.withActions });\n    }\n    if (option === null || option === void 0 ? void 0 : option.withNamespace) {\n        creator = withNamespace(creator, typeof option.withNamespace === \"string\" ? { namespace: option.withNamespace, reduxDevTool: true } : option.withNamespace);\n    }\n    if (typeof (option === null || option === void 0 ? void 0 : option.withDeepSelector) !== \"undefined\" || typeof (option === null || option === void 0 ? void 0 : option.withStableSelector) !== \"undefined\") {\n        creator = withSelectorOptions(creator, { deepSelector: option.withDeepSelector, stableSelector: option.withStableSelector });\n    }\n    const lifeCycle = createLifeCycle();\n    const state = creator();\n    if (process.env.NODE_ENV === \"development\" && !isObject(state)) {\n        console.error(`[reactivity-store] '${name}' expect receive a plain object but got a ${state}, this is a unexpected usage. should return a plain object in this 'setup' function`);\n    }\n    // handle withActions middleware;\n    const initialState = getFinalState(state);\n    if (process.env.NODE_ENV === \"development\" && isPromise(initialState)) {\n        console.error(`[reactivity-store] '${name}' expect receive a plain object but got a promise %o, this is a unexpected usage. should not return a promise in this 'setup' function`, initialState);\n    }\n    let actions = getFinalActions(state);\n    const namespaceOptions = getFinalNamespace(state);\n    const selectorOptions = getFinalSelectorOptions(state);\n    const rawState = toRaw(initialState);\n    const reduxDevTool = namespaceOptions.reduxDevTool && !isServer;\n    if (process.env.NODE_ENV === \"development\" && checkHasReactive(rawState)) {\n        console.error(`[reactivity-store] '${name}' expect receive a plain object but got a reactive object/field %o, this is a unexpected usage. should not use 'reactiveApi' in this 'setup' function`, rawState);\n    }\n    if (process.env.NODE_ENV === \"development\" && checkHasFunction(rawState)) {\n        console.error(`[reactivity-store] '${name}' has a function field in state %o, this is a unexpected usage. state should be only a plain object with data field`, rawState);\n    }\n    if (process.env.NODE_ENV === \"development\") {\n        const sameField = checkHasSameField(rawState, actions);\n        sameField.forEach((key) => console.warn(`[reactivity-store] duplicate key: [${key}] in 'state' and 'actions' from createState, this is a unexpected usage`));\n    }\n    const reactiveState = reactive(initialState);\n    const readonlyState = readonly(initialState);\n    const deepSelector = (_a = selectorOptions === null || selectorOptions === void 0 ? void 0 : selectorOptions.deepSelector) !== null && _a !== void 0 ? _a : true;\n    const stableSelector = (_b = selectorOptions === null || selectorOptions === void 0 ? void 0 : selectorOptions.stableSelector) !== null && _b !== void 0 ? _b : false;\n    const stableCompare = (_c = selectorOptions.stableCompare) !== null && _c !== void 0 ? _c : true;\n    // TODO\n    if (process.env.NODE_ENV === \"development\" && reduxDevTool) {\n        actions = connectDevTool(namespaceOptions.namespace, actions, readonlyState, reactiveState, namespaceOptions);\n    }\n    const useSelector = createHook(reactiveState, readonlyState, rawState, lifeCycle, deepSelector, stableSelector, stableCompare, namespaceOptions.namespace, actions);\n    return useSelector;\n}\n\n/* eslint-disable @typescript-eslint/no-empty-object-type */\n/* eslint-disable @typescript-eslint/no-unsafe-function-type */\n// `createState` provider\n/**\n * @public\n *\n * @example\n * ```typescript\n * import { createState } from \"r-store\";\n *\n * const count = createState(() => ({state: 0}), {\n *  withPersist: \"count\",\n *  withActions: (state) => ({\n *   increment: () => {\n *    state.state++;\n *   },\n *  }),\n *  withNamespace: \"count\",\n *  withDeepSelector: true,\n *  withStableSelector: true,\n * });\n * ```\n */\nfunction createState(setup, options) {\n    return internalCreateState(setup, \"createState\", options);\n}\n\nconst defaultBatch = (cb) => cb();\n/**\n * @internal\n */\nconst batchObject = { current: defaultBatch };\n/**\n * @public\n * @deprecated\n * no need to use this function\n */\nconst setBatch = (batch) => {\n    batchObject.current = batch;\n};\n/**\n * @public\n * @deprecated\n * no need to use this function\n */\nconst getBatch = () => {\n    return batchObject.current;\n};\n/**\n * @public\n * @deprecated\n * no need to use this function\n */\nconst resetBatch = () => {\n    batchObject.current = defaultBatch;\n};\n/**\n * @public\n * @deprecated\n * no need to use this function\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\nconst wrapperBatchUpdate = (cb) => {\n    return ((...args) => batchObject.current(() => (args.length ? cb.call(null, ...args) : cb.call(null))));\n};\n\nconst defaultCompare = () => false;\n/**\n * @public\n */\nconst useReactiveEffect = (effectCallback) => {\n    const memoCallback = useCallbackRef(effectCallback);\n    useEffect(() => {\n        let cleanCb = () => void 0;\n        const subscribe = () => {\n            const clean = memoCallback();\n            if (typeof clean === \"function\") {\n                cleanCb = clean;\n            }\n            else {\n                cleanCb = () => void 0;\n            }\n        };\n        const controller = new Controller(subscribe, defaultCompare, createLifeCycle(), InternalNameSpace.$$__subscribe__$$, () => {\n            // run the effect when the subscribed state change\n            cleanCb();\n        });\n        // run the effect on the component mount\n        controller.run();\n        return () => {\n            cleanCb();\n            controller.stop();\n        };\n    }, []);\n};\n\n/**\n * @public\n */\nconst useReactiveState = (initialState) => {\n    const [useSelector] = useState(() => {\n        const setup = typeof initialState === \"function\" ? initialState : () => initialState;\n        return internalCreateState(setup, \"useReactiveState\");\n    });\n    // subscribe reactive store update\n    useSelector();\n    const setState = useMemo(() => (payload) => {\n        if (typeof payload === \"function\") {\n            payload(useSelector.getReactiveState());\n        }\n        else {\n            const reactiveObj = useSelector.getReactiveState();\n            Object.keys(payload).forEach((key) => {\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-expect-error\n                reactiveObj[key] = payload[key];\n            });\n        }\n    }, [useSelector]);\n    useEffect(() => () => !(process.env.NODE_ENV === \"development\") && useSelector.clear(), [useSelector]);\n    // make the state can be used in the `useReactiveEffect` hook\n    // use getReactiveState to make effect can track deps\n    return [useSelector.getReactiveState(), setState];\n};\n\n/**\n * @public\n */\nconst version = \"0.3.12\";\n\nexport { Controller, createState, createStore, createStoreWithComponent, getBatch, getCurrentController, onBeforeMount, onBeforeUnmount, onBeforeUpdate, onMounted, onUnmounted, onUpdated, resetBatch, setBatch, useReactiveEffect, useReactiveState, version, withActions, withDeepSelector, withNamespace, withPersist, withSelectorOptions, wrapperBatchUpdate };\n", "/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n", "/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\n\r\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nfunction __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nvar _TextMeasure_instances, _TextMeasure_key, _TextMeasure_map, _TextMeasure_getInstance;\nlet canvasCtx = null;\nconst getKey = (font, text) => {\n    return `${font.fontFamily}-${font.fontStyle}-${font.fontSize}-${text}`;\n};\nconst getStableKey = (font, text) => {\n    return getKey(font, \"0\".repeat(text.length));\n};\nclass TextMeasure {\n    constructor() {\n        _TextMeasure_instances.add(this);\n        _TextMeasure_key.set(this, \"\");\n        _TextMeasure_map.set(this, {});\n    }\n    measure(text, font) {\n        const currentKey = getStableKey(font, text);\n        if (__classPrivateFieldGet(this, _TextMeasure_map, \"f\")[currentKey]) {\n            return __classPrivateFieldGet(this, _TextMeasure_map, \"f\")[currentKey];\n        }\n        const instance = __classPrivateFieldGet(this, _TextMeasure_instances, \"m\", _TextMeasure_getInstance).call(this);\n        if (font) {\n            const currentFontKey = `${font.fontFamily}-${font.fontStyle}-${font.fontSize}`;\n            if (__classPrivateFieldGet(this, _TextMeasure_key, \"f\") !== currentFontKey) {\n                __classPrivateFieldSet(this, _TextMeasure_key, currentFontKey, \"f\");\n                instance.font = `${font.fontStyle || \"\"} ${font.fontSize || \"\"} ${font.fontFamily || \"\"}`;\n            }\n        }\n        else {\n            instance.font = \"\";\n        }\n        const textWidth = instance.measureText(text).width;\n        return textWidth;\n    }\n}\n_TextMeasure_key = new WeakMap(), _TextMeasure_map = new WeakMap(), _TextMeasure_instances = new WeakSet(), _TextMeasure_getInstance = function _TextMeasure_getInstance() {\n    canvasCtx = canvasCtx || document.createElement(\"canvas\").getContext(\"2d\");\n    return canvasCtx;\n};\nlet instance = null;\nconst getTextMeasureInstance = () => {\n    instance = instance || new TextMeasure();\n    return instance;\n};\n\nconst addContentBGName = \"--diff-add-content--\";\nconst delContentBGName = \"--diff-del-content--\";\nconst borderColorName = \"--diff-border--\";\nconst addLineNumberBGName = \"--diff-add-lineNumber--\";\nconst delLineNumberBGName = \"--diff-del-lineNumber--\";\nconst plainContentBGName = \"--diff-plain-content--\";\nconst expandContentBGName = \"--diff-expand-content--\";\nconst plainLineNumberColorName = \"--diff-plain-lineNumber-color--\";\nconst expandLineNumberColorName = \"--diff-expand-lineNumber-color--\";\nconst plainLineNumberBGName = \"--diff-plain-lineNumber--\";\nconst expandLineNumberBGName = \"--diff-expand-lineNumber--\";\nconst hunkContentBGName = \"--diff-hunk-content--\";\nconst hunkContentColorName = \"--diff-hunk-content-color--\";\nconst hunkLineNumberBGName = \"--diff-hunk-lineNumber--\";\nconst hunkLineNumberBGHoverName = \"--diff-hunk-lineNumber-hover--\";\nconst addContentHighlightBGName = \"--diff-add-content-highlight--\";\nconst delContentHighlightBGName = \"--diff-del-content-highlight--\";\nconst addWidgetBGName = \"--diff-add-widget--\";\nconst addWidgetColorName = \"--diff-add-widget-color--\";\nconst emptyBGName = \"--diff-empty-content--\";\nconst getContentBG = (isAdded, isDelete, hasDiff) => {\n    return isAdded\n        ? `var(${addContentBGName})`\n        : isDelete\n            ? `var(${delContentBGName})`\n            : hasDiff\n                ? `var(${plainContentBGName})`\n                : `var(${expandContentBGName})`;\n};\nconst getLineNumberBG = (isAdded, isDelete, hasDiff) => {\n    return isAdded\n        ? `var(${addLineNumberBGName})`\n        : isDelete\n            ? `var(${delLineNumberBGName})`\n            : hasDiff\n                ? `var(${plainLineNumberBGName})`\n                : `var(${expandLineNumberBGName})`;\n};\n\nconst removeAllSelection = () => {\n    const selection = window.getSelection();\n    for (let i = 0; i < selection.rangeCount; i++) {\n        selection.removeRange(selection.getRangeAt(i));\n    }\n};\nconst syncScroll = (left, right) => {\n    const onScroll = function (event) {\n        if (event === null || event.target === null)\n            return;\n        if (event.target === left) {\n            right.scrollTop = left.scrollTop;\n            right.scrollLeft = left.scrollLeft;\n        }\n        else {\n            left.scrollTop = right.scrollTop;\n            left.scrollLeft = right.scrollLeft;\n        }\n    };\n    if (!left.onscroll) {\n        left.onscroll = onScroll;\n    }\n    if (!right.onscroll) {\n        right.onscroll = onScroll;\n    }\n    return () => {\n        left.onscroll = null;\n        right.onscroll = null;\n    };\n};\n\nconst diffFontSizeName = \"--diff-font-size--\";\nconst diffAsideWidthName = \"--diff-aside-width--\";\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\nconst memoFunc = (func) => {\n    const cache = {};\n    return ((key) => {\n        if (cache[key]) {\n            return cache[key];\n        }\n        const result = func(key);\n        cache[key] = result;\n        return result;\n    });\n};\n\nvar NewLineSymbol;\n(function (NewLineSymbol) {\n    NewLineSymbol[NewLineSymbol[\"CRLF\"] = 1] = \"CRLF\";\n    NewLineSymbol[NewLineSymbol[\"CR\"] = 2] = \"CR\";\n    NewLineSymbol[NewLineSymbol[\"LF\"] = 3] = \"LF\";\n    NewLineSymbol[NewLineSymbol[\"NEWLINE\"] = 4] = \"NEWLINE\";\n    NewLineSymbol[NewLineSymbol[\"NORMAL\"] = 5] = \"NORMAL\";\n    NewLineSymbol[NewLineSymbol[\"NULL\"] = 6] = \"NULL\";\n})(NewLineSymbol || (NewLineSymbol = {}));\nconst getSymbol = (symbol) => {\n    switch (symbol) {\n        case NewLineSymbol.LF:\n            return \"\";\n        case NewLineSymbol.CR:\n            return \"\";\n        case NewLineSymbol.CRLF:\n            return \"\";\n        default:\n            return \"\";\n    }\n};\nvar DiffModeEnum;\n(function (DiffModeEnum) {\n    // github like\n    DiffModeEnum[DiffModeEnum[\"SplitGitHub\"] = 1] = \"SplitGitHub\";\n    // gitlab like\n    DiffModeEnum[DiffModeEnum[\"SplitGitLab\"] = 2] = \"SplitGitLab\";\n    DiffModeEnum[DiffModeEnum[\"Split\"] = 3] = \"Split\";\n    DiffModeEnum[DiffModeEnum[\"Unified\"] = 4] = \"Unified\";\n})(DiffModeEnum || (DiffModeEnum = {}));\n\nexport { DiffModeEnum, NewLineSymbol, addContentBGName, addContentHighlightBGName, addLineNumberBGName, addWidgetBGName, addWidgetColorName, borderColorName, delContentBGName, delContentHighlightBGName, delLineNumberBGName, diffAsideWidthName, diffFontSizeName, emptyBGName, expandContentBGName, expandLineNumberBGName, expandLineNumberColorName, getContentBG, getLineNumberBG, getSymbol, getTextMeasureInstance, hunkContentBGName, hunkContentColorName, hunkLineNumberBGHoverName, hunkLineNumberBGName, memoFunc, plainContentBGName, plainLineNumberBGName, plainLineNumberColorName, removeAllSelection, syncScroll };\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgubWpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJvbGx1cCtwbHVnaW4tdHlwZXNjcmlwdEAxMi4xLjRfcm9sbHVwQDQuNDQuMF90c2xpYkAyLjguMV90eXBlc2NyaXB0QDUuMy4zL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCIuLi8uLi9zcmMvdGV4dE1lYXN1cmUudHMiLCIuLi8uLi9zcmMvY29sb3IudHMiLCIuLi8uLi9zcmMvZG9tLnRzIiwiLi4vLi4vc3JjL3NpemUudHMiLCIuLi8uLi9zcmMvdXRpbHMudHMiLCIuLi8uLi9zcmMvc3ltYm9sLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSwgU3VwcHJlc3NlZEVycm9yLCBTeW1ib2wsIEl0ZXJhdG9yICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2VzRGVjb3JhdGUoY3RvciwgZGVzY3JpcHRvckluLCBkZWNvcmF0b3JzLCBjb250ZXh0SW4sIGluaXRpYWxpemVycywgZXh0cmFJbml0aWFsaXplcnMpIHtcclxuICAgIGZ1bmN0aW9uIGFjY2VwdChmKSB7IGlmIChmICE9PSB2b2lkIDAgJiYgdHlwZW9mIGYgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZ1bmN0aW9uIGV4cGVjdGVkXCIpOyByZXR1cm4gZjsgfVxyXG4gICAgdmFyIGtpbmQgPSBjb250ZXh0SW4ua2luZCwga2V5ID0ga2luZCA9PT0gXCJnZXR0ZXJcIiA/IFwiZ2V0XCIgOiBraW5kID09PSBcInNldHRlclwiID8gXCJzZXRcIiA6IFwidmFsdWVcIjtcclxuICAgIHZhciB0YXJnZXQgPSAhZGVzY3JpcHRvckluICYmIGN0b3IgPyBjb250ZXh0SW5bXCJzdGF0aWNcIl0gPyBjdG9yIDogY3Rvci5wcm90b3R5cGUgOiBudWxsO1xyXG4gICAgdmFyIGRlc2NyaXB0b3IgPSBkZXNjcmlwdG9ySW4gfHwgKHRhcmdldCA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBjb250ZXh0SW4ubmFtZSkgOiB7fSk7XHJcbiAgICB2YXIgXywgZG9uZSA9IGZhbHNlO1xyXG4gICAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICB2YXIgY29udGV4dCA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluKSBjb250ZXh0W3BdID0gcCA9PT0gXCJhY2Nlc3NcIiA/IHt9IDogY29udGV4dEluW3BdO1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluLmFjY2VzcykgY29udGV4dC5hY2Nlc3NbcF0gPSBjb250ZXh0SW4uYWNjZXNzW3BdO1xyXG4gICAgICAgIGNvbnRleHQuYWRkSW5pdGlhbGl6ZXIgPSBmdW5jdGlvbiAoZikgeyBpZiAoZG9uZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgaW5pdGlhbGl6ZXJzIGFmdGVyIGRlY29yYXRpb24gaGFzIGNvbXBsZXRlZFwiKTsgZXh0cmFJbml0aWFsaXplcnMucHVzaChhY2NlcHQoZiB8fCBudWxsKSk7IH07XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9ICgwLCBkZWNvcmF0b3JzW2ldKShraW5kID09PSBcImFjY2Vzc29yXCIgPyB7IGdldDogZGVzY3JpcHRvci5nZXQsIHNldDogZGVzY3JpcHRvci5zZXQgfSA6IGRlc2NyaXB0b3Jba2V5XSwgY29udGV4dCk7XHJcbiAgICAgICAgaWYgKGtpbmQgPT09IFwiYWNjZXNzb3JcIikge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHR5cGVvZiByZXN1bHQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5nZXQpKSBkZXNjcmlwdG9yLmdldCA9IF87XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5zZXQpKSBkZXNjcmlwdG9yLnNldCA9IF87XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5pbml0KSkgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKF8gPSBhY2NlcHQocmVzdWx0KSkge1xyXG4gICAgICAgICAgICBpZiAoa2luZCA9PT0gXCJmaWVsZFwiKSBpbml0aWFsaXplcnMudW5zaGlmdChfKTtcclxuICAgICAgICAgICAgZWxzZSBkZXNjcmlwdG9yW2tleV0gPSBfO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0YXJnZXQpIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGNvbnRleHRJbi5uYW1lLCBkZXNjcmlwdG9yKTtcclxuICAgIGRvbmUgPSB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcnVuSW5pdGlhbGl6ZXJzKHRoaXNBcmcsIGluaXRpYWxpemVycywgdmFsdWUpIHtcclxuICAgIHZhciB1c2VWYWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0aWFsaXplcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YWx1ZSA9IHVzZVZhbHVlID8gaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZywgdmFsdWUpIDogaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXNlVmFsdWUgPyB2YWx1ZSA6IHZvaWQgMDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Byb3BLZXkoeCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB4ID09PSBcInN5bWJvbFwiID8geCA6IFwiXCIuY29uY2F0KHgpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc2V0RnVuY3Rpb25OYW1lKGYsIG5hbWUsIHByZWZpeCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN5bWJvbFwiKSBuYW1lID0gbmFtZS5kZXNjcmlwdGlvbiA/IFwiW1wiLmNvbmNhdChuYW1lLmRlc2NyaXB0aW9uLCBcIl1cIikgOiBcIlwiO1xyXG4gICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCBcIm5hbWVcIiwgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiBwcmVmaXggPyBcIlwiLmNvbmNhdChwcmVmaXgsIFwiIFwiLCBuYW1lKSA6IG5hbWUgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnID0gT2JqZWN0LmNyZWF0ZSgodHlwZW9mIEl0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKTtcclxuICAgIHJldHVybiBnLm5leHQgPSB2ZXJiKDApLCBnW1widGhyb3dcIl0gPSB2ZXJiKDEpLCBnW1wicmV0dXJuXCJdID0gdmVyYigyKSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xyXG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcclxuICAgICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgQXN5bmNJdGVyYXRvciA9PT0gXCJmdW5jdGlvblwiID8gQXN5bmNJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiLCBhd2FpdFJldHVybiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIGF3YWl0UmV0dXJuKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUodikudGhlbihmLCByZWplY3QpOyB9OyB9XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaWYgKGdbbl0pIHsgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgaWYgKGYpIGlbbl0gPSBmKGlbbl0pOyB9IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBmYWxzZSB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG52YXIgb3duS2V5cyA9IGZ1bmN0aW9uKG8pIHtcclxuICAgIG93bktleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiAobykge1xyXG4gICAgICAgIHZhciBhciA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGsgaW4gbykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBrKSkgYXJbYXIubGVuZ3RoXSA9IGs7XHJcbiAgICAgICAgcmV0dXJuIGFyO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBvd25LZXlzKG8pO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgPSBvd25LZXlzKG1vZCksIGkgPSAwOyBpIDwgay5sZW5ndGg7IGkrKykgaWYgKGtbaV0gIT09IFwiZGVmYXVsdFwiKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGtbaV0pO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEluKHN0YXRlLCByZWNlaXZlcikge1xyXG4gICAgaWYgKHJlY2VpdmVyID09PSBudWxsIHx8ICh0eXBlb2YgcmVjZWl2ZXIgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHJlY2VpdmVyICE9PSBcImZ1bmN0aW9uXCIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHVzZSAnaW4nIG9wZXJhdG9yIG9uIG5vbi1vYmplY3RcIik7XHJcbiAgICByZXR1cm4gdHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciA9PT0gc3RhdGUgOiBzdGF0ZS5oYXMocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52LCB2YWx1ZSwgYXN5bmMpIHtcclxuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdm9pZCAwKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBleHBlY3RlZC5cIik7XHJcbiAgICAgICAgdmFyIGRpc3Bvc2UsIGlubmVyO1xyXG4gICAgICAgIGlmIChhc3luYykge1xyXG4gICAgICAgICAgICBpZiAoIVN5bWJvbC5hc3luY0Rpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNEaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgICAgICAgICAgZGlzcG9zZSA9IHZhbHVlW1N5bWJvbC5hc3luY0Rpc3Bvc2VdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGlzcG9zZSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIGlmICghU3ltYm9sLmRpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuZGlzcG9zZSBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICAgICAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuZGlzcG9zZV07XHJcbiAgICAgICAgICAgIGlmIChhc3luYykgaW5uZXIgPSBkaXNwb3NlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIGRpc3Bvc2UgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBub3QgZGlzcG9zYWJsZS5cIik7XHJcbiAgICAgICAgaWYgKGlubmVyKSBkaXNwb3NlID0gZnVuY3Rpb24oKSB7IHRyeSB7IGlubmVyLmNhbGwodGhpcyk7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpOyB9IH07XHJcbiAgICAgICAgZW52LnN0YWNrLnB1c2goeyB2YWx1ZTogdmFsdWUsIGRpc3Bvc2U6IGRpc3Bvc2UsIGFzeW5jOiBhc3luYyB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFzeW5jKSB7XHJcbiAgICAgICAgZW52LnN0YWNrLnB1c2goeyBhc3luYzogdHJ1ZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZTtcclxuXHJcbn1cclxuXHJcbnZhciBfU3VwcHJlc3NlZEVycm9yID0gdHlwZW9mIFN1cHByZXNzZWRFcnJvciA9PT0gXCJmdW5jdGlvblwiID8gU3VwcHJlc3NlZEVycm9yIDogZnVuY3Rpb24gKGVycm9yLCBzdXBwcmVzc2VkLCBtZXNzYWdlKSB7XHJcbiAgICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kaXNwb3NlUmVzb3VyY2VzKGVudikge1xyXG4gICAgZnVuY3Rpb24gZmFpbChlKSB7XHJcbiAgICAgICAgZW52LmVycm9yID0gZW52Lmhhc0Vycm9yID8gbmV3IF9TdXBwcmVzc2VkRXJyb3IoZSwgZW52LmVycm9yLCBcIkFuIGVycm9yIHdhcyBzdXBwcmVzc2VkIGR1cmluZyBkaXNwb3NhbC5cIikgOiBlO1xyXG4gICAgICAgIGVudi5oYXNFcnJvciA9IHRydWU7XHJcbiAgICB9XHJcbiAgICB2YXIgciwgcyA9IDA7XHJcbiAgICBmdW5jdGlvbiBuZXh0KCkge1xyXG4gICAgICAgIHdoaWxlIChyID0gZW52LnN0YWNrLnBvcCgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXIuYXN5bmMgJiYgcyA9PT0gMSkgcmV0dXJuIHMgPSAwLCBlbnYuc3RhY2sucHVzaChyKSwgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihuZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmIChyLmRpc3Bvc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gci5kaXNwb3NlLmNhbGwoci52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIuYXN5bmMpIHJldHVybiBzIHw9IDIsIFByb21pc2UucmVzb2x2ZShyZXN1bHQpLnRoZW4obmV4dCwgZnVuY3Rpb24oZSkgeyBmYWlsKGUpOyByZXR1cm4gbmV4dCgpOyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgcyB8PSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBmYWlsKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzID09PSAxKSByZXR1cm4gZW52Lmhhc0Vycm9yID8gUHJvbWlzZS5yZWplY3QoZW52LmVycm9yKSA6IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIGlmIChlbnYuaGFzRXJyb3IpIHRocm93IGVudi5lcnJvcjtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXh0KCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jld3JpdGVSZWxhdGl2ZUltcG9ydEV4dGVuc2lvbihwYXRoLCBwcmVzZXJ2ZUpzeCkge1xyXG4gICAgaWYgKHR5cGVvZiBwYXRoID09PSBcInN0cmluZ1wiICYmIC9eXFwuXFwuP1xcLy8udGVzdChwYXRoKSkge1xyXG4gICAgICAgIHJldHVybiBwYXRoLnJlcGxhY2UoL1xcLih0c3gpJHwoKD86XFwuZCk/KSgoPzpcXC5bXi4vXSs/KT8pXFwuKFtjbV0/KXRzJC9pLCBmdW5jdGlvbiAobSwgdHN4LCBkLCBleHQsIGNtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c3ggPyBwcmVzZXJ2ZUpzeCA/IFwiLmpzeFwiIDogXCIuanNcIiA6IGQgJiYgKCFleHQgfHwgIWNtKSA/IG0gOiAoZCArIGV4dCArIFwiLlwiICsgY20udG9Mb3dlckNhc2UoKSArIFwianNcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGF0aDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgX19leHRlbmRzOiBfX2V4dGVuZHMsXHJcbiAgICBfX2Fzc2lnbjogX19hc3NpZ24sXHJcbiAgICBfX3Jlc3Q6IF9fcmVzdCxcclxuICAgIF9fZGVjb3JhdGU6IF9fZGVjb3JhdGUsXHJcbiAgICBfX3BhcmFtOiBfX3BhcmFtLFxyXG4gICAgX19lc0RlY29yYXRlOiBfX2VzRGVjb3JhdGUsXHJcbiAgICBfX3J1bkluaXRpYWxpemVyczogX19ydW5Jbml0aWFsaXplcnMsXHJcbiAgICBfX3Byb3BLZXk6IF9fcHJvcEtleSxcclxuICAgIF9fc2V0RnVuY3Rpb25OYW1lOiBfX3NldEZ1bmN0aW9uTmFtZSxcclxuICAgIF9fbWV0YWRhdGE6IF9fbWV0YWRhdGEsXHJcbiAgICBfX2F3YWl0ZXI6IF9fYXdhaXRlcixcclxuICAgIF9fZ2VuZXJhdG9yOiBfX2dlbmVyYXRvcixcclxuICAgIF9fY3JlYXRlQmluZGluZzogX19jcmVhdGVCaW5kaW5nLFxyXG4gICAgX19leHBvcnRTdGFyOiBfX2V4cG9ydFN0YXIsXHJcbiAgICBfX3ZhbHVlczogX192YWx1ZXMsXHJcbiAgICBfX3JlYWQ6IF9fcmVhZCxcclxuICAgIF9fc3ByZWFkOiBfX3NwcmVhZCxcclxuICAgIF9fc3ByZWFkQXJyYXlzOiBfX3NwcmVhZEFycmF5cyxcclxuICAgIF9fc3ByZWFkQXJyYXk6IF9fc3ByZWFkQXJyYXksXHJcbiAgICBfX2F3YWl0OiBfX2F3YWl0LFxyXG4gICAgX19hc3luY0dlbmVyYXRvcjogX19hc3luY0dlbmVyYXRvcixcclxuICAgIF9fYXN5bmNEZWxlZ2F0b3I6IF9fYXN5bmNEZWxlZ2F0b3IsXHJcbiAgICBfX2FzeW5jVmFsdWVzOiBfX2FzeW5jVmFsdWVzLFxyXG4gICAgX19tYWtlVGVtcGxhdGVPYmplY3Q6IF9fbWFrZVRlbXBsYXRlT2JqZWN0LFxyXG4gICAgX19pbXBvcnRTdGFyOiBfX2ltcG9ydFN0YXIsXHJcbiAgICBfX2ltcG9ydERlZmF1bHQ6IF9faW1wb3J0RGVmYXVsdCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQ6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0OiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEluOiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4sXHJcbiAgICBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZTogX19hZGREaXNwb3NhYmxlUmVzb3VyY2UsXHJcbiAgICBfX2Rpc3Bvc2VSZXNvdXJjZXM6IF9fZGlzcG9zZVJlc291cmNlcyxcclxuICAgIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uOiBfX3Jld3JpdGVSZWxhdGl2ZUltcG9ydEV4dGVuc2lvbixcclxufTtcclxuIixudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbF0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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\n", "import { useEffect, useState } from \"react\";\n\nexport const useIsMounted = () => {\n  const [isMounted, setIsMounted] = useState(false);\n\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  return isMounted;\n};\n", "import { useEffect, useRef } from \"react\";\n\nexport const useUnmount = (cb: () => void, deps: any[]) => {\n  const ref = useRef(cb);\n\n  ref.current = cb;\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => ref.current, deps);\n};\n", "import { useEffect, useLayoutEffect } from \"react\";\n\nconst isClient = typeof window !== \"undefined\";\n\nexport const useSafeLayout = isClient ? useLayoutEffect : useEffect;\n", "import { getTextMeasureInstance } from \"@git-diff-view/utils\";\nimport { useState } from \"react\";\n\nimport { useSafeLayout } from \"./useSafeLayout\";\n\nexport const useTextWidth = ({\n  text,\n  font,\n}: {\n  text: string;\n  font: { fontFamily?: string; fontStyle?: string; fontSize?: string };\n}) => {\n  const [width, setWidth] = useState(() => {\n    const fontSize = parseInt(font.fontSize);\n    let baseSize = 6;\n    baseSize += fontSize > 10 ? (fontSize - 10) * 0.6 : 0;\n    return baseSize * text.length;\n  });\n\n  useSafeLayout(() => {\n    const width = getTextMeasureInstance().measure(text, font);\n\n    setWidth(width);\n  }, [text, font]);\n\n  return width;\n};\n", "import { addWidgetBGName, addWidgetColorName, diffFontSizeName } from \"@git-diff-view/utils\";\nimport * as React from \"react\";\n\nimport type { SplitSide } from \"./DiffView\";\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nexport const DiffSplitAddWidget = ({\n  side,\n  className,\n  lineNumber,\n  onWidgetClick,\n  onOpenAddWidget,\n}: {\n  index: number;\n  lineNumber: number;\n  diffFile: DiffFile;\n  side: SplitSide;\n  className?: string;\n  onWidgetClick?: (lineNumber: number, side: SplitSide) => void;\n  onOpenAddWidget: (lineNumber: number, side: SplitSide) => void;\n}) => {\n  return (\n    <div\n      className={\n        \"diff-add-widget-wrapper invisible select-none transition-transform hover:scale-110 group-hover:visible\" +\n        (className ? \" \" + className : \"\")\n      }\n      style={{\n        width: `calc(var(${diffFontSizeName}) * 1.4)`,\n        height: `calc(var(${diffFontSizeName}) * 1.4)`,\n      }}\n    >\n      <button\n        className=\"diff-add-widget z-[1] flex h-full w-full origin-center cursor-pointer items-center justify-center rounded-md text-[1.2em]\"\n        style={{\n          color: `var(${addWidgetColorName})`,\n          backgroundColor: `var(${addWidgetBGName})`,\n        }}\n        onClick={() => {\n          onOpenAddWidget(lineNumber, side);\n          onWidgetClick?.(lineNumber, side);\n        }}\n      >\n        +\n      </button>\n    </div>\n  );\n};\n\nexport const DiffUnifiedAddWidget = ({\n  lineNumber,\n  side,\n  onWidgetClick,\n  onOpenAddWidget,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n  side: SplitSide;\n  onWidgetClick?: (lineNumber: number, side: SplitSide) => void;\n  onOpenAddWidget: (lineNumber: number, side: SplitSide) => void;\n}) => {\n  return (\n    <div\n      className=\"diff-add-widget-wrapper invisible absolute left-[100%] top-[1px] translate-x-[-50%] select-none transition-transform hover:scale-110 group-hover:visible\"\n      style={{\n        width: `calc(var(${diffFontSizeName}) * 1.4)`,\n        height: `calc(var(${diffFontSizeName}) * 1.4)`,\n      }}\n    >\n      <button\n        className=\"diff-add-widget z-[1] flex h-full w-full origin-center cursor-pointer items-center justify-center rounded-md text-[1.2em]\"\n        style={{\n          color: `var(${addWidgetColorName})`,\n          backgroundColor: `var(${addWidgetBGName})`,\n        }}\n        onClick={() => {\n          onOpenAddWidget(lineNumber, side);\n          onWidgetClick?.(lineNumber, side);\n        }}\n      >\n        +\n      </button>\n    </div>\n  );\n};\n", "import * as React from \"react\";\n\nexport const DiffNoNewLine = () => {\n  return (\n    <svg aria-label=\"No newline at end of file\" role=\"img\" viewBox=\"0 0 16 16\" version=\"1.1\" fill=\"currentColor\">\n      <path d=\"M4.25 7.25a.75.75 0 0 0 0 1.5h7.5a.75.75 0 0 0 0-1.5h-7.5Z\"></path>\n      <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z\"></path>\n    </svg>\n  );\n};\n", "/* eslint-disable max-lines */\nimport {\n  DiffLineType,\n  getSyntaxDiffTemplate,\n  getSyntaxLineTemplate,\n  getPlainDiffTemplate,\n  getPlainLineTemplate,\n} from \"@git-diff-view/core\";\nimport {\n  memoFunc,\n  addContentHighlightBGName,\n  delContentHighlightBGName,\n  diffFontSizeName,\n  getSymbol,\n  NewLineSymbol,\n} from \"@git-diff-view/utils\";\nimport * as React from \"react\";\n\nimport { DiffNoNewLine } from \"./DiffNoNewLine\";\n\nimport type { DiffFile, DiffLine, File } from \"@git-diff-view/core\";\n\nconst temp = {};\n\nconst formatStringToCamelCase = (str: string) => {\n  if (str.startsWith(\"--\")) return str;\n  const splitted = str.split(\"-\");\n  if (splitted.length === 1) return splitted[0];\n  return (\n    splitted[0] +\n    splitted\n      .slice(1)\n      .map((word) => word[0].toUpperCase() + word.slice(1))\n      .join(\"\")\n  );\n};\n\nexport const getStyleObjectFromString = memoFunc((str: string) => {\n  if (!str) return temp;\n  const style = {};\n  str.split(\";\").forEach((el) => {\n    const [property, value] = el.split(\":\");\n    if (!property) return;\n\n    const formattedProperty = formatStringToCamelCase(property.trim());\n    style[formattedProperty] = value.trim();\n  });\n  return style;\n});\n\nconst DiffString = ({\n  rawLine,\n  diffLine,\n  operator,\n  plainLine,\n  enableWrap,\n  enableTemplate,\n}: {\n  rawLine: string;\n  diffLine?: DiffLine;\n  operator?: \"add\" | \"del\";\n  plainLine?: File[\"plainFile\"][number];\n  enableWrap?: boolean;\n  enableTemplate?: boolean;\n}) => {\n  const changes = diffLine?.changes;\n\n  if (changes?.hasLineChange) {\n    const isNewLineSymbolChanged = changes.newLineSymbol;\n\n    if (enableTemplate && !diffLine?.plainTemplate && typeof getPlainDiffTemplate === \"function\") {\n      getPlainDiffTemplate({ diffLine, rawLine, operator });\n    }\n\n    if (enableTemplate && diffLine?.plainTemplate) {\n      return (\n        <span className=\"diff-line-content-raw\">\n          <span data-template dangerouslySetInnerHTML={{ __html: diffLine.plainTemplate }} />\n          {isNewLineSymbolChanged === NewLineSymbol.NEWLINE && (\n            <span\n              data-no-newline-at-end-of-file-symbol\n              className={enableWrap ? \"block !text-red-500\" : \"inline-block align-middle !text-red-500\"}\n              style={{\n                width: `var(${diffFontSizeName})`,\n                height: `var(${diffFontSizeName})`,\n              }}\n            >\n              <DiffNoNewLine />\n            </span>\n          )}\n        </span>\n      );\n    } else {\n      // TODO remove\n      const range = changes.range;\n      const str1 = rawLine.slice(0, range.location);\n      const str2 = rawLine.slice(range.location, range.location + range.length);\n      const str3 = rawLine.slice(range.location + range.length);\n      const isLast = str2.includes(\"\\n\");\n      const _str2 = isLast ? str2.replace(\"\\n\", \"\").replace(\"\\r\", \"\") : str2;\n      return (\n        <span className=\"diff-line-content-raw\">\n          <span data-range-start={range.location} data-range-end={range.location + range.length}>\n            {str1}\n            <span\n              data-diff-highlight\n              className=\"rounded-[0.2em]\"\n              style={{\n                backgroundColor:\n                  operator === \"add\" ? `var(${addContentHighlightBGName})` : `var(${delContentHighlightBGName})`,\n              }}\n            >\n              {isLast ? (\n                <>\n                  {_str2}\n                  <span data-newline-symbol>{getSymbol(isNewLineSymbolChanged)}</span>\n                </>\n              ) : (\n                str2\n              )}\n            </span>\n            {str3}\n          </span>\n          {isNewLineSymbolChanged === NewLineSymbol.NEWLINE && (\n            <span\n              data-no-newline-at-end-of-file-symbol\n              className={enableWrap ? \"block !text-red-500\" : \"inline-block align-middle !text-red-500\"}\n              style={{\n                width: `var(${diffFontSizeName})`,\n                height: `var(${diffFontSizeName})`,\n              }}\n            >\n              <DiffNoNewLine />\n            </span>\n          )}\n        </span>\n      );\n    }\n  }\n\n  if (enableTemplate && plainLine && !plainLine?.template) {\n    plainLine.template = getPlainLineTemplate(plainLine.value);\n  }\n\n  if (enableTemplate && plainLine?.template) {\n    return (\n      <span className=\"diff-line-content-raw\">\n        <span data-template dangerouslySetInnerHTML={{ __html: plainLine.template }} />\n      </span>\n    );\n  }\n\n  return <span className=\"diff-line-content-raw\">{rawLine}</span>;\n};\n\nconst DiffSyntax = ({\n  rawLine,\n  diffLine,\n  operator,\n  syntaxLine,\n  enableWrap,\n  enableTemplate,\n}: {\n  rawLine: string;\n  diffLine?: DiffLine;\n  syntaxLine?: File[\"syntaxFile\"][number];\n  operator?: \"add\" | \"del\";\n  enableWrap?: boolean;\n  enableTemplate?: boolean;\n}) => {\n  if (!syntaxLine) {\n    return (\n      <DiffString\n        rawLine={rawLine}\n        diffLine={diffLine}\n        operator={operator}\n        enableWrap={enableWrap}\n        enableTemplate={enableTemplate}\n      />\n    );\n  }\n\n  const changes = diffLine?.changes;\n\n  if (changes?.hasLineChange) {\n    const isNewLineSymbolChanged = changes.newLineSymbol;\n\n    if (enableTemplate && !diffLine?.syntaxTemplate && typeof getSyntaxDiffTemplate === \"function\") {\n      getSyntaxDiffTemplate({ diffLine, syntaxLine, operator });\n    }\n\n    if (enableTemplate && diffLine?.syntaxTemplate) {\n      return (\n        <span className=\"diff-line-syntax-raw\">\n          <span data-template dangerouslySetInnerHTML={{ __html: diffLine.syntaxTemplate }} />\n          {isNewLineSymbolChanged === NewLineSymbol.NEWLINE && (\n            <span\n              data-no-newline-at-end-of-file-symbol\n              className={enableWrap ? \"block !text-red-500\" : \"inline-block align-middle !text-red-500\"}\n              style={{\n                width: `var(${diffFontSizeName})`,\n                height: `var(${diffFontSizeName})`,\n              }}\n            >\n              <DiffNoNewLine />\n            </span>\n          )}\n        </span>\n      );\n    } else {\n      // TODO remove\n      const range = changes.range;\n\n      return (\n        <span className=\"diff-line-syntax-raw\">\n          <span data-range-start={range.location} data-range-end={range.location + range.length}>\n            {syntaxLine.nodeList?.map(({ node, wrapper }, index) => {\n              if (node.endIndex < range.location || range.location + range.length < node.startIndex) {\n                return (\n                  <span\n                    key={index}\n                    data-start={node.startIndex}\n                    data-end={node.endIndex}\n                    className={wrapper?.properties?.className?.join(\" \")}\n                    style={getStyleObjectFromString(wrapper?.properties?.style || \"\")}\n                  >\n                    {node.value}\n                  </span>\n                );\n              } else {\n                const index1 = range.location - node.startIndex;\n                const index2 = index1 < 0 ? 0 : index1;\n                const str1 = node.value.slice(0, index2);\n                const str2 = node.value.slice(index2, index1 + range.length);\n                const str3 = node.value.slice(index1 + range.length);\n                const isStart = str1.length || range.location === node.startIndex;\n                const isEnd = str3.length || node.endIndex === range.location + range.length - 1;\n                const isLast = str2.includes(\"\\n\");\n                const _str2 = isLast ? str2.replace(\"\\n\", \"\").replace(\"\\r\", \"\") : str2;\n                return (\n                  <span\n                    key={index}\n                    data-start={node.startIndex}\n                    data-end={node.endIndex}\n                    className={wrapper?.properties?.className?.join(\" \")}\n                    style={getStyleObjectFromString(wrapper?.properties?.style || \"\")}\n                  >\n                    {str1}\n                    <span\n                      data-diff-highlight\n                      style={{\n                        backgroundColor:\n                          operator === \"add\"\n                            ? `var(${addContentHighlightBGName})`\n                            : `var(${delContentHighlightBGName})`,\n                        borderTopLeftRadius: isStart ? \"0.2em\" : undefined,\n                        borderBottomLeftRadius: isStart ? \"0.2em\" : undefined,\n                        borderTopRightRadius: isEnd || isLast ? \"0.2em\" : undefined,\n                        borderBottomRightRadius: isEnd || isLast ? \"0.2em\" : undefined,\n                      }}\n                    >\n                      {isLast ? (\n                        <>\n                          {_str2}\n                          <span data-newline-symbol>{getSymbol(isNewLineSymbolChanged)}</span>\n                        </>\n                      ) : (\n                        str2\n                      )}\n                    </span>\n                    {str3}\n                  </span>\n                );\n              }\n            })}\n          </span>\n          {isNewLineSymbolChanged === NewLineSymbol.NEWLINE && (\n            <span\n              data-no-newline-at-end-of-file-symbol\n              className={enableWrap ? \"block !text-red-500\" : \"inline-block align-middle !text-red-500\"}\n              style={{\n                width: `var(${diffFontSizeName})`,\n                height: `var(${diffFontSizeName})`,\n              }}\n            >\n              <DiffNoNewLine />\n            </span>\n          )}\n        </span>\n      );\n    }\n  }\n\n  if (enableTemplate && !syntaxLine.template) {\n    syntaxLine.template = getSyntaxLineTemplate(syntaxLine);\n  }\n\n  if (enableTemplate && syntaxLine?.template) {\n    return (\n      <span className=\"diff-line-syntax-raw\">\n        <span data-template dangerouslySetInnerHTML={{ __html: syntaxLine.template }} />\n      </span>\n    );\n  }\n\n  return (\n    <span className=\"diff-line-syntax-raw\">\n      {syntaxLine?.nodeList?.map(({ node, wrapper }, index) => (\n        <span\n          key={index}\n          data-start={node.startIndex}\n          data-end={node.endIndex}\n          className={wrapper?.properties?.className?.join(\" \")}\n          style={getStyleObjectFromString(wrapper?.properties?.style || \"\")}\n        >\n          {node.value}\n        </span>\n      ))}\n    </span>\n  );\n};\n\nexport const DiffContent = ({\n  diffLine,\n  diffFile,\n  rawLine,\n  plainLine,\n  syntaxLine,\n  enableWrap,\n  enableHighlight,\n}: {\n  rawLine: string;\n  plainLine?: File[\"plainFile\"][number];\n  syntaxLine?: File[\"syntaxFile\"][number];\n  diffLine?: DiffLine;\n  diffFile: DiffFile;\n  enableWrap: boolean;\n  enableHighlight: boolean;\n}) => {\n  const isAdded = diffLine?.type === DiffLineType.Add;\n\n  const isDelete = diffLine?.type === DiffLineType.Delete;\n\n  const isMaxLineLengthToIgnoreSyntax = syntaxLine?.nodeList?.length > 150;\n\n  const isEnableTemplate = diffFile.getIsEnableTemplate?.() ?? true;\n\n  return (\n    <div\n      className=\"diff-line-content-item pl-[2.0em]\"\n      // data-val={rawLine}\n      style={{\n        whiteSpace: enableWrap ? \"pre-wrap\" : \"pre\",\n        wordBreak: enableWrap ? \"break-all\" : \"initial\",\n      }}\n    >\n      <span\n        data-operator={isAdded ? \"+\" : isDelete ? \"-\" : undefined}\n        className=\"diff-line-content-operator ml-[-1.5em] inline-block w-[1.5em] select-none indent-[0.2em]\"\n      >\n        {isAdded ? \"+\" : isDelete ? \"-\" : \" \"}\n      </span>\n      {enableHighlight && syntaxLine && !isMaxLineLengthToIgnoreSyntax ? (\n        <DiffSyntax\n          operator={isAdded ? \"add\" : isDelete ? \"del\" : undefined}\n          rawLine={rawLine}\n          diffLine={diffLine}\n          syntaxLine={syntaxLine}\n          enableWrap={enableWrap}\n          enableTemplate={isEnableTemplate}\n        />\n      ) : (\n        <DiffString\n          operator={isAdded ? \"add\" : isDelete ? \"del\" : undefined}\n          rawLine={rawLine}\n          diffLine={diffLine}\n          plainLine={plainLine}\n          enableWrap={enableWrap}\n          enableTemplate={isEnableTemplate}\n        />\n      )}\n    </div>\n  );\n};\n", "import { createContext, useContext } from \"react\";\n\nimport type { createDiffConfigStore } from \"./tools\";\n\nexport const DiffViewContext = createContext<{\n  useDiffContext: ReturnType<typeof createDiffConfigStore>;\n}>(null);\n\nDiffViewContext.displayName = \"DiffViewContext\";\n\nexport const useDiffViewContext = () => useContext(DiffViewContext);\n", "import { createContext, useContext } from \"react\";\n\nimport type { SplitSide } from \"..\";\nimport type { Ref, UseSelectorWithStore } from \"reactivity-store\";\n\nexport const DiffWidgetContext = createContext<{\n  useWidget: UseSelectorWithStore<{\n    widgetSide: Ref<SplitSide>;\n    widgetLineNumber: Ref<number>;\n\n    setWidget: (props: { side?: SplitSide; lineNumber?: number }) => void;\n  }>;\n}>(null);\n\nDiffWidgetContext.displayName = \"DiffWidgetContext\";\n\nexport const useDiffWidgetContext = () => useContext(DiffWidgetContext);\n", "import { DiffLineType, type DiffFile, checkDiffLineIncludeChange } from \"@git-diff-view/core\";\nimport {\n  getContentBG,\n  getLineNumberBG,\n  plainLineNumberColorName,\n  diffAsideWidthName,\n  emptyBGName,\n  expandLineNumberColorName,\n} from \"@git-diff-view/utils\";\nimport * as React from \"react\";\n\nimport { SplitSide } from \"..\";\n\nimport { DiffSplitAddWidget } from \"./DiffAddWidget\";\nimport { DiffContent } from \"./DiffContent\";\n// import { DiffContent_v2 } from \"./DiffContent_v2\";\nimport { useDiffViewContext } from \"./DiffViewContext\";\nimport { useDiffWidgetContext } from \"./DiffWidgetContext\";\n\nconst InternalDiffSplitLine = ({\n  index,\n  diffFile,\n  lineNumber,\n  side,\n  enableAddWidget,\n  enableHighlight,\n}: {\n  index: number;\n  side: SplitSide;\n  diffFile: DiffFile;\n  lineNumber: number;\n  enableHighlight: boolean;\n  enableAddWidget: boolean;\n}) => {\n  const getCurrentSyntaxLine = side === SplitSide.old ? diffFile.getOldSyntaxLine : diffFile.getNewSyntaxLine;\n\n  const getCurrentPlainLine = side === SplitSide.old ? diffFile.getOldPlainLine : diffFile.getNewPlainLine;\n\n  const oldLine = diffFile.getSplitLeftLine(index);\n\n  const newLine = diffFile.getSplitRightLine(index);\n\n  const currentLine = side === SplitSide.old ? oldLine : newLine;\n\n  const hasDiff = !!currentLine?.diff;\n\n  const hasContent = !!currentLine?.lineNumber;\n\n  const hasChange = checkDiffLineIncludeChange(currentLine?.diff);\n\n  const isAdded = currentLine?.diff?.type === DiffLineType.Add;\n\n  const isDelete = currentLine?.diff?.type === DiffLineType.Delete;\n\n  const { useDiffContext } = useDiffViewContext();\n\n  const onAddWidgetClick = useDiffContext.getReadonlyState().onAddWidgetClick;\n\n  const { useWidget } = useDiffWidgetContext();\n\n  const setWidget = useWidget.getReadonlyState().setWidget;\n\n  const contentBG = getContentBG(isAdded, isDelete, hasDiff);\n\n  const lineNumberBG = getLineNumberBG(isAdded, isDelete, hasDiff);\n\n  const syntaxLine = getCurrentSyntaxLine(currentLine.lineNumber);\n\n  const plainLine = getCurrentPlainLine(currentLine.lineNumber);\n\n  return (\n    <tr\n      data-line={lineNumber}\n      data-state={hasDiff || !hasContent ? \"diff\" : \"plain\"}\n      data-side={SplitSide[side]}\n      className={\"diff-line\" + (hasContent ? \" group\" : \"\")}\n    >\n      {hasContent ? (\n        <>\n          <td\n            className={`diff-line-${SplitSide[side]}-num sticky left-0 z-[1] w-[1%] min-w-[40px] select-none pl-[10px] pr-[10px] text-right align-top`}\n            style={{\n              backgroundColor: lineNumberBG,\n              color: `var(${hasDiff ? plainLineNumberColorName : expandLineNumberColorName})`,\n              width: `var(${diffAsideWidthName})`,\n              minWidth: `var(${diffAsideWidthName})`,\n              maxWidth: `var(${diffAsideWidthName})`,\n            }}\n          >\n            {hasDiff && enableAddWidget && (\n              <DiffSplitAddWidget\n                index={index}\n                lineNumber={currentLine.lineNumber}\n                side={side}\n                diffFile={diffFile}\n                onWidgetClick={(...props) => onAddWidgetClick.current?.(...props)}\n                className=\"absolute left-[100%] z-[1] translate-x-[-50%]\"\n                onOpenAddWidget={(lineNumber, side) => setWidget({ lineNumber: lineNumber, side: side })}\n              />\n            )}\n            <span data-line-num={currentLine.lineNumber} style={{ opacity: hasChange ? undefined : 0.5 }}>\n              {currentLine.lineNumber}\n            </span>\n          </td>\n          <td\n            className={`diff-line-${SplitSide[side]}-content pr-[10px] align-top`}\n            style={{ backgroundColor: contentBG }}\n          >\n            <DiffContent\n              enableWrap={false}\n              diffFile={diffFile}\n              rawLine={currentLine?.value || \"\"}\n              diffLine={currentLine?.diff}\n              plainLine={plainLine}\n              syntaxLine={syntaxLine}\n              enableHighlight={enableHighlight}\n            />\n          </td>\n        </>\n      ) : (\n        <td\n          className={`diff-line-${SplitSide[side]}-placeholder select-none`}\n          style={{ backgroundColor: `var(${emptyBGName})` }}\n          colSpan={2}\n        >\n          <span>&ensp;</span>\n        </td>\n      )}\n    </tr>\n  );\n};\n\nexport const DiffSplitContentLine = ({\n  index,\n  diffFile,\n  lineNumber,\n  side,\n  enableAddWidget,\n  enableHighlight,\n}: {\n  index: number;\n  side: SplitSide;\n  diffFile: DiffFile;\n  lineNumber: number;\n  enableHighlight: boolean;\n  enableAddWidget: boolean;\n}) => {\n  const getCurrentLine = side === SplitSide.old ? diffFile.getSplitLeftLine : diffFile.getSplitRightLine;\n\n  const currentLine = getCurrentLine(index);\n\n  if (currentLine?.isHidden) return null;\n\n  return (\n    <InternalDiffSplitLine\n      index={index}\n      diffFile={diffFile}\n      lineNumber={lineNumber}\n      side={side}\n      enableAddWidget={enableAddWidget}\n      enableHighlight={enableHighlight}\n    />\n  );\n};\n", "import { useEffect, useState } from \"react\";\n\nimport { useDiffViewContext } from \"../components/DiffViewContext\";\n\nexport type ObserveElement = HTMLElement & {\n  __observeCallback: Set<() => void>;\n  __observeInstance: ResizeObserver;\n};\n\nexport const useDomWidth = ({ selector, enable }: { selector: string; enable: boolean }) => {\n  const [width, setWidth] = useState(0);\n\n  const { useDiffContext } = useDiffViewContext();\n\n  const { id, mounted } = useDiffContext.useShallowStableSelector((s) => ({ id: s.id, mounted: s.mounted }));\n\n  useEffect(() => {\n    if (enable) {\n      const container = document.querySelector(`#diff-root${id}`);\n\n      const wrapper = container?.querySelector(selector);\n\n      if (!wrapper) return;\n\n      const typedWrapper = wrapper as ObserveElement;\n\n      const cb = () => {\n        const rect = wrapper?.getBoundingClientRect();\n        setWidth(rect?.width ?? 0);\n      };\n\n      cb();\n\n      const cleanCb = () => {\n        typedWrapper.__observeCallback.delete(cb);\n        if (typedWrapper.__observeCallback.size === 0) {\n          typedWrapper.__observeInstance?.disconnect();\n          typedWrapper.removeAttribute(\"data-observe\");\n          delete typedWrapper.__observeCallback;\n          delete typedWrapper.__observeInstance;\n        }\n      };\n\n      if (typedWrapper.__observeCallback) {\n        typedWrapper.__observeCallback.add(cb);\n\n        return () => cleanCb();\n      }\n\n      typedWrapper.__observeCallback = new Set();\n\n      typedWrapper.__observeCallback.add(cb);\n\n      const observer = new ResizeObserver(() => typedWrapper.__observeCallback.forEach((cb) => cb()));\n\n      typedWrapper.__observeInstance = observer;\n\n      observer.observe(typedWrapper);\n\n      typedWrapper.setAttribute(\"data-observe\", \"height\");\n\n      return () => cleanCb();\n    }\n  }, [selector, enable, id, mounted]);\n\n  return width;\n};\n", "import { useEffect } from \"react\";\n\nimport { useDiffViewContext } from \"../components/DiffViewContext\";\n\nimport type { ObserveElement } from \"./useDomWidth\";\n\nexport const useSyncHeight = ({\n  selector,\n  wrapper,\n  side,\n  enable,\n}: {\n  selector: string;\n  wrapper?: string;\n  side: string;\n  enable: boolean;\n}) => {\n  const { useDiffContext } = useDiffViewContext();\n\n  const { id, mounted } = useDiffContext.useShallowStableSelector((s) => ({ id: s.id, mounted: s.mounted }));\n\n  useEffect(() => {\n    if (enable) {\n      const container = document.querySelector(`#diff-root${id}`);\n\n      const elements = Array.from(container?.querySelectorAll(selector) || []);\n\n      const wrappers = wrapper ? Array.from(container?.querySelectorAll(wrapper) || []) : elements;\n\n      if (elements.length === 2 && wrappers.length === 2) {\n        const ele1 = elements[0] as HTMLElement;\n        const ele2 = elements[1] as HTMLElement;\n\n        const wrapper1 = wrappers[0] as HTMLElement;\n        const wrapper2 = wrappers[1] as HTMLElement;\n\n        const target = ele1.getAttribute(\"data-side\") === side ? ele1 : ele2;\n\n        const typedTarget = target as ObserveElement;\n\n        const cb = () => {\n          ele1.style.height = \"auto\";\n          ele2.style.height = \"auto\";\n          const rect1 = ele1.getBoundingClientRect();\n          const rect2 = ele2.getBoundingClientRect();\n          const maxHeight = Math.max(rect1.height, rect2.height);\n          wrapper1.style.height = maxHeight + \"px\";\n          wrapper2.style.height = maxHeight + \"px\";\n          wrapper1.setAttribute(\"data-sync-height\", String(maxHeight));\n          wrapper2.setAttribute(\"data-sync-height\", String(maxHeight));\n        };\n\n        cb();\n\n        const cleanCb = () => {\n          typedTarget.__observeCallback.delete(cb);\n          if (typedTarget.__observeCallback.size === 0) {\n            typedTarget.__observeInstance?.disconnect();\n            typedTarget.removeAttribute(\"data-observe\");\n            delete typedTarget.__observeCallback;\n            delete typedTarget.__observeInstance;\n          }\n        };\n\n        if (typedTarget.__observeCallback) {\n          typedTarget.__observeCallback.add(cb);\n\n          return () => cleanCb();\n        }\n\n        typedTarget.__observeCallback = new Set();\n\n        typedTarget.__observeCallback.add(cb);\n\n        const observer = new ResizeObserver(() => typedTarget.__observeCallback.forEach((cb) => cb()));\n\n        typedTarget.__observeInstance = observer;\n\n        observer.observe(target);\n\n        target.setAttribute(\"data-observe\", \"height\");\n\n        return () => cleanCb();\n      }\n    }\n  }, [selector, enable, side, id, wrapper, mounted]);\n};\n", "import { emptyBGName } from \"@git-diff-view/utils\";\nimport * as React from \"react\";\n\nimport { SplitSide } from \"..\";\nimport { useDomWidth } from \"../hooks/useDomWidth\";\nimport { useSyncHeight } from \"../hooks/useSyncHeight\";\n\nimport { useDiffViewContext } from \"./DiffViewContext\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nconst InternalDiffSplitExtendLine = ({\n  index,\n  diffFile,\n  oldLineExtend,\n  newLineExtend,\n  side,\n  lineNumber,\n}: {\n  index: number;\n  side: SplitSide;\n  oldLineExtend: { data: any };\n  newLineExtend: { data: any };\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const { useDiffContext } = useDiffViewContext();\n\n  const oldLine = diffFile.getSplitLeftLine(index);\n\n  const newLine = diffFile.getSplitRightLine(index);\n\n  const renderExtendLine = useDiffContext.useShallowStableSelector((s) => s.renderExtendLine);\n\n  const currentExtend = side === SplitSide.old ? oldLineExtend : newLineExtend;\n\n  const otherSide = side === SplitSide.old ? SplitSide.new : SplitSide.old;\n\n  const currentLineNumber = side === SplitSide.old ? oldLine.lineNumber : newLine.lineNumber;\n\n  const currentSideHasExtend = currentExtend?.data !== undefined && currentExtend?.data !== null;\n\n  const hasExtend =\n    (oldLineExtend?.data !== undefined && oldLineExtend?.data !== null) ||\n    (newLineExtend?.data !== undefined && newLineExtend?.data !== null);\n\n  const currentExtendRendered =\n    hasExtend &&\n    renderExtendLine?.({\n      diffFile,\n      side,\n      lineNumber: currentLineNumber,\n      data: currentExtend?.data,\n      onUpdate: diffFile.notifyAll,\n    });\n\n  useSyncHeight({\n    selector: `div[data-line=\"${lineNumber}-extend-content\"]`,\n    wrapper: `tr[data-line=\"${lineNumber}-extend\"]`,\n    side: SplitSide[currentSideHasExtend ? side : otherSide],\n    enable: hasExtend && typeof renderExtendLine === \"function\",\n  });\n\n  const width = useDomWidth({\n    selector: side === SplitSide.old ? \".old-diff-table-wrapper\" : \".new-diff-table-wrapper\",\n    enable: currentSideHasExtend && typeof renderExtendLine === \"function\",\n  });\n\n  if (!renderExtendLine) return null;\n\n  return (\n    <tr\n      data-line={`${lineNumber}-extend`}\n      data-state=\"extend\"\n      data-side={SplitSide[side]}\n      className=\"diff-line diff-line-extend\"\n    >\n      {currentSideHasExtend ? (\n        <td className={`diff-line-extend-${SplitSide[side]}-content p-0`} colSpan={2}>\n          <div\n            data-line={`${lineNumber}-extend-content`}\n            data-side={SplitSide[side]}\n            className=\"diff-line-extend-wrapper sticky left-0 z-[1]\"\n            style={{ width }}\n          >\n            {width > 0 && currentExtendRendered}\n          </div>\n        </td>\n      ) : (\n        <td\n          className={`diff-line-extend-${SplitSide[side]}-placeholder select-none p-0`}\n          style={{ backgroundColor: `var(${emptyBGName})` }}\n          colSpan={2}\n        >\n          <div data-line={`${lineNumber}-extend-content`} data-side={SplitSide[side]} />\n        </td>\n      )}\n    </tr>\n  );\n};\n\nexport const DiffSplitExtendLine = ({\n  index,\n  diffFile,\n  side,\n  lineNumber,\n}: {\n  index: number;\n  side: SplitSide;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const { useDiffContext } = useDiffViewContext();\n\n  const oldLine = diffFile.getSplitLeftLine(index);\n\n  const newLine = diffFile.getSplitRightLine(index);\n\n  const { oldLineExtend, newLineExtend } = useDiffContext(\n    React.useCallback(\n      (s) => ({\n        oldLineExtend: s.extendData?.oldFile?.[oldLine?.lineNumber],\n        newLineExtend: s.extendData?.newFile?.[newLine?.lineNumber],\n      }),\n      [oldLine?.lineNumber, newLine?.lineNumber]\n    )\n  );\n\n  const hasExtend = oldLineExtend?.data || newLineExtend?.data;\n\n  // if the expand action not enabled, the `isHidden` property will never change\n  const enableExpand = diffFile.getExpandEnabled();\n\n  const currentLine = side === SplitSide.old ? oldLine : newLine;\n\n  const currentIsShow = hasExtend && (!currentLine.isHidden || !enableExpand);\n\n  if (!currentIsShow) return null;\n\n  return (\n    <InternalDiffSplitExtendLine\n      side={side}\n      index={index}\n      diffFile={diffFile}\n      lineNumber={lineNumber}\n      oldLineExtend={oldLineExtend}\n      newLineExtend={newLineExtend}\n    />\n  );\n};\n", "import * as React from \"react\";\n\nexport const ExpandDown = ({ className }: { className?: string }) => {\n  return (\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" className={className}>\n      <path d=\"m8.177 14.323 2.896-2.896a.25.25 0 0 0-.177-.427H8.75V7.764a.75.75 0 1 0-1.5 0V11H5.104a.25.25 0 0 0-.177.427l2.896 2.896a.25.25 0 0 0 .354 0ZM2.25 5a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 4.25a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5a.75.75 0 0 1 .75.75ZM8.25 5a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 4.25a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5a.75.75 0 0 1 .75.75Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z\"></path>\n    </svg>\n  );\n};\n\nexport const ExpandUp = ({ className }: { className?: string }) => {\n  return (\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" className={className}>\n      <path d=\"M7.823 1.677 4.927 4.573A.25.25 0 0 0 5.104 5H7.25v3.236a.75.75 0 1 0 1.5 0V5h2.146a.25.25 0 0 0 .177-.427L8.177 1.677a.25.25 0 0 0-.354 0ZM13.75 11a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5Zm-3.75.75a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75ZM7.75 11a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5ZM4 11.75a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75ZM1.75 11a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5Z\"></path>\n    </svg>\n  );\n};\n\nexport const ExpandAll = ({ className }: { className?: string }) => {\n  return (\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" className={className}>\n      <path d=\"m8.177.677 2.896 2.896a.25.25 0 0 1-.177.427H8.75v1.25a.75.75 0 0 1-1.5 0V4H5.104a.25.25 0 0 1-.177-.427L7.823.677a.25.25 0 0 1 .354 0ZM7.25 10.75a.75.75 0 0 1 1.5 0V12h2.146a.25.25 0 0 1 .177.427l-2.896 2.896a.25.25 0 0 1-.354 0l-2.896-2.896A.25.25 0 0 1 5.104 12H7.25v-1.25Zm-5-2a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 6 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 12 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z\"></path>\n    </svg>\n  );\n};\n", "import { composeLen, type DiffFile } from \"@git-diff-view/core\";\nimport {\n  hunkLineNumberBGName,\n  plainLineNumberColorName,\n  diffAsideWidthName,\n  hunkContentBGName,\n  hunkContentColorName,\n} from \"@git-diff-view/utils\";\nimport * as React from \"react\";\n\nimport { DiffModeEnum, SplitSide } from \"..\";\nimport { useSyncHeight } from \"../hooks/useSyncHeight\";\n\nimport { ExpandAll, ExpandDown, ExpandUp } from \"./DiffExpand\";\nimport { useDiffViewContext } from \"./DiffViewContext\";\n\nconst InternalDiffSplitHunkLineGitHub = ({\n  index,\n  diffFile,\n  side,\n  lineNumber,\n}: {\n  index: number;\n  side: SplitSide;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const currentHunk = diffFile.getSplitHunkLine(index);\n\n  const expandEnabled = diffFile.getExpandEnabled();\n\n  useSyncHeight({\n    selector: `tr[data-line=\"${lineNumber}-hunk\"]`,\n    side: SplitSide[SplitSide.old],\n    enable: side === SplitSide.new,\n  });\n\n  const enableHunkAction = side === SplitSide.old;\n\n  const couldExpand = expandEnabled && currentHunk && currentHunk.splitInfo;\n\n  const isExpandAll =\n    currentHunk &&\n    currentHunk.splitInfo &&\n    currentHunk.splitInfo.endHiddenIndex - currentHunk.splitInfo.startHiddenIndex < composeLen;\n\n  const isFirstLine = currentHunk && currentHunk.isFirst;\n\n  const isLastLine = currentHunk && currentHunk.isLast;\n\n  return (\n    <tr\n      data-line={`${lineNumber}-hunk`}\n      data-state=\"hunk\"\n      data-side={SplitSide[side]}\n      className=\"diff-line diff-line-hunk\"\n    >\n      {enableHunkAction ? (\n        <>\n          <td\n            className=\"diff-line-hunk-action sticky left-0 w-[1%] min-w-[40px] select-none p-[1px]\"\n            style={{\n              backgroundColor: `var(${hunkLineNumberBGName})`,\n              color: `var(${plainLineNumberColorName})`,\n              width: `var(${diffAsideWidthName})`,\n              minWidth: `var(${diffAsideWidthName})`,\n              maxWidth: `var(${diffAsideWidthName})`,\n            }}\n          >\n            {couldExpand ? (\n              isFirstLine ? (\n                <button\n                  className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand Up\"\n                  data-title=\"Expand Up\"\n                  onClick={() => diffFile.onSplitHunkExpand(\"up\", index)}\n                >\n                  <ExpandUp className=\"fill-current\" />\n                </button>\n              ) : isLastLine ? (\n                <button\n                  className=\"diff-widget-tooltip relative flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand Down\"\n                  data-title=\"Expand Down\"\n                  onClick={() => diffFile.onSplitHunkExpand(\"down\", index)}\n                >\n                  <ExpandDown className=\"fill-current\" />\n                </button>\n              ) : isExpandAll ? (\n                <button\n                  className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n                  title=\"Expand All\"\n                  data-title=\"Expand All\"\n                  onClick={() => diffFile.onSplitHunkExpand(\"all\", index)}\n                >\n                  <ExpandAll className=\"fill-current\" />\n                </button>\n              ) : (\n                <>\n                  <button\n                    className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                    title=\"Expand Down\"\n                    data-title=\"Expand Down\"\n                    onClick={() => diffFile.onSplitHunkExpand(\"down\", index)}\n                  >\n                    <ExpandDown className=\"fill-current\" />\n                  </button>\n                  <button\n                    className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                    title=\"Expand Up\"\n                    data-title=\"Expand Up\"\n                    onClick={() => diffFile.onSplitHunkExpand(\"up\", index)}\n                  >\n                    <ExpandUp className=\"fill-current\" />\n                  </button>\n                </>\n              )\n            ) : (\n              <div className=\"min-h-[28px]\">&ensp;</div>\n            )}\n          </td>\n          <td\n            className=\"diff-line-hunk-content pr-[10px] align-middle\"\n            style={{ backgroundColor: `var(${hunkContentBGName})` }}\n          >\n            <div\n              className=\"pl-[1.5em]\"\n              style={{\n                color: `var(${hunkContentColorName})`,\n              }}\n            >\n              {currentHunk.splitInfo?.plainText || currentHunk.text}\n            </div>\n          </td>\n        </>\n      ) : (\n        <td\n          className=\"diff-line-hunk-placeholder select-none\"\n          colSpan={2}\n          style={{ backgroundColor: `var(${hunkContentBGName})` }}\n        >\n          <div className=\"min-h-[28px]\">&ensp;</div>\n        </td>\n      )}\n    </tr>\n  );\n};\n\nconst InternalDiffSplitHunkLineGitLab = ({\n  index,\n  diffFile,\n  side,\n  lineNumber,\n}: {\n  index: number;\n  side: SplitSide;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const currentHunk = diffFile.getSplitHunkLine(index);\n\n  const expandEnabled = diffFile.getExpandEnabled();\n\n  useSyncHeight({\n    selector: `tr[data-line=\"${lineNumber}-hunk\"]`,\n    side: SplitSide[side],\n    enable: true,\n  });\n\n  const couldExpand = expandEnabled && currentHunk && currentHunk.splitInfo;\n\n  const isExpandAll =\n    currentHunk &&\n    currentHunk.splitInfo &&\n    currentHunk.splitInfo.endHiddenIndex - currentHunk.splitInfo.startHiddenIndex < composeLen;\n\n  const isFirstLine = currentHunk && currentHunk.isFirst;\n\n  const isLastLine = currentHunk && currentHunk.isLast;\n\n  return (\n    <tr\n      data-line={`${lineNumber}-hunk`}\n      data-state=\"hunk\"\n      data-side={SplitSide[side]}\n      className=\"diff-line diff-line-hunk\"\n    >\n      <td\n        className=\"diff-line-hunk-action sticky left-0 w-[1%] min-w-[40px] select-none p-[1px]\"\n        style={{\n          backgroundColor: `var(${hunkLineNumberBGName})`,\n          color: `var(${plainLineNumberColorName})`,\n          width: `var(${diffAsideWidthName})`,\n          minWidth: `var(${diffAsideWidthName})`,\n          maxWidth: `var(${diffAsideWidthName})`,\n        }}\n      >\n        {couldExpand ? (\n          isFirstLine ? (\n            <button\n              className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n              title=\"Expand Up\"\n              data-title=\"Expand Up\"\n              onClick={() => diffFile.onSplitHunkExpand(\"up\", index)}\n            >\n              <ExpandUp className=\"fill-current\" />\n            </button>\n          ) : isLastLine ? (\n            <button\n              className=\"diff-widget-tooltip relative flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n              title=\"Expand Down\"\n              data-title=\"Expand Down\"\n              onClick={() => diffFile.onSplitHunkExpand(\"down\", index)}\n            >\n              <ExpandDown className=\"fill-current\" />\n            </button>\n          ) : isExpandAll ? (\n            <button\n              className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n              title=\"Expand All\"\n              data-title=\"Expand All\"\n              onClick={() => diffFile.onSplitHunkExpand(\"all\", index)}\n            >\n              <ExpandAll className=\"fill-current\" />\n            </button>\n          ) : (\n            <>\n              <button\n                className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                title=\"Expand Down\"\n                data-title=\"Expand Down\"\n                onClick={() => diffFile.onSplitHunkExpand(\"down\", index)}\n              >\n                <ExpandDown className=\"fill-current\" />\n              </button>\n              <button\n                className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                title=\"Expand Up\"\n                data-title=\"Expand Up\"\n                onClick={() => diffFile.onSplitHunkExpand(\"up\", index)}\n              >\n                <ExpandUp className=\"fill-current\" />\n              </button>\n            </>\n          )\n        ) : (\n          <div className=\"min-h-[28px]\">&ensp;</div>\n        )}\n      </td>\n      <td\n        className=\"diff-line-hunk-content pr-[10px] align-middle\"\n        style={{ backgroundColor: `var(${hunkContentBGName})` }}\n      >\n        <div\n          className=\"pl-[1.5em]\"\n          style={{\n            color: `var(${hunkContentColorName})`,\n          }}\n        >\n          {currentHunk.splitInfo?.plainText || currentHunk.text}\n        </div>\n      </td>\n    </tr>\n  );\n};\n\nconst InternalDiffSplitHunkLine = ({\n  index,\n  diffFile,\n  side,\n  lineNumber,\n}: {\n  index: number;\n  side: SplitSide;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const { useDiffContext } = useDiffViewContext();\n\n  const diffViewMode = useDiffContext.useShallowStableSelector((s) => s.mode);\n\n  if (\n    diffViewMode === DiffModeEnum.SplitGitHub ||\n    diffViewMode === DiffModeEnum.Split ||\n    diffViewMode === DiffModeEnum.Unified\n  ) {\n    return <InternalDiffSplitHunkLineGitHub index={index} diffFile={diffFile} side={side} lineNumber={lineNumber} />;\n  } else {\n    return <InternalDiffSplitHunkLineGitLab index={index} diffFile={diffFile} side={side} lineNumber={lineNumber} />;\n  }\n};\n\nexport const DiffSplitHunkLine = ({\n  index,\n  diffFile,\n  side,\n  lineNumber,\n}: {\n  index: number;\n  side: SplitSide;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const currentHunk = diffFile.getSplitHunkLine(index);\n\n  const currentIsShow =\n    currentHunk &&\n    currentHunk.splitInfo &&\n    currentHunk.splitInfo.startHiddenIndex < currentHunk.splitInfo.endHiddenIndex;\n\n  const currentIsPureHunk = currentHunk && diffFile._getIsPureDiffRender() && !currentHunk.splitInfo;\n\n  if (!currentIsShow && !currentIsPureHunk) return null;\n\n  return <InternalDiffSplitHunkLine index={index} diffFile={diffFile} side={side} lineNumber={lineNumber} />;\n};\n", "import { emptyBGName } from \"@git-diff-view/utils\";\nimport * as React from \"react\";\n\nimport { SplitSide } from \"..\";\nimport { useDomWidth } from \"../hooks/useDomWidth\";\nimport { useSyncHeight } from \"../hooks/useSyncHeight\";\n\nimport { useDiffViewContext } from \"./DiffViewContext\";\nimport { useDiffWidgetContext } from \"./DiffWidgetContext\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nconst InternalDiffSplitWidgetLine = ({\n  index,\n  side,\n  diffFile,\n  lineNumber,\n}: {\n  index: number;\n  side: SplitSide;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const { useWidget } = useDiffWidgetContext();\n\n  const { useDiffContext } = useDiffViewContext();\n\n  const oldLine = diffFile.getSplitLeftLine(index);\n\n  const newLine = diffFile.getSplitRightLine(index);\n\n  const widgetSide = useWidget.useShallowStableSelector((s) => s.widgetSide);\n\n  const widgetLineNumber = useWidget.getReadonlyState().widgetLineNumber;\n\n  const setWidget = useWidget.getReadonlyState().setWidget;\n\n  const oldLineWidget = oldLine.lineNumber && widgetSide === SplitSide.old && widgetLineNumber === oldLine.lineNumber;\n\n  const newLineWidget = newLine.lineNumber && widgetSide === SplitSide.new && widgetLineNumber === newLine.lineNumber;\n\n  const currentLine = side === SplitSide.old ? oldLine : newLine;\n\n  const otherSide = side === SplitSide.old ? SplitSide.new : SplitSide.old;\n\n  const currentHasWidget = side === SplitSide.old ? oldLineWidget : newLineWidget;\n\n  const hasWidget = oldLineWidget || newLineWidget;\n\n  const renderWidgetLine = useDiffContext.useShallowStableSelector((s) => s.renderWidgetLine);\n\n  const currentWidgetRendered =\n    currentHasWidget &&\n    renderWidgetLine?.({\n      diffFile,\n      side,\n      lineNumber: currentLine.lineNumber,\n      onClose: () => setWidget({}),\n    });\n\n  useSyncHeight({\n    selector: `div[data-line=\"${lineNumber}-widget-content\"]`,\n    wrapper: `tr[data-line=\"${lineNumber}-widget\"]`,\n    side: SplitSide[currentHasWidget ? side : otherSide],\n    enable: hasWidget && typeof renderWidgetLine === \"function\",\n  });\n\n  const width = useDomWidth({\n    selector: side === SplitSide.old ? \".old-diff-table-wrapper\" : \".new-diff-table-wrapper\",\n    enable: !!currentHasWidget && typeof renderWidgetLine === \"function\",\n  });\n\n  if (!renderWidgetLine) return null;\n\n  return (\n    <tr\n      data-line={`${lineNumber}-widget`}\n      data-state=\"widget\"\n      data-side={SplitSide[side]}\n      className=\"diff-line diff-line-widget\"\n    >\n      {currentHasWidget ? (\n        <td className={`diff-line-widget-${SplitSide[side]}-content p-0`} colSpan={2}>\n          <div\n            data-line={`${lineNumber}-widget-content`}\n            data-side={SplitSide[side]}\n            className=\"diff-line-widget-wrapper sticky left-0 z-[1]\"\n            style={{ width }}\n          >\n            {width > 0 && currentWidgetRendered}\n          </div>\n        </td>\n      ) : (\n        <td\n          className={`diff-line-widget-${SplitSide[side]}-placeholder p-0`}\n          style={{ backgroundColor: `var(${emptyBGName})` }}\n          colSpan={2}\n        >\n          <div data-line={`${lineNumber}-widget-content`} data-side={SplitSide[side]} />\n        </td>\n      )}\n    </tr>\n  );\n};\n\n// TODO! improve performance\nexport const DiffSplitWidgetLine = ({\n  index,\n  side,\n  diffFile,\n  lineNumber,\n}: {\n  index: number;\n  side: SplitSide;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const { useWidget } = useDiffWidgetContext();\n\n  const currentIsShow = useWidget.useShallowSelector(\n    React.useCallback(\n      (s) => {\n        const widgetLineNumber = s.widgetLineNumber;\n\n        const widgetSide = s.widgetSide;\n\n        const oldLine = diffFile.getSplitLeftLine(index);\n\n        const newLine = diffFile.getSplitRightLine(index);\n\n        const oldLineWidget =\n          oldLine.lineNumber && widgetSide === SplitSide.old && widgetLineNumber === oldLine.lineNumber;\n\n        const newLineWidget =\n          newLine.lineNumber && widgetSide === SplitSide.new && widgetLineNumber === newLine.lineNumber;\n\n        const currentIsShow = oldLineWidget || newLineWidget;\n\n        return currentIsShow;\n      },\n      [diffFile, index]\n    ),\n    (p, c) => p === c\n  );\n\n  if (!currentIsShow) return null;\n\n  return <InternalDiffSplitWidgetLine index={index} side={side} diffFile={diffFile} lineNumber={lineNumber} />;\n};\n", "/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { getSplitContentLines, type DiffFile } from \"@git-diff-view/core\";\nimport {\n  removeAllSelection,\n  syncScroll,\n  diffFontSizeName,\n  borderColorName,\n  diffAsideWidthName,\n} from \"@git-diff-view/utils\";\nimport { Fragment, memo, useEffect, useRef } from \"react\";\nimport * as React from \"react\";\nimport { useSyncExternalStore } from \"use-sync-external-store/shim/index.js\";\n\nimport { useTextWidth } from \"../hooks/useTextWidth\";\n\nimport { DiffSplitContentLine } from \"./DiffSplitContentLineNormal\";\nimport { DiffSplitExtendLine } from \"./DiffSplitExtendLineNormal\";\nimport { DiffSplitHunkLine } from \"./DiffSplitHunkLineNormal\";\nimport { DiffSplitWidgetLine } from \"./DiffSplitWidgetLineNormal\";\nimport { SplitSide } from \"./DiffView\";\nimport { useDiffViewContext } from \"./DiffViewContext\";\n\nimport type { MouseEventHandler } from \"react\";\n\nconst DiffSplitViewTable = ({\n  side,\n  diffFile,\n  enableAddWidget,\n  enableHighlight,\n  onMouseDown,\n}: {\n  side: SplitSide;\n  diffFile: DiffFile;\n  enableHighlight: boolean;\n  enableAddWidget: boolean;\n  onMouseDown?: MouseEventHandler<HTMLTableSectionElement>;\n}) => {\n  const className = side === SplitSide.new ? \"new-diff-table\" : \"old-diff-table\";\n\n  const lines = getSplitContentLines(diffFile);\n\n  return (\n    <table className={className + \" w-full border-collapse border-spacing-0\"} data-mode={SplitSide[side]}>\n      <colgroup>\n        <col className={`diff-table-${SplitSide[side]}-num-col`} />\n        <col className={`diff-table-${SplitSide[side]}-content-col`} />\n      </colgroup>\n      <thead className=\"hidden\">\n        <tr>\n          <th scope=\"col\">{SplitSide[side]} line number</th>\n          <th scope=\"col\">{SplitSide[side]} line content</th>\n        </tr>\n      </thead>\n      <tbody className=\"diff-table-body leading-[1.4]\" onMouseDownCapture={onMouseDown}>\n        {lines.map((line) => (\n          <Fragment key={line.index}>\n            <DiffSplitHunkLine index={line.index} side={side} lineNumber={line.lineNumber} diffFile={diffFile} />\n            <DiffSplitContentLine\n              index={line.index}\n              side={side}\n              lineNumber={line.lineNumber}\n              diffFile={diffFile}\n              enableAddWidget={enableAddWidget}\n              enableHighlight={enableHighlight}\n            />\n            <DiffSplitWidgetLine index={line.index} side={side} lineNumber={line.lineNumber} diffFile={diffFile} />\n            <DiffSplitExtendLine index={line.index} side={side} lineNumber={line.lineNumber} diffFile={diffFile} />\n          </Fragment>\n        ))}\n        <DiffSplitHunkLine\n          side={side}\n          index={diffFile.splitLineLength}\n          lineNumber={diffFile.splitLineLength}\n          diffFile={diffFile}\n        />\n      </tbody>\n    </table>\n  );\n};\n\nexport const DiffSplitViewNormal = memo(({ diffFile }: { diffFile: DiffFile }) => {\n  const ref1 = useRef<HTMLDivElement>(null);\n\n  const ref2 = useRef<HTMLDivElement>(null);\n\n  const ref = useRef<HTMLStyleElement>();\n\n  const tempRef = useRef<SplitSide>();\n\n  const splitLineLength = Math.max(diffFile.splitLineLength, diffFile.fileLineLength);\n\n  const { useDiffContext } = useDiffViewContext();\n\n  const { fontSize, enableAddWidget, enableHighlight } = useDiffContext.useShallowStableSelector((s) => ({\n    fontSize: s.fontSize,\n    enableAddWidget: s.enableAddWidget,\n    enableHighlight: s.enableHighlight,\n  }));\n\n  useSyncExternalStore(diffFile.subscribe, diffFile.getUpdateCount, diffFile.getUpdateCount);\n\n  useEffect(() => {\n    const left = ref1.current;\n    const right = ref2.current;\n    if (!left || !right) return;\n    return syncScroll(left, right);\n  }, []);\n\n  const font = React.useMemo(\n    () => ({ fontSize: fontSize + \"px\", fontFamily: \"Menlo, Consolas, monospace\" }),\n    [fontSize]\n  );\n\n  const _width = useTextWidth({\n    text: splitLineLength.toString(),\n    font,\n  });\n\n  const width = Math.max(40, _width + 25);\n\n  const setStyle = (side: SplitSide) => {\n    if (!ref.current) return;\n    if (!side) {\n      ref.current.textContent = \"\";\n    } else {\n      const id = `diff-root${diffFile.getId()}`;\n      ref.current.textContent = `#${id} [data-state=\"extend\"] {user-select: none} \\n#${id} [data-state=\"hunk\"] {user-select: none} \\n#${id} [data-state=\"widget\"] {user-select: none}`;\n    }\n  };\n\n  const onMouseDown: MouseEventHandler<HTMLTableSectionElement> = (e) => {\n    let ele = e.target;\n\n    // need remove all the selection\n    if (ele && ele instanceof HTMLElement && ele.nodeName === \"BUTTON\") {\n      removeAllSelection();\n      return;\n    }\n\n    while (ele && ele instanceof HTMLElement) {\n      const state = ele.getAttribute(\"data-state\");\n      const side = ele.getAttribute(\"data-side\");\n      if (side) {\n        if (tempRef.current !== SplitSide[side]) {\n          tempRef.current = SplitSide[side];\n          setStyle(SplitSide[side]);\n          removeAllSelection();\n        }\n      }\n      if (state) {\n        if (state === \"extend\" || state === \"hunk\" || state === \"widget\") {\n          if (tempRef.current !== undefined) {\n            tempRef.current = undefined;\n            setStyle(undefined);\n            removeAllSelection();\n          }\n          return;\n        } else {\n          return;\n        }\n      }\n\n      ele = ele.parentElement;\n    }\n  };\n\n  return (\n    <div className=\"split-diff-view split-diff-view-normal flex w-full basis-[50%]\">\n      <style data-select-style ref={ref} />\n      <div\n        className=\"old-diff-table-wrapper diff-table-scroll-container w-full overflow-x-auto overflow-y-hidden\"\n        ref={ref1}\n        style={{\n          // @ts-ignore\n          [diffAsideWidthName]: `${Math.round(width)}px`,\n          overscrollBehaviorX: \"none\",\n          fontFamily: \"Menlo, Consolas, monospace\",\n          fontSize: `var(${diffFontSizeName})`,\n        }}\n      >\n        <DiffSplitViewTable\n          side={SplitSide.old}\n          diffFile={diffFile}\n          enableAddWidget={enableAddWidget}\n          enableHighlight={enableHighlight}\n          onMouseDown={onMouseDown}\n        />\n      </div>\n      <div className=\"diff-split-line w-[1.5px]\" style={{ backgroundColor: `var(${borderColorName})` }} />\n      <div\n        className=\"new-diff-table-wrapper diff-table-scroll-container w-full overflow-x-auto overflow-y-hidden\"\n        ref={ref2}\n        style={{\n          // @ts-ignore\n          [diffAsideWidthName]: `${Math.round(width)}px`,\n          overscrollBehaviorX: \"none\",\n          fontFamily: \"Menlo, Consolas, monospace\",\n          fontSize: `var(${diffFontSizeName})`,\n        }}\n      >\n        <DiffSplitViewTable\n          side={SplitSide.new}\n          diffFile={diffFile}\n          enableAddWidget={enableAddWidget}\n          enableHighlight={enableHighlight}\n          onMouseDown={onMouseDown}\n        />\n      </div>\n    </div>\n  );\n});\n\nDiffSplitViewNormal.displayName = \"DiffSplitViewNormal\";\n", "import { DiffLineType, type DiffFile, checkDiffLineIncludeChange } from \"@git-diff-view/core\";\nimport {\n  getContentBG,\n  getLineNumberBG,\n  plainLineNumberColorName,\n  emptyBGName,\n  borderColorName,\n  expandLineNumberColorName,\n} from \"@git-diff-view/utils\";\nimport * as React from \"react\";\n\nimport { SplitSide } from \"..\";\n\nimport { DiffSplitAddWidget } from \"./DiffAddWidget\";\nimport { DiffContent } from \"./DiffContent\";\n// import { DiffContent_v2 } from \"./DiffContent_v2\";\nimport { useDiffViewContext } from \"./DiffViewContext\";\nimport { useDiffWidgetContext } from \"./DiffWidgetContext\";\n\nconst InternalDiffSplitLine = ({\n  index,\n  diffFile,\n  lineNumber,\n  enableAddWidget,\n  enableHighlight,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n  enableHighlight: boolean;\n  enableAddWidget: boolean;\n}) => {\n  const oldLine = diffFile.getSplitLeftLine(index);\n\n  const newLine = diffFile.getSplitRightLine(index);\n\n  const oldSyntaxLine = diffFile.getOldSyntaxLine(oldLine?.lineNumber);\n\n  const oldPlainLine = diffFile.getOldPlainLine(oldLine.lineNumber);\n\n  const newSyntaxLine = diffFile.getNewSyntaxLine(newLine?.lineNumber);\n\n  const newPlainLine = diffFile.getNewPlainLine(newLine.lineNumber);\n\n  const hasDiff = !!oldLine?.diff || !!newLine?.diff;\n\n  const hasChange = checkDiffLineIncludeChange(oldLine?.diff) || checkDiffLineIncludeChange(newLine?.diff);\n\n  const oldLineIsDelete = oldLine?.diff?.type === DiffLineType.Delete;\n\n  const newLineIsAdded = newLine?.diff?.type === DiffLineType.Add;\n\n  const { useDiffContext } = useDiffViewContext();\n\n  const onAddWidgetClick = useDiffContext.getReadonlyState().onAddWidgetClick;\n\n  const { useWidget } = useDiffWidgetContext();\n\n  const setWidget = useWidget.getReadonlyState().setWidget;\n\n  const hasOldLine = !!oldLine.lineNumber;\n\n  const hasNewLine = !!newLine.lineNumber;\n\n  const oldLineContentBG = getContentBG(false, oldLineIsDelete, hasDiff);\n\n  const oldLineNumberBG = getLineNumberBG(false, oldLineIsDelete, hasDiff);\n\n  const newLineContentBG = getContentBG(newLineIsAdded, false, hasDiff);\n\n  const newLineNumberBG = getLineNumberBG(newLineIsAdded, false, hasDiff);\n\n  return (\n    <tr data-line={lineNumber} data-state={hasDiff ? \"diff\" : \"plain\"} className=\"diff-line\">\n      {hasOldLine ? (\n        <>\n          <td\n            className=\"diff-line-old-num group relative w-[1%] min-w-[40px] select-none pl-[10px] pr-[10px] text-right align-top\"\n            data-side={SplitSide[SplitSide.old]}\n            style={{ backgroundColor: oldLineNumberBG, color: `var(${plainLineNumberColorName})` }}\n          >\n            {hasDiff && enableAddWidget && (\n              <DiffSplitAddWidget\n                index={index}\n                lineNumber={oldLine.lineNumber}\n                side={SplitSide.old}\n                diffFile={diffFile}\n                onWidgetClick={(...props) => onAddWidgetClick.current?.(...props)}\n                className=\"absolute left-[100%] z-[1] translate-x-[-50%]\"\n                onOpenAddWidget={(lineNumber, side) => setWidget({ lineNumber: lineNumber, side: side })}\n              />\n            )}\n            <span data-line-num={oldLine.lineNumber} style={{ opacity: hasChange ? undefined : 0.5 }}>\n              {oldLine.lineNumber}\n            </span>\n          </td>\n          <td\n            className=\"diff-line-old-content group relative pr-[10px] align-top\"\n            data-side={SplitSide[SplitSide.old]}\n            style={{ backgroundColor: oldLineContentBG }}\n          >\n            {hasDiff && enableAddWidget && (\n              <DiffSplitAddWidget\n                index={index}\n                lineNumber={oldLine.lineNumber}\n                side={SplitSide.old}\n                diffFile={diffFile}\n                onWidgetClick={(...props) => onAddWidgetClick.current?.(...props)}\n                className=\"absolute right-[100%] z-[1] translate-x-[50%]\"\n                onOpenAddWidget={(lineNumber, side) => setWidget({ lineNumber: lineNumber, side: side })}\n              />\n            )}\n            <DiffContent\n              enableWrap={true}\n              diffFile={diffFile}\n              rawLine={oldLine.value}\n              diffLine={oldLine.diff}\n              plainLine={oldPlainLine}\n              syntaxLine={oldSyntaxLine}\n              enableHighlight={enableHighlight}\n            />\n          </td>\n        </>\n      ) : (\n        <td\n          className=\"diff-line-old-placeholder select-none\"\n          data-side={SplitSide[SplitSide.old]}\n          style={{ backgroundColor: `var(${emptyBGName})` }}\n          colSpan={2}\n        >\n          <span>&ensp;</span>\n        </td>\n      )}\n      {hasNewLine ? (\n        <>\n          <td\n            className=\"diff-line-new-num group relative w-[1%] min-w-[40px] select-none border-l-[1px] pl-[10px] pr-[10px] text-right align-top\"\n            data-side={SplitSide[SplitSide.new]}\n            style={{\n              backgroundColor: newLineNumberBG,\n              color: `var(${hasDiff ? plainLineNumberColorName : expandLineNumberColorName})`,\n              borderLeftColor: `var(${borderColorName})`,\n              borderLeftStyle: \"solid\",\n            }}\n          >\n            {hasDiff && enableAddWidget && (\n              <DiffSplitAddWidget\n                index={index}\n                lineNumber={newLine.lineNumber}\n                side={SplitSide.new}\n                diffFile={diffFile}\n                onWidgetClick={(...props) => onAddWidgetClick.current?.(...props)}\n                className=\"absolute left-[100%] z-[1] translate-x-[-50%]\"\n                onOpenAddWidget={(lineNumber, side) => setWidget({ lineNumber: lineNumber, side: side })}\n              />\n            )}\n            <span data-line-num={newLine.lineNumber} style={{ opacity: hasChange ? undefined : 0.5 }}>\n              {newLine.lineNumber}\n            </span>\n          </td>\n          <td\n            className=\"diff-line-new-content group relative pr-[10px] align-top\"\n            data-side={SplitSide[SplitSide.new]}\n            style={{ backgroundColor: newLineContentBG }}\n          >\n            {hasDiff && enableAddWidget && (\n              <DiffSplitAddWidget\n                index={index}\n                lineNumber={newLine.lineNumber}\n                side={SplitSide.new}\n                diffFile={diffFile}\n                onWidgetClick={(...props) => onAddWidgetClick.current?.(...props)}\n                className=\"absolute right-[100%] z-[1] translate-x-[50%]\"\n                onOpenAddWidget={(lineNumber, side) => setWidget({ lineNumber: lineNumber, side: side })}\n              />\n            )}\n            <DiffContent\n              enableWrap={true}\n              diffFile={diffFile}\n              rawLine={newLine.value || \"\"}\n              diffLine={newLine.diff}\n              plainLine={newPlainLine}\n              syntaxLine={newSyntaxLine}\n              enableHighlight={enableHighlight}\n            />\n          </td>\n        </>\n      ) : (\n        <td\n          className=\"diff-line-new-placeholder select-none border-l-[1px]\"\n          style={{\n            backgroundColor: `var(${emptyBGName})`,\n            borderLeftColor: `var(${borderColorName})`,\n            borderLeftStyle: \"solid\",\n          }}\n          data-side={SplitSide[SplitSide.new]}\n          colSpan={2}\n        >\n          <span>&ensp;</span>\n        </td>\n      )}\n    </tr>\n  );\n};\n\nexport const DiffSplitContentLine = ({\n  index,\n  diffFile,\n  lineNumber,\n  enableAddWidget,\n  enableHighlight,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n  enableHighlight: boolean;\n  enableAddWidget: boolean;\n}) => {\n  const oldLine = diffFile.getSplitLeftLine(index);\n\n  const newLine = diffFile.getSplitRightLine(index);\n\n  if (oldLine?.isHidden && newLine?.isHidden) return null;\n\n  return (\n    <InternalDiffSplitLine\n      index={index}\n      diffFile={diffFile}\n      lineNumber={lineNumber}\n      enableAddWidget={enableAddWidget}\n      enableHighlight={enableHighlight}\n    />\n  );\n};\n", "import { emptyBGName, borderColorName } from \"@git-diff-view/utils\";\nimport * as React from \"react\";\n\nimport { SplitSide } from \"..\";\n\nimport { useDiffViewContext } from \"./DiffViewContext\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nconst InternalDiffSplitExtendLine = ({\n  index,\n  diffFile,\n  lineNumber,\n  oldLineExtend,\n  newLineExtend,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n  oldLineExtend: { data: any };\n  newLineExtend: { data: any };\n}) => {\n  const { useDiffContext } = useDiffViewContext();\n\n  const oldLine = diffFile.getSplitLeftLine(index);\n\n  const newLine = diffFile.getSplitRightLine(index);\n\n  // \n  const renderExtendLine = useDiffContext.useShallowStableSelector((s) => s.renderExtendLine);\n\n  if (!renderExtendLine) return null;\n\n  const oldExtendRendered =\n    oldLineExtend?.data &&\n    renderExtendLine?.({\n      diffFile,\n      side: SplitSide.old,\n      lineNumber: oldLine.lineNumber,\n      data: oldLineExtend.data,\n      onUpdate: diffFile.notifyAll,\n    });\n\n  const newExtendRendered =\n    newLineExtend?.data &&\n    renderExtendLine?.({\n      diffFile,\n      side: SplitSide.new,\n      lineNumber: newLine.lineNumber,\n      data: newLineExtend.data,\n      onUpdate: diffFile.notifyAll,\n    });\n\n  return (\n    <tr data-line={`${lineNumber}-extend`} data-state=\"extend\" className=\"diff-line diff-line-extend\">\n      {oldExtendRendered ? (\n        <td className=\"diff-line-extend-old-content p-0\" colSpan={2}>\n          <div className=\"diff-line-extend-wrapper\">{oldExtendRendered}</div>\n        </td>\n      ) : (\n        <td\n          className=\"diff-line-extend-old-placeholder select-none p-0\"\n          style={{ backgroundColor: `var(${emptyBGName})` }}\n          colSpan={2}\n        />\n      )}\n      {newExtendRendered ? (\n        <td\n          className=\"diff-line-extend-new-content border-l-[1px] p-0\"\n          style={{ borderLeftColor: `var(${borderColorName})`, borderLeftStyle: \"solid\" }}\n          colSpan={2}\n        >\n          <div className=\"diff-line-extend-wrapper\">{newExtendRendered}</div>\n        </td>\n      ) : (\n        <td\n          className=\"diff-line-extend-new-placeholder select-none border-l-[1px] p-0\"\n          style={{\n            backgroundColor: `var(${emptyBGName})`,\n            borderLeftColor: `var(${borderColorName})`,\n            borderLeftStyle: \"solid\",\n          }}\n          colSpan={2}\n        />\n      )}\n    </tr>\n  );\n};\n\nexport const DiffSplitExtendLine = ({\n  index,\n  diffFile,\n  lineNumber,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const { useDiffContext } = useDiffViewContext();\n\n  const oldLine = diffFile.getSplitLeftLine(index);\n\n  const newLine = diffFile.getSplitRightLine(index);\n\n  const { oldLineExtend, newLineExtend } = useDiffContext(\n    React.useCallback(\n      (s) => ({\n        oldLineExtend: s.extendData?.oldFile?.[oldLine?.lineNumber],\n        newLineExtend: s.extendData?.newFile?.[newLine?.lineNumber],\n      }),\n      [oldLine?.lineNumber, newLine?.lineNumber]\n    )\n  );\n\n  const hasExtend = oldLineExtend?.data || newLineExtend?.data;\n\n  // if the expand action not enabled, the `isHidden` property will never change\n  const enableExpand = diffFile.getExpandEnabled();\n\n  const currentIsShow = hasExtend && ((!oldLine?.isHidden && !newLine?.isHidden) || !enableExpand);\n\n  if (!currentIsShow) return null;\n\n  return (\n    <InternalDiffSplitExtendLine\n      index={index}\n      diffFile={diffFile}\n      lineNumber={lineNumber}\n      oldLineExtend={oldLineExtend}\n      newLineExtend={newLineExtend}\n    />\n  );\n};\n", "import { composeLen, type DiffFile } from \"@git-diff-view/core\";\nimport {\n  hunkLineNumberBGName,\n  plainLineNumberColorName,\n  hunkContentBGName,\n  hunkContentColorName,\n  borderColorName,\n} from \"@git-diff-view/utils\";\nimport * as React from \"react\";\n\nimport { DiffModeEnum } from \"..\";\n\nimport { ExpandAll, ExpandDown, ExpandUp } from \"./DiffExpand\";\nimport { useDiffViewContext } from \"./DiffViewContext\";\n\nconst DiffSplitHunkLineGitHub = ({\n  index,\n  diffFile,\n  lineNumber,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const currentHunk = diffFile.getSplitHunkLine(index);\n\n  const expandEnabled = diffFile.getExpandEnabled();\n\n  const couldExpand = expandEnabled && currentHunk && currentHunk.splitInfo;\n\n  const isExpandAll =\n    currentHunk &&\n    currentHunk.splitInfo &&\n    currentHunk.splitInfo.endHiddenIndex - currentHunk.splitInfo.startHiddenIndex < composeLen;\n\n  const isFirstLine = currentHunk && currentHunk.isFirst;\n\n  const isLastLine = currentHunk && currentHunk.isLast;\n\n  return (\n    <tr data-line={`${lineNumber}-hunk`} data-state=\"hunk\" className=\"diff-line diff-line-hunk\">\n      <td\n        className=\"diff-line-hunk-action relative w-[1%] min-w-[40px] select-none p-[1px]\"\n        style={{\n          backgroundColor: `var(${hunkLineNumberBGName})`,\n          color: `var(${plainLineNumberColorName})`,\n        }}\n      >\n        {couldExpand ? (\n          isFirstLine ? (\n            <button\n              className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n              title=\"Expand Up\"\n              data-title=\"Expand Up\"\n              onClick={() => diffFile.onSplitHunkExpand(\"up\", index)}\n            >\n              <ExpandUp className=\"fill-current\" />\n            </button>\n          ) : isLastLine ? (\n            <button\n              className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n              title=\"Expand Down\"\n              data-title=\"Expand Down\"\n              onClick={() => diffFile.onSplitHunkExpand(\"down\", index)}\n            >\n              <ExpandDown className=\"fill-current\" />\n            </button>\n          ) : isExpandAll ? (\n            <button\n              className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n              title=\"Expand All\"\n              data-title=\"Expand All\"\n              onClick={() => diffFile.onSplitHunkExpand(\"all\", index)}\n            >\n              <ExpandAll className=\"fill-current\" />\n            </button>\n          ) : (\n            <>\n              <button\n                className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                title=\"Expand Down\"\n                data-title=\"Expand Down\"\n                onClick={() => diffFile.onSplitHunkExpand(\"down\", index)}\n              >\n                <ExpandDown className=\"fill-current\" />\n              </button>\n              <button\n                className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                title=\"Expand Up\"\n                data-title=\"Expand Up\"\n                onClick={() => diffFile.onSplitHunkExpand(\"up\", index)}\n              >\n                <ExpandUp className=\"fill-current\" />\n              </button>\n            </>\n          )\n        ) : (\n          <div className=\"min-h-[28px]\">&ensp;</div>\n        )}\n      </td>\n      <td\n        className=\"diff-line-hunk-content pr-[10px] align-middle\"\n        style={{ backgroundColor: `var(${hunkContentBGName})` }}\n        colSpan={3}\n      >\n        <div\n          className=\"pl-[1.5em]\"\n          style={{\n            color: `var(${hunkContentColorName})`,\n          }}\n        >\n          {currentHunk.splitInfo?.plainText || currentHunk.text}\n        </div>\n      </td>\n    </tr>\n  );\n};\n\nconst DiffSplitHunkLineGitLab = ({\n  index,\n  diffFile,\n  lineNumber,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const currentHunk = diffFile.getSplitHunkLine(index);\n\n  const expandEnabled = diffFile.getExpandEnabled();\n\n  const couldExpand = expandEnabled && currentHunk && currentHunk.splitInfo;\n\n  const isExpandAll =\n    currentHunk &&\n    currentHunk.splitInfo &&\n    currentHunk.splitInfo.endHiddenIndex - currentHunk.splitInfo.startHiddenIndex < composeLen;\n\n  const isFirstLine = currentHunk && currentHunk.isFirst;\n\n  const isLastLine = currentHunk && currentHunk.isLast;\n\n  return (\n    <tr data-line={`${lineNumber}-hunk`} data-state=\"hunk\" className=\"diff-line diff-line-hunk\">\n      <td\n        className=\"diff-line-hunk-action relative w-[1%] min-w-[40px] select-none p-[1px]\"\n        style={{\n          backgroundColor: `var(${hunkLineNumberBGName})`,\n          color: `var(${plainLineNumberColorName})`,\n        }}\n      >\n        {couldExpand ? (\n          isFirstLine ? (\n            <button\n              className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n              title=\"Expand Up\"\n              data-title=\"Expand Up\"\n              onClick={() => diffFile.onSplitHunkExpand(\"up\", index)}\n            >\n              <ExpandUp className=\"fill-current\" />\n            </button>\n          ) : isLastLine ? (\n            <button\n              className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n              title=\"Expand Down\"\n              data-title=\"Expand Down\"\n              onClick={() => diffFile.onSplitHunkExpand(\"down\", index)}\n            >\n              <ExpandDown className=\"fill-current\" />\n            </button>\n          ) : isExpandAll ? (\n            <button\n              className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n              title=\"Expand All\"\n              data-title=\"Expand All\"\n              onClick={() => diffFile.onSplitHunkExpand(\"all\", index)}\n            >\n              <ExpandAll className=\"fill-current\" />\n            </button>\n          ) : (\n            <>\n              <button\n                className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                title=\"Expand Down\"\n                data-title=\"Expand Down\"\n                onClick={() => diffFile.onSplitHunkExpand(\"down\", index)}\n              >\n                <ExpandDown className=\"fill-current\" />\n              </button>\n              <button\n                className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                title=\"Expand Up\"\n                data-title=\"Expand Up\"\n                onClick={() => diffFile.onSplitHunkExpand(\"up\", index)}\n              >\n                <ExpandUp className=\"fill-current\" />\n              </button>\n            </>\n          )\n        ) : (\n          <div className=\"min-h-[28px]\">&ensp;</div>\n        )}\n      </td>\n      <td\n        className=\"diff-line-hunk-content pr-[10px] align-middle\"\n        style={{ backgroundColor: `var(${hunkContentBGName})` }}\n      >\n        <div\n          className=\"pl-[1.5em]\"\n          style={{\n            color: `var(${hunkContentColorName})`,\n          }}\n        >\n          {currentHunk.splitInfo?.plainText || currentHunk.text}\n        </div>\n      </td>\n      <td\n        className=\"diff-line-hunk-action relative z-[1] w-[1%] min-w-[40px] select-none border-l-[1px] p-[1px]\"\n        style={{\n          backgroundColor: `var(${hunkLineNumberBGName})`,\n          color: `var(${plainLineNumberColorName})`,\n          borderLeftColor: `var(${borderColorName})`,\n          borderLeftStyle: \"solid\",\n        }}\n      >\n        {couldExpand ? (\n          isFirstLine ? (\n            <button\n              className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n              title=\"Expand Up\"\n              data-title=\"Expand Up\"\n              onClick={() => diffFile.onSplitHunkExpand(\"up\", index)}\n            >\n              <ExpandUp className=\"fill-current\" />\n            </button>\n          ) : isLastLine ? (\n            <button\n              className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n              title=\"Expand Down\"\n              data-title=\"Expand Down\"\n              onClick={() => diffFile.onSplitHunkExpand(\"down\", index)}\n            >\n              <ExpandDown className=\"fill-current\" />\n            </button>\n          ) : isExpandAll ? (\n            <button\n              className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n              title=\"Expand All\"\n              data-title=\"Expand All\"\n              onClick={() => diffFile.onSplitHunkExpand(\"all\", index)}\n            >\n              <ExpandAll className=\"fill-current\" />\n            </button>\n          ) : (\n            <>\n              <button\n                className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                title=\"Expand Down\"\n                data-title=\"Expand Down\"\n                onClick={() => diffFile.onSplitHunkExpand(\"down\", index)}\n              >\n                <ExpandDown className=\"fill-current\" />\n              </button>\n              <button\n                className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                title=\"Expand Up\"\n                data-title=\"Expand Up\"\n                onClick={() => diffFile.onSplitHunkExpand(\"up\", index)}\n              >\n                <ExpandUp className=\"fill-current\" />\n              </button>\n            </>\n          )\n        ) : (\n          <div className=\"min-h-[28px]\">&ensp;</div>\n        )}\n      </td>\n      <td\n        className=\"diff-line-hunk-content relative pr-[10px] align-middle\"\n        style={{ backgroundColor: `var(${hunkContentBGName})` }}\n      >\n        <div\n          className=\"pl-[1.5em]\"\n          style={{\n            color: `var(${hunkContentColorName})`,\n          }}\n        >\n          {currentHunk.splitInfo?.plainText || currentHunk.text}\n        </div>\n      </td>\n    </tr>\n  );\n};\n\nconst InternalDiffSplitHunkLine = ({\n  index,\n  diffFile,\n  lineNumber,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const { useDiffContext } = useDiffViewContext();\n\n  const diffViewMode = useDiffContext.useShallowStableSelector((s) => s.mode);\n\n  if (\n    diffViewMode === DiffModeEnum.SplitGitHub ||\n    diffViewMode === DiffModeEnum.Split ||\n    diffViewMode === DiffModeEnum.Unified\n  ) {\n    return <DiffSplitHunkLineGitHub index={index} diffFile={diffFile} lineNumber={lineNumber} />;\n  } else {\n    return <DiffSplitHunkLineGitLab index={index} diffFile={diffFile} lineNumber={lineNumber} />;\n  }\n};\n\nexport const DiffSplitHunkLine = ({\n  index,\n  diffFile,\n  lineNumber,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const currentHunk = diffFile.getSplitHunkLine(index);\n\n  const currentIsShow =\n    currentHunk &&\n    currentHunk.splitInfo &&\n    currentHunk.splitInfo.startHiddenIndex < currentHunk.splitInfo.endHiddenIndex;\n\n  const currentIsPureHunk = currentHunk && diffFile._getIsPureDiffRender() && !currentHunk.splitInfo;\n\n  if (!currentIsShow && !currentIsPureHunk) return null;\n\n  return <InternalDiffSplitHunkLine index={index} diffFile={diffFile} lineNumber={lineNumber} />;\n};\n", "import { borderColorName, emptyBGName } from \"@git-diff-view/utils\";\nimport * as React from \"react\";\n\nimport { SplitSide } from \"..\";\n\nimport { useDiffViewContext } from \"./DiffViewContext\";\nimport { useDiffWidgetContext } from \"./DiffWidgetContext\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nconst InternalDiffSplitWidgetLine = ({\n  index,\n  diffFile,\n  lineNumber,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const { useWidget } = useDiffWidgetContext();\n\n  const setWidget = useWidget.getReadonlyState().setWidget;\n\n  const { useDiffContext } = useDiffViewContext();\n\n  const renderWidgetLine = useDiffContext.useShallowStableSelector((s) => s.renderWidgetLine);\n\n  const oldLine = diffFile.getSplitLeftLine(index);\n\n  const newLine = diffFile.getSplitRightLine(index);\n\n  const widgetSide = useWidget.useShallowStableSelector((s) => s.widgetSide);\n\n  const widgetLineNumber = useWidget.getReadonlyState().widgetLineNumber;\n\n  const oldLineWidget = oldLine.lineNumber && widgetSide === SplitSide.old && widgetLineNumber === oldLine.lineNumber;\n\n  const newLineWidget = newLine.lineNumber && widgetSide === SplitSide.new && widgetLineNumber === newLine.lineNumber;\n\n  const oldWidgetRendered =\n    oldLineWidget &&\n    renderWidgetLine?.({ diffFile, side: SplitSide.old, lineNumber: oldLine.lineNumber, onClose: () => setWidget({}) });\n\n  const newWidgetRendered =\n    newLineWidget &&\n    renderWidgetLine?.({ diffFile, side: SplitSide.new, lineNumber: newLine.lineNumber, onClose: () => setWidget({}) });\n\n  if (!renderWidgetLine) return null;\n\n  return (\n    <tr data-line={`${lineNumber}-widget`} data-state=\"widget\" className=\"diff-line diff-line-widget\">\n      {oldWidgetRendered ? (\n        <td className=\"diff-line-widget-old-content p-0\" colSpan={2}>\n          <div className=\"diff-line-widget-wrapper\">{oldWidgetRendered}</div>\n        </td>\n      ) : (\n        <td\n          className=\"diff-line-widget-old-placeholder select-none p-0\"\n          style={{ backgroundColor: `var(${emptyBGName})` }}\n          colSpan={2}\n        />\n      )}\n      {newWidgetRendered ? (\n        <td\n          className=\"diff-line-widget-new-content border-l-[1px] p-0\"\n          colSpan={2}\n          style={{ borderLeftColor: `var(${borderColorName})`, borderLeftStyle: \"solid\" }}\n        >\n          <div className=\"diff-line-widget-wrapper\">{newWidgetRendered}</div>\n        </td>\n      ) : (\n        <td\n          className=\"diff-line-widget-new-placeholder select-none border-l-[1px] p-0\"\n          style={{\n            backgroundColor: `var(${emptyBGName})`,\n            borderLeftColor: `var(${borderColorName})`,\n            borderLeftStyle: \"solid\",\n          }}\n          colSpan={2}\n        />\n      )}\n    </tr>\n  );\n};\n\n// TODO! improve performance\nexport const DiffSplitWidgetLine = ({\n  index,\n  diffFile,\n  lineNumber,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const { useWidget } = useDiffWidgetContext();\n\n  const currentIsShow = useWidget.useShallowSelector(\n    React.useCallback(\n      (s) => {\n        const widgetLineNumber = s.widgetLineNumber;\n\n        const widgetSide = s.widgetSide;\n\n        const oldLine = diffFile.getSplitLeftLine(index);\n\n        const newLine = diffFile.getSplitRightLine(index);\n\n        const oldLineWidget =\n          oldLine.lineNumber && widgetSide === SplitSide.old && widgetLineNumber === oldLine.lineNumber;\n\n        const newLineWidget =\n          newLine.lineNumber && widgetSide === SplitSide.new && widgetLineNumber === newLine.lineNumber;\n\n        const currentIsShow = oldLineWidget || newLineWidget;\n\n        return currentIsShow;\n      },\n      [diffFile, index]\n    ),\n    (p, c) => p === c\n  );\n\n  if (!currentIsShow) return null;\n\n  return <InternalDiffSplitWidgetLine index={index} diffFile={diffFile} lineNumber={lineNumber} />;\n};\n", "/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { type DiffFile, getSplitContentLines } from \"@git-diff-view/core\";\nimport { diffAsideWidthName, diffFontSizeName, removeAllSelection } from \"@git-diff-view/utils\";\nimport { Fragment, memo, useMemo, useRef } from \"react\";\nimport * as React from \"react\";\n// SEE https://github.com/facebook/react/pull/25231\nimport { useSyncExternalStore } from \"use-sync-external-store/shim/index.js\";\n\nimport { SplitSide } from \"..\";\nimport { useTextWidth } from \"../hooks/useTextWidth\";\n\nimport { DiffSplitContentLine } from \"./DiffSplitContentLineWrap\";\nimport { DiffSplitExtendLine } from \"./DiffSplitExtendLineWrap\";\nimport { DiffSplitHunkLine } from \"./DiffSplitHunkLineWrap\";\nimport { DiffSplitWidgetLine } from \"./DiffSplitWidgetLineWrap\";\nimport { useDiffViewContext } from \"./DiffViewContext\";\n\nimport type { MouseEventHandler } from \"react\";\n\nexport const DiffSplitViewWrap = memo(({ diffFile }: { diffFile: DiffFile }) => {\n  const splitLineLength = Math.max(diffFile.splitLineLength, diffFile.fileLineLength);\n\n  const { useDiffContext } = useDiffViewContext();\n\n  const ref = useRef<HTMLStyleElement>(null);\n\n  const tempRef = useRef<SplitSide>();\n\n  const { fontSize, enableAddWidget, enableHighlight } = useDiffContext.useShallowStableSelector((s) => ({\n    fontSize: s.fontSize,\n    enableAddWidget: s.enableAddWidget,\n    enableHighlight: s.enableHighlight,\n  }));\n\n  useSyncExternalStore(diffFile.subscribe, diffFile.getUpdateCount, diffFile.getUpdateCount);\n\n  const font = useMemo(() => ({ fontSize: fontSize + \"px\", fontFamily: \"Menlo, Consolas, monospace\" }), [fontSize]);\n\n  const _width = useTextWidth({\n    text: splitLineLength.toString(),\n    font,\n  });\n\n  const width = Math.max(40, _width + 25);\n\n  const lines = getSplitContentLines(diffFile);\n\n  const setStyle = (side: SplitSide) => {\n    if (!ref.current) return;\n    if (!side) {\n      ref.current.textContent = \"\";\n    } else {\n      const id = `diff-root${diffFile.getId()}`;\n      const targetSide = side === SplitSide.old ? SplitSide.new : SplitSide.old;\n      ref.current.textContent = `#${id} [data-side=\"${SplitSide[targetSide]}\"] {user-select: none} \\n#${id} [data-state=\"extend\"] {user-select: none} \\n#${id} [data-state=\"hunk\"] {user-select: none} \\n#${id} [data-state=\"widget\"] {user-select: none}`;\n    }\n  };\n\n  const onMouseDown: MouseEventHandler<HTMLTableSectionElement> = (e) => {\n    let ele = e.target;\n\n    // need remove all the selection\n    if (ele && ele instanceof HTMLElement && ele.nodeName === \"BUTTON\") {\n      removeAllSelection();\n      return;\n    }\n\n    while (ele && ele instanceof HTMLElement) {\n      const state = ele.getAttribute(\"data-state\");\n      const side = ele.getAttribute(\"data-side\");\n      if (side) {\n        if (tempRef.current !== SplitSide[side]) {\n          tempRef.current = SplitSide[side];\n          setStyle(SplitSide[side]);\n          removeAllSelection();\n        }\n      }\n      if (state) {\n        if (state === \"extend\" || state === \"hunk\" || state === \"widget\") {\n          if (tempRef.current !== undefined) {\n            tempRef.current = undefined;\n            setStyle(undefined);\n            removeAllSelection();\n          }\n          return;\n        } else {\n          return;\n        }\n      }\n\n      ele = ele.parentElement;\n    }\n  };\n\n  return (\n    <div className=\"split-diff-view split-diff-view-wrap w-full\">\n      <div\n        className=\"diff-table-wrapper w-full\"\n        style={{\n          // @ts-ignore\n          [diffAsideWidthName]: `${Math.round(width)}px`,\n          fontFamily: \"Menlo, Consolas, monospace\",\n          fontSize: `var(${diffFontSizeName})`,\n        }}\n      >\n        <style data-select-style ref={ref} />\n        <table className=\"diff-table w-full table-fixed border-collapse border-spacing-0\">\n          <colgroup>\n            <col className=\"diff-table-old-num-col\" width={Math.round(width)} />\n            <col className=\"diff-table-old-content-col\" />\n            <col className=\"diff-table-new-num-col\" width={Math.round(width)} />\n            <col className=\"diff-table-new-content-col\" />\n          </colgroup>\n          <thead className=\"hidden\">\n            <tr>\n              <th scope=\"col\">old line number</th>\n              <th scope=\"col\">old line content</th>\n              <th scope=\"col\">new line number</th>\n              <th scope=\"col\">new line content</th>\n            </tr>\n          </thead>\n          <tbody className=\"diff-table-body leading-[1.4]\" onMouseDownCapture={onMouseDown}>\n            {lines.map((line) => (\n              <Fragment key={line.index}>\n                <DiffSplitHunkLine index={line.index} lineNumber={line.lineNumber} diffFile={diffFile} />\n                <DiffSplitContentLine\n                  index={line.index}\n                  lineNumber={line.lineNumber}\n                  diffFile={diffFile}\n                  enableAddWidget={enableAddWidget}\n                  enableHighlight={enableHighlight}\n                />\n                <DiffSplitWidgetLine index={line.index} lineNumber={line.lineNumber} diffFile={diffFile} />\n                <DiffSplitExtendLine index={line.index} lineNumber={line.lineNumber} diffFile={diffFile} />\n              </Fragment>\n            ))}\n            <DiffSplitHunkLine\n              index={diffFile.splitLineLength}\n              lineNumber={diffFile.splitLineLength}\n              diffFile={diffFile}\n            />\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n});\n\nDiffSplitViewWrap.displayName = \"DiffSplitViewWrap\";\n", "import { createStore, ref } from \"reactivity-store\";\n\nimport type { DiffModeEnum, DiffViewProps, SplitSide } from \"./DiffView\";\nimport type { RefObject } from \"react\";\n\nexport const createDiffConfigStore = (props: DiffViewProps<any> & { isMounted: boolean }, diffFileId: string) => {\n  return createStore(() => {\n    const id = ref(diffFileId);\n\n    const setId = (_id: string) => (id.value = _id);\n\n    const mode = ref(props.diffViewMode);\n\n    const setMode = (_mode: DiffModeEnum) => (mode.value = _mode);\n\n    const mounted = ref(props.isMounted);\n\n    const setMounted = (_mounted: boolean) => (mounted.value = _mounted);\n\n    const enableWrap = ref(props.diffViewWrap);\n\n    const setEnableWrap = (_enableWrap: boolean) => (enableWrap.value = _enableWrap);\n\n    const enableAddWidget = ref(props.diffViewAddWidget);\n\n    const setEnableAddWidget = (_enableAddWidget: boolean) => (enableAddWidget.value = _enableAddWidget);\n\n    const enableHighlight = ref(props.diffViewHighlight);\n\n    const setEnableHighlight = (_enableHighlight: boolean) => (enableHighlight.value = _enableHighlight);\n\n    const fontSize = ref(props.diffViewFontSize);\n\n    const setFontSize = (_fontSize: number) => (fontSize.value = _fontSize);\n\n    const extendData = ref({\n      oldFile: { ...props.extendData?.oldFile },\n      newFile: { ...props.extendData?.newFile },\n    });\n\n    const setExtendData = (_extendData: DiffViewProps<any>[\"extendData\"]) => {\n      const existOldKeys = Object.keys(extendData.value.oldFile || {});\n      const inComingOldKeys = Object.keys(_extendData.oldFile || {});\n      for (const key of existOldKeys) {\n        if (!inComingOldKeys.includes(key)) {\n          delete extendData.value.oldFile[key];\n        }\n      }\n      for (const key of inComingOldKeys) {\n        extendData.value.oldFile[key] = _extendData.oldFile[key];\n      }\n      const existNewKeys = Object.keys(extendData.value.newFile || {});\n      const inComingNewKeys = Object.keys(_extendData.newFile || {});\n      for (const key of existNewKeys) {\n        if (!inComingNewKeys.includes(key)) {\n          delete extendData.value.newFile[key];\n        }\n      }\n      for (const key of inComingNewKeys) {\n        extendData.value.newFile[key] = _extendData.newFile[key];\n      }\n    };\n\n    const renderWidgetLine = ref(props.renderWidgetLine);\n\n    const setRenderWidgetLine = (_renderWidgetLine: typeof renderWidgetLine.value) =>\n      (renderWidgetLine.value = _renderWidgetLine);\n\n    const renderExtendLine = ref(props.renderExtendLine);\n\n    const setRenderExtendLine = (_renderExtendLine: typeof renderExtendLine.value) =>\n      (renderExtendLine.value = _renderExtendLine);\n\n    const onCreateUseWidgetHook = ref(props.onCreateUseWidgetHook);\n\n    const setOnCreateUseWidgetHook = (_onCreateUseWidgetHook: typeof onCreateUseWidgetHook.value) =>\n      (onCreateUseWidgetHook.value = _onCreateUseWidgetHook);\n\n    // \n    const onAddWidgetClick = { current: props.onAddWidgetClick };\n\n    const setOnAddWidgetClick = (_onAddWidgetClick: typeof onAddWidgetClick) =>\n      (onAddWidgetClick.current = _onAddWidgetClick.current);\n\n    return {\n      id,\n      setId,\n      mode,\n      setMode,\n      mounted,\n      setMounted,\n      enableWrap,\n      setEnableWrap,\n      enableAddWidget,\n      setEnableAddWidget,\n      enableHighlight,\n      setEnableHighlight,\n      fontSize,\n      setFontSize,\n      extendData,\n      setExtendData,\n      renderWidgetLine,\n      setRenderWidgetLine,\n      renderExtendLine,\n      setRenderExtendLine,\n      onAddWidgetClick,\n      setOnAddWidgetClick,\n      onCreateUseWidgetHook,\n      setOnCreateUseWidgetHook,\n    };\n  });\n};\n\nexport const createDiffWidgetStore = (useDiffContextRef: RefObject<ReturnType<typeof createDiffConfigStore>>) => {\n  return createStore(() => {\n    const widgetSide = ref<SplitSide>(undefined);\n\n    const widgetLineNumber = ref<number>(undefined);\n\n    const setWidget = ({ side, lineNumber }: { side?: SplitSide; lineNumber?: number }) => {\n      const { renderWidgetLine } = useDiffContextRef.current?.getReadonlyState?.() || {};\n\n      if (typeof renderWidgetLine !== \"function\") return;\n\n      widgetSide.value = side;\n\n      widgetLineNumber.value = lineNumber;\n    };\n\n    return { widgetSide, widgetLineNumber, setWidget };\n  });\n};\n", "import { memo, useEffect, useMemo, useRef } from \"react\";\nimport * as React from \"react\";\n\nimport { DiffSplitViewNormal } from \"./DiffSplitViewNormal\";\nimport { DiffSplitViewWrap } from \"./DiffSplitViewWrap\";\nimport { useDiffViewContext } from \"./DiffViewContext\";\nimport { DiffWidgetContext } from \"./DiffWidgetContext\";\nimport { createDiffWidgetStore } from \"./tools\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nexport const DiffSplitView = memo(({ diffFile }: { diffFile: DiffFile }) => {\n  const { useDiffContext } = useDiffViewContext();\n\n  const useDiffContextRef = useRef(useDiffContext);\n\n  useDiffContextRef.current = useDiffContext;\n\n  const { enableWrap, onCreateUseWidgetHook } = useDiffContext.useShallowStableSelector((s) => ({\n    enableWrap: s.enableWrap,\n    onCreateUseWidgetHook: s.onCreateUseWidgetHook,\n  }));\n\n  // performance optimization\n  const useWidget = useMemo(() => createDiffWidgetStore(useDiffContextRef), []);\n\n  const contextValue = useMemo(() => ({ useWidget }), [useWidget]);\n\n  useEffect(() => {\n    const { setWidget } = useWidget.getReadonlyState();\n\n    setWidget({});\n  }, [diffFile, useWidget]);\n\n  useEffect(() => {\n    onCreateUseWidgetHook?.(useWidget);\n  }, [useWidget, onCreateUseWidgetHook]);\n\n  return (\n    <DiffWidgetContext.Provider value={contextValue}>\n      {enableWrap ? <DiffSplitViewWrap diffFile={diffFile} /> : <DiffSplitViewNormal diffFile={diffFile} />}\n    </DiffWidgetContext.Provider>\n  );\n});\n\nDiffSplitView.displayName = \"DiffSplitView\";\n", "import { type DiffFile, type DiffLine, checkDiffLineIncludeChange, type File } from \"@git-diff-view/core\";\nimport {\n  diffAsideWidthName,\n  addContentBGName,\n  addLineNumberBGName,\n  delContentBGName,\n  delLineNumberBGName,\n  expandContentBGName,\n  plainContentBGName,\n  plainLineNumberBGName,\n  plainLineNumberColorName,\n  expandLineNumberColorName,\n} from \"@git-diff-view/utils\";\nimport * as React from \"react\";\nimport { memo } from \"react\";\n\nimport { SplitSide } from \"..\";\n\nimport { DiffUnifiedAddWidget } from \"./DiffAddWidget\";\nimport { DiffContent } from \"./DiffContent\";\nimport { useDiffViewContext } from \"./DiffViewContext\";\nimport { useDiffWidgetContext } from \"./DiffWidgetContext\";\n\nimport type { DiffViewProps } from \"..\";\n\nconst DiffUnifiedOldLine = ({\n  index,\n  diffLine,\n  rawLine,\n  plainLine,\n  syntaxLine,\n  lineNumber,\n  diffFile,\n  setWidget,\n  enableWrap,\n  enableAddWidget,\n  enableHighlight,\n  onAddWidgetClick,\n}: {\n  index: number;\n  lineNumber: number;\n  rawLine: string;\n  plainLine?: File[\"plainFile\"][number];\n  syntaxLine?: File[\"syntaxFile\"][number];\n  diffLine?: DiffLine;\n  diffFile: DiffFile;\n  enableWrap: boolean;\n  enableAddWidget: boolean;\n  enableHighlight: boolean;\n  onAddWidgetClick?: DiffViewProps<any>[\"onAddWidgetClick\"];\n  setWidget: (props: { side?: SplitSide; lineNumber?: number }) => void;\n}) => {\n  return (\n    <tr data-line={index} data-state=\"diff\" className=\"diff-line group\">\n      <td\n        className=\"diff-line-num sticky left-0 z-[1] w-[1%] min-w-[100px] select-none whitespace-nowrap pl-[10px] pr-[10px] text-right align-top\"\n        style={{\n          color: `var(${plainLineNumberColorName})`,\n          backgroundColor: `var(${delLineNumberBGName})`,\n          width: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n          maxWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n          minWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n        }}\n      >\n        {enableAddWidget && (\n          <DiffUnifiedAddWidget\n            index={index - 1}\n            lineNumber={lineNumber}\n            diffFile={diffFile}\n            side={SplitSide.old}\n            onWidgetClick={onAddWidgetClick}\n            onOpenAddWidget={(lineNumber, side) => setWidget({ lineNumber, side })}\n          />\n        )}\n        <div className=\"flex\">\n          <span data-line-old-num={lineNumber} className=\"inline-block w-[50%]\">\n            {lineNumber}\n          </span>\n          <span className=\"w-[10px] shrink-0\" />\n          <span className=\"inline-block w-[50%]\" />\n        </div>\n      </td>\n      <td className=\"diff-line-content pr-[10px] align-top\" style={{ backgroundColor: `var(${delContentBGName})` }}>\n        <DiffContent\n          enableWrap={enableWrap}\n          diffFile={diffFile}\n          enableHighlight={enableHighlight}\n          rawLine={rawLine}\n          diffLine={diffLine}\n          plainLine={plainLine}\n          syntaxLine={syntaxLine}\n        />\n      </td>\n    </tr>\n  );\n};\n\nconst DiffUnifiedNewLine = ({\n  index,\n  diffLine,\n  rawLine,\n  plainLine,\n  syntaxLine,\n  lineNumber,\n  diffFile,\n  setWidget,\n  enableWrap,\n  enableAddWidget,\n  enableHighlight,\n  onAddWidgetClick,\n}: {\n  index: number;\n  lineNumber: number;\n  rawLine: string;\n  plainLine?: File[\"plainFile\"][number];\n  syntaxLine?: File[\"syntaxFile\"][number];\n  diffLine?: DiffLine;\n  diffFile: DiffFile;\n  enableWrap: boolean;\n  enableAddWidget: boolean;\n  enableHighlight: boolean;\n  onAddWidgetClick?: DiffViewProps<any>[\"onAddWidgetClick\"];\n  setWidget: (props: { side?: SplitSide; lineNumber?: number }) => void;\n}) => {\n  return (\n    <tr data-line={index} data-state=\"diff\" className=\"diff-line group\">\n      <td\n        className=\"diff-line-num sticky left-0 z-[1] w-[1%] min-w-[100px] select-none whitespace-nowrap pl-[10px] pr-[10px] text-right align-top\"\n        style={{\n          color: `var(${plainLineNumberColorName})`,\n          backgroundColor: `var(${addLineNumberBGName})`,\n          width: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n          maxWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n          minWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n        }}\n      >\n        {enableAddWidget && (\n          <DiffUnifiedAddWidget\n            index={index - 1}\n            lineNumber={lineNumber}\n            diffFile={diffFile}\n            side={SplitSide.new}\n            onWidgetClick={onAddWidgetClick}\n            onOpenAddWidget={(lineNumber, side) => setWidget({ lineNumber, side })}\n          />\n        )}\n        <div className=\"flex\">\n          <span className=\"inline-block w-[50%]\" />\n          <span className=\"w-[10px] shrink-0\" />\n          <span data-line-new-num={lineNumber} className=\"inline-block w-[50%]\">\n            {lineNumber}\n          </span>\n        </div>\n      </td>\n      <td className=\"diff-line-content pr-[10px] align-top\" style={{ backgroundColor: `var(${addContentBGName})` }}>\n        <DiffContent\n          enableWrap={enableWrap}\n          diffFile={diffFile}\n          enableHighlight={enableHighlight}\n          rawLine={rawLine}\n          diffLine={diffLine}\n          plainLine={plainLine}\n          syntaxLine={syntaxLine}\n        />\n      </td>\n    </tr>\n  );\n};\n\nconst _DiffUnifiedLine = memo(\n  ({\n    index,\n    diffFile,\n    lineNumber,\n    enableWrap,\n    enableAddWidget,\n    enableHighlight,\n  }: {\n    index: number;\n    diffFile: DiffFile;\n    lineNumber: number;\n    enableWrap: boolean;\n    enableHighlight: boolean;\n    enableAddWidget: boolean;\n  }) => {\n    const unifiedLine = diffFile.getUnifiedLine(index);\n\n    const { useDiffContext } = useDiffViewContext();\n\n    const onAddWidgetClick = useDiffContext.getReadonlyState().onAddWidgetClick;\n\n    const { useWidget } = useDiffWidgetContext();\n\n    const setWidget = useWidget.getReadonlyState().setWidget;\n\n    const hasDiff = unifiedLine.diff;\n\n    const hasChange = checkDiffLineIncludeChange(unifiedLine.diff);\n\n    const rawLine = unifiedLine.value || \"\";\n\n    const diffLine = unifiedLine.diff;\n\n    const newLineNumber = unifiedLine.newLineNumber;\n\n    const oldLinenumber = unifiedLine.oldLineNumber;\n\n    const syntaxLine = newLineNumber\n      ? diffFile.getNewSyntaxLine(newLineNumber)\n      : oldLinenumber\n        ? diffFile.getOldSyntaxLine(oldLinenumber)\n        : undefined;\n\n    const plainLine = newLineNumber\n      ? diffFile.getNewPlainLine(newLineNumber)\n      : oldLinenumber\n        ? diffFile.getOldPlainLine(oldLinenumber)\n        : undefined;\n\n    if (hasChange) {\n      if (unifiedLine.oldLineNumber) {\n        return (\n          <DiffUnifiedOldLine\n            index={lineNumber}\n            enableWrap={enableWrap}\n            diffFile={diffFile}\n            rawLine={rawLine}\n            diffLine={diffLine}\n            setWidget={setWidget}\n            plainLine={plainLine}\n            syntaxLine={syntaxLine}\n            enableHighlight={enableHighlight}\n            enableAddWidget={enableAddWidget}\n            lineNumber={unifiedLine.oldLineNumber}\n            onAddWidgetClick={(...props) => onAddWidgetClick.current?.(...props)}\n          />\n        );\n      } else {\n        return (\n          <DiffUnifiedNewLine\n            index={lineNumber}\n            enableWrap={enableWrap}\n            rawLine={rawLine}\n            diffLine={diffLine}\n            diffFile={diffFile}\n            setWidget={setWidget}\n            plainLine={plainLine}\n            syntaxLine={syntaxLine}\n            enableHighlight={enableHighlight}\n            enableAddWidget={enableAddWidget}\n            lineNumber={unifiedLine.newLineNumber!}\n            onAddWidgetClick={(...props) => onAddWidgetClick.current?.(...props)}\n          />\n        );\n      }\n    } else {\n      return (\n        <tr data-line={lineNumber} data-state={unifiedLine.diff ? \"diff\" : \"plain\"} className=\"diff-line group\">\n          <td\n            className=\"diff-line-num sticky left-0 z-[1] w-[1%] min-w-[100px] select-none whitespace-nowrap pl-[10px] pr-[10px] text-right align-top\"\n            style={{\n              color: `var(${hasDiff ? plainLineNumberColorName : expandLineNumberColorName})`,\n              width: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n              maxWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n              minWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n              backgroundColor: hasDiff ? `var(${plainLineNumberBGName})` : `var(${expandContentBGName})`,\n            }}\n          >\n            {enableAddWidget && hasDiff && (\n              <DiffUnifiedAddWidget\n                index={index}\n                diffFile={diffFile}\n                lineNumber={unifiedLine.newLineNumber}\n                side={SplitSide.new}\n                onWidgetClick={(...props) => onAddWidgetClick.current?.(...props)}\n                onOpenAddWidget={(lineNumber, side) => setWidget({ lineNumber, side })}\n              />\n            )}\n            <div className=\"flex opacity-[0.5]\">\n              <span data-line-old-num={unifiedLine.oldLineNumber} className=\"inline-block w-[50%]\">\n                {unifiedLine.oldLineNumber}\n              </span>\n              <span className=\"w-[10px] shrink-0\" />\n              <span data-line-new-num={unifiedLine.newLineNumber} className=\"inline-block w-[50%]\">\n                {unifiedLine.newLineNumber}\n              </span>\n            </div>\n          </td>\n          <td\n            className=\"diff-line-content pr-[10px] align-top\"\n            style={{\n              backgroundColor: hasDiff ? `var(${plainContentBGName})` : `var(${expandContentBGName})`,\n            }}\n          >\n            <DiffContent\n              enableWrap={enableWrap}\n              diffFile={diffFile}\n              enableHighlight={enableHighlight}\n              rawLine={rawLine}\n              diffLine={diffLine}\n              plainLine={plainLine}\n              syntaxLine={syntaxLine}\n            />\n          </td>\n        </tr>\n      );\n    }\n  }\n);\n\n_DiffUnifiedLine.displayName = \"_DiffUnifiedLine\";\n\nexport const DiffUnifiedContentLine = ({\n  index,\n  diffFile,\n  lineNumber,\n  enableWrap,\n  enableHighlight,\n  enableAddWidget,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n  enableWrap: boolean;\n  enableHighlight: boolean;\n  enableAddWidget: boolean;\n}) => {\n  const unifiedLine = diffFile.getUnifiedLine(index);\n\n  if (unifiedLine?.isHidden) return null;\n\n  return (\n    <_DiffUnifiedLine\n      index={index}\n      diffFile={diffFile}\n      lineNumber={lineNumber}\n      enableWrap={enableWrap}\n      enableHighlight={enableHighlight}\n      enableAddWidget={enableAddWidget}\n    />\n  );\n};\n", "import * as React from \"react\";\nimport { useCallback } from \"react\";\n\nimport { SplitSide } from \"..\";\nimport { useDomWidth } from \"../hooks/useDomWidth\";\n\nimport { useDiffViewContext } from \"./DiffViewContext\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nconst InternalDiffUnifiedExtendLine = ({\n  index,\n  diffFile,\n  lineNumber,\n  oldLineExtend,\n  newLineExtend,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n  oldLineExtend: { data: any };\n  newLineExtend: { data: any };\n}) => {\n  const { useDiffContext } = useDiffViewContext();\n\n  const renderExtendLine = useDiffContext.useShallowStableSelector((s) => s.renderExtendLine);\n\n  const unifiedItem = diffFile.getUnifiedLine(index);\n\n  const width = useDomWidth({\n    selector: \".unified-diff-table-wrapper\",\n    enable: typeof renderExtendLine === \"function\",\n  });\n\n  if (!renderExtendLine) return null;\n\n  return (\n    <tr data-line={`${lineNumber}-extend`} data-state=\"extend\" className=\"diff-line diff-line-extend\">\n      <td className=\"diff-line-extend-content p-0 align-top\" colSpan={2}>\n        <div className=\"diff-line-extend-wrapper sticky left-0 z-[1]\" style={{ width }}>\n          {width > 0 &&\n            oldLineExtend?.data !== undefined &&\n            oldLineExtend?.data !== null &&\n            renderExtendLine?.({\n              diffFile,\n              side: SplitSide.old,\n              lineNumber: unifiedItem.oldLineNumber,\n              data: oldLineExtend.data,\n              onUpdate: diffFile.notifyAll,\n            })}\n          {width > 0 &&\n            newLineExtend?.data !== undefined &&\n            newLineExtend?.data !== null &&\n            renderExtendLine?.({\n              diffFile,\n              side: SplitSide.new,\n              lineNumber: unifiedItem.newLineNumber,\n              data: newLineExtend.data,\n              onUpdate: diffFile.notifyAll,\n            })}\n        </div>\n      </td>\n    </tr>\n  );\n};\n\nexport const DiffUnifiedExtendLine = ({\n  index,\n  diffFile,\n  lineNumber,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const { useDiffContext } = useDiffViewContext();\n\n  const unifiedItem = diffFile.getUnifiedLine(index);\n\n  const { oldLineExtend, newLineExtend } = useDiffContext(\n    useCallback(\n      (s) => ({\n        oldLineExtend: s.extendData?.oldFile?.[unifiedItem?.oldLineNumber],\n        newLineExtend: s.extendData?.newFile?.[unifiedItem?.newLineNumber],\n      }),\n      [unifiedItem.oldLineNumber, unifiedItem.newLineNumber]\n    )\n  );\n\n  const hasExtend = oldLineExtend?.data || newLineExtend?.data;\n\n  if (!hasExtend || !unifiedItem || unifiedItem.isHidden) return null;\n\n  return (\n    <InternalDiffUnifiedExtendLine\n      index={index}\n      diffFile={diffFile}\n      lineNumber={lineNumber}\n      oldLineExtend={oldLineExtend}\n      newLineExtend={newLineExtend}\n    />\n  );\n};\n", "import { composeLen } from \"@git-diff-view/core\";\nimport {\n  diffAsideWidthName,\n  hunkContentBGName,\n  hunkContentColorName,\n  hunkLineNumberBGName,\n  plainLineNumberColorName,\n} from \"@git-diff-view/utils\";\nimport * as React from \"react\";\n\nimport { ExpandAll, ExpandDown, ExpandUp } from \"./DiffExpand\";\nimport { useDiffViewContext } from \"./DiffViewContext\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nconst InternalDiffUnifiedHunkLine = ({\n  index,\n  diffFile,\n  lineNumber,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const currentHunk = diffFile.getUnifiedHunkLine(index);\n\n  const expandEnabled = diffFile.getExpandEnabled();\n\n  const { useDiffContext } = useDiffViewContext();\n\n  const enableWrap = useDiffContext.useShallowStableSelector((s) => s.enableWrap);\n\n  const couldExpand = expandEnabled && currentHunk && currentHunk.unifiedInfo;\n\n  const isExpandAll =\n    currentHunk &&\n    currentHunk.unifiedInfo &&\n    currentHunk.unifiedInfo.endHiddenIndex - currentHunk.unifiedInfo.startHiddenIndex < composeLen;\n\n  const isFirstLine = currentHunk && currentHunk.isFirst;\n\n  const isLastLine = currentHunk && currentHunk.isLast;\n\n  return (\n    <tr data-line={`${lineNumber}-hunk`} data-state=\"hunk\" className=\"diff-line diff-line-hunk\">\n      <td\n        className=\"diff-line-hunk-action sticky left-0 w-[1%] min-w-[100px] select-none p-[1px]\"\n        style={{\n          backgroundColor: `var(${hunkLineNumberBGName})`,\n          color: `var(${plainLineNumberColorName})`,\n          width: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n          maxWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n          minWidth: `calc(calc(var(${diffAsideWidthName}) + 5px) * 2)`,\n        }}\n      >\n        {couldExpand ? (\n          isFirstLine ? (\n            <button\n              className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n              title=\"Expand Up\"\n              data-title=\"Expand Up\"\n              onClick={() => diffFile.onUnifiedHunkExpand(\"up\", index)}\n            >\n              <ExpandUp className=\"fill-current\" />\n            </button>\n          ) : isLastLine ? (\n            <button\n              className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n              title=\"Expand Down\"\n              data-title=\"Expand Down\"\n              onClick={() => diffFile.onUnifiedHunkExpand(\"down\", index)}\n            >\n              <ExpandDown className=\"fill-current\" />\n            </button>\n          ) : isExpandAll ? (\n            <button\n              className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[6px]\"\n              title=\"Expand All\"\n              data-title=\"Expand All\"\n              onClick={() => diffFile.onUnifiedHunkExpand(\"all\", index)}\n            >\n              <ExpandAll className=\"fill-current\" />\n            </button>\n          ) : (\n            <>\n              <button\n                className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                title=\"Expand Down\"\n                data-title=\"Expand Down\"\n                onClick={() => diffFile.onUnifiedHunkExpand(\"down\", index)}\n              >\n                <ExpandDown className=\"fill-current\" />\n              </button>\n              <button\n                className=\"diff-widget-tooltip flex w-full cursor-pointer items-center justify-center rounded-[2px] py-[2px]\"\n                title=\"Expand Up\"\n                data-title=\"Expand Up\"\n                onClick={() => diffFile.onUnifiedHunkExpand(\"up\", index)}\n              >\n                <ExpandUp className=\"fill-current\" />\n              </button>\n            </>\n          )\n        ) : (\n          <div className=\"min-h-[28px]\">&ensp;</div>\n        )}\n      </td>\n      <td\n        className=\"diff-line-hunk-content pr-[10px] align-middle\"\n        style={{ backgroundColor: `var(${hunkContentBGName})` }}\n      >\n        <div\n          className=\"pl-[1.5em]\"\n          style={{\n            whiteSpace: enableWrap ? \"pre-wrap\" : \"pre\",\n            wordBreak: enableWrap ? \"break-all\" : \"initial\",\n            color: `var(${hunkContentColorName})`,\n          }}\n        >\n          {currentHunk.unifiedInfo?.plainText || currentHunk.text}\n        </div>\n      </td>\n    </tr>\n  );\n};\n\nexport const DiffUnifiedHunkLine = ({\n  index,\n  diffFile,\n  lineNumber,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const currentHunk = diffFile.getUnifiedHunkLine(index);\n\n  const currentIsShow =\n    currentHunk &&\n    currentHunk.unifiedInfo &&\n    currentHunk.unifiedInfo.startHiddenIndex < currentHunk.unifiedInfo.endHiddenIndex;\n\n  const currentIsPureHunk = currentHunk && diffFile._getIsPureDiffRender() && !currentHunk.unifiedInfo;\n\n  if (!currentIsShow && !currentIsPureHunk) return null;\n\n  return <InternalDiffUnifiedHunkLine index={index} diffFile={diffFile} lineNumber={lineNumber} />;\n};\n", "import * as React from \"react\";\n\nimport { SplitSide } from \"..\";\nimport { useDomWidth } from \"../hooks/useDomWidth\";\n\nimport { useDiffViewContext } from \"./DiffViewContext\";\nimport { useDiffWidgetContext } from \"./DiffWidgetContext\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\n\nconst InternalDiffUnifiedWidgetLine = ({\n  index,\n  diffFile,\n  lineNumber,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const { useWidget } = useDiffWidgetContext();\n\n  const setWidget = useWidget.getReadonlyState().setWidget;\n\n  const unifiedItem = diffFile.getUnifiedLine(index);\n\n  const onClose = () => setWidget({});\n\n  const widgetSide = useWidget.getReadonlyState().widgetSide;\n\n  const widgetLineNumber = useWidget.getReadonlyState().widgetLineNumber;\n\n  const oldWidget =\n    unifiedItem.oldLineNumber && widgetSide === SplitSide.old && widgetLineNumber === unifiedItem.oldLineNumber;\n\n  const newWidget =\n    unifiedItem.newLineNumber && widgetSide === SplitSide.new && widgetLineNumber === unifiedItem.newLineNumber;\n\n  const { useDiffContext } = useDiffViewContext();\n\n  // \n  const renderWidgetLine = useDiffContext.useShallowStableSelector((s) => s.renderWidgetLine);\n\n  const width = useDomWidth({\n    selector: \".unified-diff-table-wrapper\",\n    enable: typeof renderWidgetLine === \"function\",\n  });\n\n  if (!renderWidgetLine) return null;\n\n  return (\n    <tr data-line={`${lineNumber}-widget`} data-state=\"widget\" className=\"diff-line diff-line-widget\">\n      <td className=\"diff-line-widget-content p-0\" colSpan={2}>\n        <div className=\"diff-line-widget-wrapper sticky left-0 z-[1]\" style={{ width }}>\n          {width > 0 &&\n            oldWidget &&\n            renderWidgetLine?.({ diffFile, side: SplitSide.old, lineNumber: unifiedItem.oldLineNumber, onClose })}\n          {width > 0 &&\n            newWidget &&\n            renderWidgetLine?.({ diffFile, side: SplitSide.new, lineNumber: unifiedItem.newLineNumber, onClose })}\n        </div>\n      </td>\n    </tr>\n  );\n};\n\nexport const DiffUnifiedWidgetLine = ({\n  index,\n  diffFile,\n  lineNumber,\n}: {\n  index: number;\n  diffFile: DiffFile;\n  lineNumber: number;\n}) => {\n  const { useWidget } = useDiffWidgetContext();\n\n  const currentIsShow = useWidget.useShallowSelector(\n    React.useCallback(\n      (s) => {\n        const widgetLineNumber = s.widgetLineNumber;\n\n        const widgetSide = s.widgetSide;\n\n        const unifiedItem = diffFile.getUnifiedLine(index);\n\n        const oldWidget =\n          unifiedItem.oldLineNumber && widgetSide === SplitSide.old && widgetLineNumber === unifiedItem.oldLineNumber;\n\n        const newWidget =\n          unifiedItem.newLineNumber && widgetSide === SplitSide.new && widgetLineNumber === unifiedItem.newLineNumber;\n\n        const currentIsShow = oldWidget || newWidget;\n\n        return currentIsShow;\n      },\n      [diffFile, index]\n    ),\n    (p, c) => p === c\n  );\n\n  if (!currentIsShow) return null;\n\n  return <InternalDiffUnifiedWidgetLine index={index} diffFile={diffFile} lineNumber={lineNumber} />;\n};\n", "/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { getUnifiedContentLine, SplitSide } from \"@git-diff-view/core\";\nimport { diffFontSizeName, removeAllSelection, diffAsideWidthName } from \"@git-diff-view/utils\";\nimport * as React from \"react\";\nimport { Fragment, memo, useEffect, useMemo, useRef } from \"react\";\nimport { useSyncExternalStore } from \"use-sync-external-store/shim/index.js\";\n\nimport { useTextWidth } from \"../hooks/useTextWidth\";\n\nimport { DiffUnifiedContentLine } from \"./DiffUnifiedContentLine\";\nimport { DiffUnifiedExtendLine } from \"./DiffUnifiedExtendLine\";\nimport { DiffUnifiedHunkLine } from \"./DiffUnifiedHunkLine\";\nimport { DiffUnifiedWidgetLine } from \"./DiffUnifiedWidgetLine\";\nimport { useDiffViewContext } from \"./DiffViewContext\";\nimport { DiffWidgetContext } from \"./DiffWidgetContext\";\nimport { createDiffWidgetStore } from \"./tools\";\n\nimport type { DiffFile } from \"@git-diff-view/core\";\nimport type { MouseEventHandler } from \"react\";\n\nexport const DiffUnifiedView = memo(({ diffFile }: { diffFile: DiffFile }) => {\n  const { useDiffContext } = useDiffViewContext();\n\n  const ref = useRef<HTMLStyleElement>(null);\n\n  const tempRef = useRef<SplitSide>();\n\n  const useDiffContextRef = useRef(useDiffContext);\n\n  useDiffContextRef.current = useDiffContext;\n\n  // performance optimization\n  const useWidget = useMemo(() => createDiffWidgetStore(useDiffContextRef), []);\n\n  const contextValue = useMemo(() => ({ useWidget }), [useWidget]);\n\n  const { fontSize, enableWrap, enableHighlight, enableAddWidget, onCreateUseWidgetHook } =\n    useDiffContext.useShallowStableSelector((s) => ({\n      fontSize: s.fontSize,\n      enableWrap: s.enableWrap,\n      enableHighlight: s.enableHighlight,\n      enableAddWidget: s.enableAddWidget,\n      onCreateUseWidgetHook: s.onCreateUseWidgetHook,\n    }));\n\n  useSyncExternalStore(diffFile.subscribe, diffFile.getUpdateCount, diffFile.getUpdateCount);\n\n  useEffect(() => {\n    const { setWidget } = useWidget.getReadonlyState();\n\n    setWidget({});\n  }, [diffFile, useWidget]);\n\n  useEffect(() => {\n    onCreateUseWidgetHook?.(useWidget);\n  }, [useWidget, onCreateUseWidgetHook]);\n\n  const unifiedLineLength = Math.max(diffFile.unifiedLineLength, diffFile.fileLineLength);\n\n  const _width = useTextWidth({\n    text: unifiedLineLength.toString(),\n    font: useMemo(() => ({ fontSize: fontSize + \"px\", fontFamily: \"Menlo, Consolas, monospace\" }), [fontSize]),\n  });\n\n  const width = Math.max(40, _width + 10);\n\n  const lines = getUnifiedContentLine(diffFile);\n\n  const setStyle = (side: SplitSide) => {\n    if (!ref.current) return;\n    if (!side) {\n      ref.current.textContent = \"\";\n    } else {\n      const id = `diff-root${diffFile.getId()}`;\n      ref.current.textContent = `#${id} [data-state=\"extend\"] {user-select: none} \\n#${id} [data-state=\"hunk\"] {user-select: none} \\n#${id} [data-state=\"widget\"] {user-select: none}`;\n    }\n  };\n\n  const onMouseDown: MouseEventHandler<HTMLTableSectionElement> = (e) => {\n    let ele = e.target;\n\n    // need remove all the selection\n    if (ele && ele instanceof HTMLElement && ele.nodeName === \"BUTTON\") {\n      removeAllSelection();\n      return;\n    }\n\n    while (ele && ele instanceof HTMLElement) {\n      const state = ele.getAttribute(\"data-state\");\n      if (state) {\n        if (state === \"extend\" || state === \"hunk\" || state === \"widget\") {\n          if (tempRef.current !== undefined) {\n            tempRef.current = undefined;\n            setStyle(undefined);\n            removeAllSelection();\n          }\n          return;\n        } else {\n          if (tempRef.current !== SplitSide.new) {\n            tempRef.current = SplitSide.new;\n            setStyle(SplitSide.new);\n            removeAllSelection();\n          }\n          return;\n        }\n      }\n\n      ele = ele.parentElement;\n    }\n  };\n\n  return (\n    <DiffWidgetContext.Provider value={contextValue}>\n      <div className={`unified-diff-view ${enableWrap ? \"unified-diff-view-wrap\" : \"unified-diff-view-normal\"} w-full`}>\n        <style data-select-style ref={ref} />\n        <div\n          className=\"unified-diff-table-wrapper diff-table-scroll-container w-full overflow-x-auto overflow-y-hidden\"\n          style={{\n            // @ts-ignore\n            [diffAsideWidthName]: `${Math.round(width)}px`,\n            fontFamily: \"Menlo, Consolas, monospace\",\n            fontSize: `var(${diffFontSizeName})`,\n          }}\n        >\n          <table\n            className={`unified-diff-table w-full border-collapse border-spacing-0 ${enableWrap ? \"table-fixed\" : \"\"}`}\n          >\n            <colgroup>\n              <col className=\"unified-diff-table-num-col\" />\n              <col className=\"unified-diff-table-content-col\" />\n            </colgroup>\n            <thead className=\"hidden\">\n              <tr>\n                <th scope=\"col\">line number</th>\n                <th scope=\"col\">line content</th>\n              </tr>\n            </thead>\n            <tbody className=\"diff-table-body leading-[1.4]\" onMouseDownCapture={onMouseDown}>\n              {lines.map((item) => (\n                <Fragment key={item.index}>\n                  <DiffUnifiedHunkLine index={item.index} lineNumber={item.lineNumber} diffFile={diffFile} />\n                  <DiffUnifiedContentLine\n                    index={item.index}\n                    lineNumber={item.lineNumber}\n                    diffFile={diffFile}\n                    enableWrap={enableWrap}\n                    enableHighlight={enableHighlight}\n                    enableAddWidget={enableAddWidget}\n                  />\n                  <DiffUnifiedWidgetLine index={item.index} lineNumber={item.lineNumber} diffFile={diffFile} />\n                  <DiffUnifiedExtendLine index={item.index} lineNumber={item.lineNumber} diffFile={diffFile} />\n                </Fragment>\n              ))}\n              <DiffUnifiedHunkLine\n                index={diffFile.unifiedLineLength}\n                lineNumber={diffFile.unifiedLineLength}\n                diffFile={diffFile}\n              />\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </DiffWidgetContext.Provider>\n  );\n});\n\nDiffUnifiedView.displayName = \"DiffUnifiedView\";\n", "/* eslint-disable @typescript-eslint/no-unnecessary-type-constraint */\n/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { DiffFile, _cacheMap, SplitSide } from \"@git-diff-view/core\";\nimport { diffFontSizeName, DiffModeEnum } from \"@git-diff-view/utils\";\nimport { memo, useEffect, useMemo, forwardRef, useImperativeHandle, useRef } from \"react\";\nimport * as React from \"react\";\n\nimport { useIsMounted } from \"../hooks/useIsMounted\";\nimport { useUnmount } from \"../hooks/useUnmount\";\n\nimport { DiffSplitView } from \"./DiffSplitView\";\nimport { DiffUnifiedView } from \"./DiffUnifiedView\";\nimport { DiffViewContext } from \"./DiffViewContext\";\nimport { createDiffConfigStore } from \"./tools\";\n// import { DiffSplitView } from \"./v2/DiffSplitView_v2\";\n\nimport type { createDiffWidgetStore } from \"./tools\";\nimport type { DiffHighlighter, DiffHighlighterLang } from \"@git-diff-view/core\";\nimport type { CSSProperties, ForwardedRef, ReactNode, RefObject } from \"react\";\n\n_cacheMap.name = \"@git-diff-view/react\";\n\nexport { SplitSide, DiffModeEnum };\n\nexport type DiffViewProps<T> = {\n  data?: {\n    oldFile?: { fileName?: string | null; fileLang?: DiffHighlighterLang | string | null; content?: string | null };\n    newFile?: { fileName?: string | null; fileLang?: DiffHighlighterLang | string | null; content?: string | null };\n    hunks: string[];\n  };\n  extendData?: { oldFile?: Record<string, { data: T }>; newFile?: Record<string, { data: T }> };\n  diffFile?: DiffFile;\n  className?: string;\n  style?: CSSProperties;\n  /**\n   * provide a custom highlighter\n   * eg: lowlight, refractor, starry-night, shiki\n   */\n  registerHighlighter?: Omit<DiffHighlighter, \"getHighlighterEngine\">;\n  diffViewMode?: DiffModeEnum;\n  diffViewWrap?: boolean;\n  diffViewTheme?: \"light\" | \"dark\";\n  diffViewFontSize?: number;\n  diffViewHighlight?: boolean;\n  diffViewAddWidget?: boolean;\n  renderWidgetLine?: ({\n    diffFile,\n    side,\n    lineNumber,\n    onClose,\n  }: {\n    lineNumber: number;\n    side: SplitSide;\n    diffFile: DiffFile;\n    onClose: () => void;\n  }) => ReactNode;\n  renderExtendLine?: ({\n    diffFile,\n    side,\n    data,\n    lineNumber,\n    onUpdate,\n  }: {\n    lineNumber: number;\n    side: SplitSide;\n    data: T;\n    diffFile: DiffFile;\n    onUpdate: () => void;\n  }) => ReactNode;\n  onAddWidgetClick?: (lineNumber: number, side: SplitSide) => void;\n  onCreateUseWidgetHook?: (hook: ReturnType<typeof createDiffWidgetStore>) => void;\n};\n\ntype DiffViewProps_1<T> = Omit<DiffViewProps<T>, \"data\"> & {\n  data?: {\n    oldFile?: { fileName?: string | null; fileLang?: DiffHighlighterLang | null; content?: string | null };\n    newFile?: { fileName?: string | null; fileLang?: DiffHighlighterLang | null; content?: string | null };\n    hunks: string[];\n  };\n};\n\ntype DiffViewProps_2<T> = Omit<DiffViewProps<T>, \"data\"> & {\n  data?: {\n    oldFile?: { fileName?: string | null; fileLang?: string | null; content?: string | null };\n    newFile?: { fileName?: string | null; fileLang?: string | null; content?: string | null };\n    hunks: string[];\n  };\n};\n\nconst InternalDiffView = <T extends unknown>(\n  props: Omit<DiffViewProps<T>, \"data\" | \"registerHighlighter\"> & {\n    isMounted: boolean;\n    wrapperRef?: RefObject<HTMLDivElement>;\n  }\n) => {\n  const {\n    diffFile,\n    className,\n    style,\n    wrapperRef,\n    diffViewMode,\n    diffViewWrap,\n    diffViewFontSize,\n    diffViewHighlight,\n    renderWidgetLine,\n    renderExtendLine,\n    extendData,\n    diffViewAddWidget,\n    onAddWidgetClick,\n    onCreateUseWidgetHook,\n    isMounted,\n  } = props;\n\n  const diffFileId = useMemo(() => diffFile.getId(), [diffFile]);\n\n  // performance optimization\n  const useDiffContext = useMemo(\n    () => createDiffConfigStore(props, diffFileId),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  useEffect(() => {\n    const {\n      id,\n      setId,\n      mode,\n      setMode,\n      mounted,\n      setMounted,\n      enableAddWidget,\n      setEnableAddWidget,\n      enableHighlight,\n      setEnableHighlight,\n      enableWrap,\n      setEnableWrap,\n      setExtendData,\n      fontSize,\n      setFontSize,\n      onAddWidgetClick: _onAddWidgetClick,\n      setOnAddWidgetClick,\n      renderExtendLine: _renderExtendLine,\n      setRenderExtendLine,\n      renderWidgetLine: _renderWidgetLine,\n      setRenderWidgetLine,\n      onCreateUseWidgetHook: _onCreateUseWidgetHook,\n      setOnCreateUseWidgetHook,\n    } = useDiffContext.getReadonlyState();\n\n    if (diffFileId && diffFileId !== id) {\n      setId(diffFileId);\n    }\n\n    if (diffViewMode && diffViewMode !== mode) {\n      setMode(diffViewMode);\n    }\n\n    if (mounted !== isMounted) {\n      setMounted(isMounted);\n    }\n\n    if (diffViewAddWidget !== enableAddWidget) {\n      setEnableAddWidget(diffViewAddWidget);\n    }\n\n    if (diffViewHighlight !== enableHighlight) {\n      setEnableHighlight(diffViewHighlight);\n    }\n\n    if (diffViewWrap !== enableWrap) {\n      setEnableWrap(diffViewWrap);\n    }\n\n    if (extendData) {\n      setExtendData(extendData);\n    }\n\n    if (diffViewFontSize && diffViewFontSize !== fontSize) {\n      setFontSize(diffViewFontSize);\n    }\n\n    if (onAddWidgetClick !== _onAddWidgetClick.current) {\n      setOnAddWidgetClick({ current: onAddWidgetClick });\n    }\n\n    if (onCreateUseWidgetHook !== _onCreateUseWidgetHook) {\n      setOnCreateUseWidgetHook(onCreateUseWidgetHook);\n    }\n\n    if (renderExtendLine !== _renderExtendLine) {\n      setRenderExtendLine(renderExtendLine);\n    }\n\n    if (renderWidgetLine !== _renderWidgetLine) {\n      setRenderWidgetLine(renderWidgetLine);\n    }\n  }, [\n    useDiffContext,\n    diffViewFontSize,\n    diffViewHighlight,\n    diffViewMode,\n    diffViewWrap,\n    diffViewAddWidget,\n    diffFileId,\n    isMounted,\n    renderWidgetLine,\n    renderExtendLine,\n    extendData,\n    onAddWidgetClick,\n    onCreateUseWidgetHook,\n  ]);\n\n  const value = useMemo(() => ({ useDiffContext }), [useDiffContext]);\n\n  return (\n    <DiffViewContext.Provider value={value}>\n      <div\n        className=\"diff-tailwindcss-wrapper\"\n        data-component=\"git-diff-view\"\n        data-theme={diffFile._getTheme() || \"light\"}\n        data-version={__VERSION__}\n        data-highlighter={diffFile._getHighlighterName()}\n        ref={wrapperRef}\n      >\n        <div\n          className=\"diff-style-root\"\n          style={{\n            // @ts-ignore\n            [diffFontSizeName]: diffViewFontSize + \"px\",\n          }}\n        >\n          <div\n            id={isMounted ? `diff-root${diffFileId}` : undefined}\n            className={\"diff-view-wrapper\" + (className ? ` ${className}` : \"\")}\n            style={style}\n          >\n            {diffViewMode & DiffModeEnum.Split ? (\n              <DiffSplitView diffFile={diffFile} />\n            ) : (\n              <DiffUnifiedView diffFile={diffFile} />\n            )}\n          </div>\n        </div>\n      </div>\n    </DiffViewContext.Provider>\n  );\n};\n\nconst MemoedInternalDiffView = memo(InternalDiffView);\n\nconst DiffViewWithRef = <T extends unknown>(\n  props: DiffViewProps<T>,\n  ref: ForwardedRef<{ getDiffFileInstance: () => DiffFile }>\n) => {\n  const { registerHighlighter, data, diffViewTheme, diffFile: _diffFile, ...restProps } = props;\n\n  const diffFile = useMemo(() => {\n    if (_diffFile) {\n      // missing data for plain file render\n      // TODO next release update ?\n      // will cause more complex for diffFile flow control, keep current\n      const diffFile = DiffFile.createInstance({});\n      diffFile._mergeFullBundle(_diffFile._getFullBundle());\n      return diffFile;\n    } else if (data) {\n      return new DiffFile(\n        data?.oldFile?.fileName || \"\",\n        data?.oldFile?.content || \"\",\n        data?.newFile?.fileName || \"\",\n        data?.newFile?.content || \"\",\n        data?.hunks || [],\n        data?.oldFile?.fileLang || \"\",\n        data?.newFile?.fileLang || \"\"\n      );\n    }\n    return null;\n  }, [data, _diffFile]);\n\n  const diffFileRef = useRef(diffFile);\n\n  const wrapperRef = useRef<HTMLDivElement>();\n\n  if (diffFileRef.current && diffFileRef.current !== diffFile) {\n    diffFileRef.current.clear?.();\n    diffFileRef.current = diffFile;\n  }\n\n  const isMounted = useIsMounted();\n\n  useEffect(() => {\n    if (_diffFile && diffFile) {\n      _diffFile._addClonedInstance(diffFile);\n      return () => {\n        _diffFile._delClonedInstance(diffFile);\n      };\n    }\n  }, [diffFile, _diffFile]);\n\n  useEffect(() => {\n    if (!diffFile) return;\n    diffFile.initTheme(diffViewTheme);\n    diffFile.initRaw();\n    diffFile.buildSplitDiffLines();\n    diffFile.buildUnifiedDiffLines();\n  }, [diffFile, diffViewTheme]);\n\n  useEffect(() => {\n    if (!diffFile) return;\n    \n    if (props.diffViewHighlight) {\n      diffFile.initSyntax({ registerHighlighter });\n      diffFile.notifyAll();\n    }\n  }, [diffFile, props.diffViewHighlight, registerHighlighter]);\n\n  useEffect(() => {\n    if (!diffFile) return;\n\n    const init = () => {\n      wrapperRef.current?.setAttribute(\"data-theme\", diffFile._getTheme() || \"light\");\n      wrapperRef.current?.setAttribute(\"data-highlighter\", diffFile._getHighlighterName());\n    };\n\n    init();\n\n    const cb = diffFile.subscribe(init);\n\n    return cb;\n  }, [diffFile, diffViewTheme]);\n\n  // fix react strict mode error\n  useUnmount(() => (__DEV__ ? diffFile?._destroy?.() : diffFile?.clear?.()), [diffFile]);\n\n  useImperativeHandle(ref, () => ({ getDiffFileInstance: () => diffFile }), [diffFile]);\n\n  if (!diffFile) return null;\n\n  return (\n    <MemoedInternalDiffView\n      key={diffFile.getId()}\n      {...restProps}\n      diffFile={diffFile}\n      isMounted={isMounted}\n      wrapperRef={wrapperRef}\n      diffViewTheme={diffViewTheme}\n      diffViewMode={restProps.diffViewMode || DiffModeEnum.SplitGitHub}\n      diffViewFontSize={restProps.diffViewFontSize || 14}\n    />\n  );\n};\n\n// type helper function\nfunction ReactDiffView<T>(\n  props: DiffViewProps_1<T> & { ref?: ForwardedRef<{ getDiffFileInstance: () => DiffFile }> }\n): JSX.Element;\nfunction ReactDiffView<T>(\n  props: DiffViewProps_2<T> & { ref?: ForwardedRef<{ getDiffFileInstance: () => DiffFile }> }\n): JSX.Element;\nfunction ReactDiffView<T>(props: DiffViewProps<T> & { ref?: ForwardedRef<{ getDiffFileInstance: () => DiffFile }> }) {\n  return <DiffViewWithRef {...props} />;\n}\n\nconst InnerDiffView = forwardRef(DiffViewWithRef);\n\nInnerDiffView.displayName = \"DiffView\";\n\nexport const DiffView = InnerDiffView as typeof ReactDiffView;\n\nexport const version = __VERSION__;\n"],
  "mappings": "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",
  "names": ["self", "hasOwnProperty", "readonly", "InternalNameSpace", "instance", "traverse", "value", "ref", "instance", "_TextMeasure_getInstance", "NewLineSymbol", "DiffModeEnum", "ref", "width", "_b", "_a", "InternalDiffSplitLine", "lineNumber", "side", "DiffSplitContentLine", "cb", "InternalDiffSplitExtendLine", "DiffSplitExtendLine", "InternalDiffSplitHunkLine", "DiffSplitHunkLine", "InternalDiffSplitWidgetLine", "DiffSplitWidgetLine", "currentIsShow", "diffFile"]
}
