import {
  __commonJS,
  __toESM
} from "./chunk-OL46QLBJ.js";

// node_modules/escape-html/index.js
var require_escape_html = __commonJS({
  "node_modules/escape-html/index.js"(exports, module) {
    "use strict";
    var matchHtmlRegExp = /["'&<>]/;
    module.exports = escapeHtml;
    function escapeHtml(string) {
      var str = "" + string;
      var match = matchHtmlRegExp.exec(str);
      if (!match) {
        return str;
      }
      var escape;
      var html = "";
      var index = 0;
      var lastIndex = 0;
      for (index = match.index; index < str.length; index++) {
        switch (str.charCodeAt(index)) {
          case 34:
            escape = "&quot;";
            break;
          case 38:
            escape = "&amp;";
            break;
          case 39:
            escape = "&#39;";
            break;
          case 60:
            escape = "&lt;";
            break;
          case 62:
            escape = "&gt;";
            break;
          default:
            continue;
        }
        if (lastIndex !== index) {
          html += str.substring(lastIndex, index);
        }
        lastIndex = index + 1;
        html += escape;
      }
      return lastIndex !== index ? html + str.substring(lastIndex, index) : html;
    }
  }
});

// node_modules/fancy-ansi/dist/main.js
var import_escape_html = __toESM(require_escape_html());

// node_modules/fancy-ansi/dist/colors-B3F3SizO.js
var e = {
  black: "#2e3436",
  red: "#cc0000",
  green: "#4e9a06",
  yellow: "#c4a000",
  blue: "#3465a4",
  magenta: "#75507b",
  cyan: "#06989a",
  white: "#d3d7cf",
  "bright-black": "#555753",
  "bright-red": "#ef2929",
  "bright-green": "#8ae234",
  "bright-yellow": "#fce94f",
  "bright-blue": "#729fcf",
  "bright-magenta": "#ad7fa8",
  "bright-cyan": "#34e2e2",
  "bright-white": "#eeeeec"
};
var b = {
  black: "#000000",
  red: "#aa0000",
  green: "#00aa00",
  yellow: "#aa5500",
  blue: "#0000aa",
  magenta: "#aa00aa",
  cyan: "#00aaaa",
  white: "#aaaaaa",
  "bright-black": "#555555",
  "bright-red": "#ff5555",
  "bright-green": "#55ff55",
  "bright-yellow": "#ffff55",
  "bright-blue": "#5555ff",
  "bright-magenta": "#ff55ff",
  "bright-cyan": "#55ffff",
  "bright-white": "#ffffff"
};
var f = {
  black: "#000000",
  red: "#cd3131",
  green: "#0dbc79",
  yellow: "#e5e510",
  blue: "#2473c8",
  magenta: "#bc3fbc",
  cyan: "#11a7cd",
  white: "#e5e5e5",
  "bright-black": "#666666",
  "bright-red": "#f14c4c",
  "bright-green": "#23d18b",
  "bright-yellow": "#f5f5430",
  "bright-blue": "#3b8dea",
  "bright-magenta": "#d670d6",
  "bright-cyan": "#29b7db",
  "bright-white": "#e5e5e5"
};
var t = {
  black: "#0c0c0c",
  red: "#c50f1e",
  green: "#13a10e",
  yellow: "#c19a00",
  blue: "#0037da",
  magenta: "#891798",
  cyan: "#3a96dd",
  white: "#cccccc",
  "bright-black": "#767676",
  "bright-red": "#e74855",
  "bright-green": "#15c60c",
  "bright-yellow": "#f9f1a5",
  "bright-blue": "#3b79ff",
  "bright-magenta": "#b4009f",
  "bright-cyan": "#61d6d6",
  "bright-white": "#f2f2f2"
};
var a = {
  black: "#000000",
  red: "#990000",
  green: "#00a600",
  yellow: "#999900",
  blue: "#0000b2",
  magenta: "#b200b2",
  cyan: "#00a6b2",
  white: "#bfbfbf",
  "bright-black": "#666666",
  "bright-red": "#e60000",
  "bright-green": "#00d900",
  "bright-yellow": "#e6e600",
  "bright-blue": "#0000ff",
  "bright-magenta": "#e600e6",
  "bright-cyan": "#00e6e6",
  "bright-white": "#e6e6e6"
};
var r = {
  black: "#000000",
  red: "#bb0000",
  green: "#00bb00",
  yellow: "#bbbb00",
  blue: "#0000bb",
  magenta: "#bb00bb",
  cyan: "#00bbbb",
  white: "#bbbbbb",
  "bright-black": "#555555",
  "bright-red": "#ff5555",
  "bright-green": "#55ff55",
  "bright-yellow": "#ffff55",
  "bright-blue": "#5555ff",
  "bright-magenta": "#ff55ff",
  "bright-cyan": "#55ffff",
  "bright-white": "#ffffff"
};
var g = {
  black: "#000000",
  red: "#cd0000",
  green: "#00cd00",
  yellow: "#cdcd00",
  blue: "#0000ee",
  magenta: "#cd00cd",
  cyan: "#00cdcd",
  white: "#e5e5e5",
  "bright-black": "#7f7f7f",
  "bright-red": "#ff0000",
  "bright-green": "#00ff00",
  "bright-yellow": "#ffff00",
  "bright-blue": "#5c5cff",
  "bright-magenta": "#ff00ff",
  "bright-cyan": "#00ffff",
  "bright-white": "#ffffff"
};
var c = {
  black: "#010101",
  red: "#de382b",
  green: "#39b54a",
  yellow: "#ffc906",
  blue: "#006eb8",
  magenta: "#762671",
  cyan: "#2cb3e9",
  white: "#cccccc",
  "bright-black": "#808080",
  "bright-red": "#ff0000",
  "bright-green": "#00ff00",
  "bright-yellow": "#ffff00",
  "bright-blue": "#0000ff",
  "bright-magenta": "#ff00ff",
  "bright-cyan": "#00ffff",
  "bright-white": "#ffffff"
};
var i = {
  black: "#000000",
  red: "#cd0000",
  green: "#00cd00",
  yellow: "#cdcd00",
  blue: "#0000ee",
  magenta: "#cd00cd",
  cyan: "#00cdcd",
  white: "#e5e5e5",
  "bright-black": "#000000",
  "bright-red": "#ff0000",
  "bright-green": "#00ff00",
  "bright-yellow": "#ffff00",
  "bright-blue": "#5c5cff",
  "bright-magenta": "#ff00ff",
  "bright-cyan": "#00ffff",
  "bright-white": "#ffffff"
};
var h = Object.freeze(Object.defineProperty({
  __proto__: null,
  eclipse: i,
  putty: r,
  terminalapp: a,
  ubuntu: c,
  vga: b,
  vscode: f,
  windows10: t,
  xterm: g,
  xtermjs: e
}, Symbol.toStringTag, { value: "Module" }));

// node_modules/fancy-ansi/dist/main.js
function g2({ onlyFirst: l = false } = {}) {
  const r2 = [
    "[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))",
    "(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"
  ].join("|");
  return new RegExp(r2, l ? void 0 : "g");
}
var $ = /^(?:\x1b\[([\x3c-\x3f]?)([\d;]*)([\x20-\x2f]?[\x40-\x7e]))|(?:\x1b\[[\x20-\x7e]*([\x00-\x1f:]))/;
var p = /^\x1b\]8;[\x20-\x3a\x3c-\x7e]*;([\x21-\x7e]{0,512})(?:(?:\x1b\\)|(?:\x07))([\x20-\x7e]+)\x1b\]8;;(?:(?:\x1b\\)|(?:\x07))/;
var m = /(?:(\x1b\\)|(\x07))|([\x00-\x06]|[\x08-\x1a]|[\x1c-\x1f])/g;
var w = class {
  constructor(n) {
    this.lastIndex = 0, this.input = n;
  }
  /**
   * Get the next parsed packet
   * @returns {IteratorResult<Packet>} The next parsed packet
   */
  next() {
    const n = this.input.substring(this.lastIndex), r2 = n.length;
    if (r2 === 0)
      return { value: null, done: true };
    const t2 = { kind: 0, text: "", url: "" }, a2 = n.indexOf("\x1B");
    if (a2 === -1)
      return t2.kind = 1, t2.text = n, this.lastIndex += r2, { value: t2, done: false };
    if (a2 > 0)
      return t2.kind = 1, t2.text = n.slice(0, a2), this.lastIndex += a2, { value: t2, done: false };
    if (r2 < 3)
      return { value: null, done: true };
    const s = n.charAt(1);
    if (s !== "[" && s !== "]" && s !== "(")
      return t2.kind = 2, t2.text = n[0], this.lastIndex += 1, { value: t2, done: false };
    if (s === "[") {
      const o = n.match($);
      return o === null ? { value: null, done: true } : o[4] ? (t2.kind = 2, t2.text = n[0], this.lastIndex += 1, { value: t2, done: false }) : (o[1] !== "" || o[3] !== "m" ? t2.kind = 3 : t2.kind = 4, t2.text = o[2], this.lastIndex += o[0].length, { value: t2, done: false });
    }
    if (s === "]") {
      if (r2 < 4)
        return { value: null, done: true };
      if (n.charAt(2) !== "8" || n.charAt(3) !== ";")
        return t2.kind = 2, t2.text = n[0], this.lastIndex += 1, { value: t2, done: false };
      const o = new RegExp(m);
      {
        const d = o.exec(n);
        if (d === null)
          return { value: null, done: true };
        if (d[3])
          return t2.kind = 2, t2.text = n[0], this.lastIndex += 1, { value: t2, done: false };
      }
      {
        const d = o.exec(n);
        if (d === null)
          return { value: null, done: true };
        if (d[3])
          return t2.kind = 2, t2.text = n[0], this.lastIndex += 1, { value: t2, done: false };
      }
      const f2 = n.match(p);
      return f2 === null ? (t2.kind = 2, t2.text = n[0], this.lastIndex += 1, { value: t2, done: false }) : (t2.kind = 5, t2.url = f2[1], t2.text = f2[2], this.lastIndex += f2[0].length, { value: t2, done: false });
    }
    return s === "(" ? (t2.kind = 3, this.lastIndex += 3, { value: t2, done: false }) : { value: null, done: true };
  }
  [Symbol.iterator]() {
    return this;
  }
};
var x = 14;
var h2 = new Array(x);
h2[
  0
  /* StyleAttrsKeys.BackgroundColor */
] = "background-color";
h2[
  1
  /* StyleAttrsKeys.Color */
] = "color";
h2[
  2
  /* StyleAttrsKeys.FontFamily */
] = "font-family";
h2[
  3
  /* StyleAttrsKeys.FontSize */
] = "font-size";
h2[
  4
  /* StyleAttrsKeys.FontStyle */
] = "font-style";
h2[
  5
  /* StyleAttrsKeys.FontWeight */
] = "font-weight";
h2[
  6
  /* StyleAttrsKeys.Opacity */
] = "opacity";
h2[
  7
  /* StyleAttrsKeys.Outline */
] = "outline";
h2[
  8
  /* StyleAttrsKeys.TextDecoration */
] = "text-decoration";
h2[
  9
  /* StyleAttrsKeys.TextDecorationColor */
] = "text-decoration-color";
h2[
  10
  /* StyleAttrsKeys.TextDecorationLine */
] = "text-decoration-line";
h2[
  11
  /* StyleAttrsKeys.TextDecorationStyle */
] = "text-decoration-style";
h2[
  12
  /* StyleAttrsKeys.VerticalAlign */
] = "vertical-align";
h2[
  13
  /* StyleAttrsKeys.Visibility */
] = "visibility";
var u = class {
  constructor() {
    this.attrArray = new Array(x), this._size = 0;
  }
  /**
   * Get attr
   * @param {StyleAttrKeys} key
   */
  get(n) {
    return this.attrArray[n];
  }
  /**
   *
   * @param {StyleAttrsKeys} key
   * @param {string} value
   */
  set(n, r2) {
    const t2 = this.attrArray[n];
    this.attrArray[n] = r2, t2 === void 0 && r2 !== void 0 && (this._size += 1);
  }
  /**
   * Delete attrs
   * @param {StyleAttrKeys} key
   */
  delete(n) {
    const r2 = this.attrArray[n];
    this.attrArray[n] = void 0, r2 !== void 0 && (this._size -= 1);
  }
  /**
   * Merge values from another object into this one
   * @param {StyleAttrs} attrs - The attributes to merge into instance
   */
  update(n) {
    for (const r2 in n)
      if (n.hasOwnProperty(r2)) {
        const t2 = n[r2];
        this.attrArray[r2] = t2, t2 !== void 0 && (this._size += 1);
      }
  }
  /**
   * Delete all style attributes
   */
  clear() {
    this.attrArray.fill(void 0), this._size = 0;
  }
  /**
   * Get number of non-empty attributes
   * @returns {number} Number of non-empty attributes
   */
  get size() {
    return this._size;
  }
  /**
   * Convert object to string for insertion to `style` elelment attribute
   * @returns {string} Semi-colon separated list of key:val pairs
   */
  toString() {
    let n = "";
    return this.attrArray.forEach((r2, t2) => {
      r2 !== void 0 && (n += `${h2[t2]}:${r2};`);
    }), n;
  }
  /**
   * Remove attributes at `keys` if present
   * @param {StyleAttrsKeys} key
   * @returns {StyleAttrsModifierFn} Modifier function
   */
  static delete(...n) {
    return (r2) => {
      n.forEach((t2) => {
        r2.delete(t2);
      });
    };
  }
  /**
   * Append `value` to space separated list if not present
   * @param {StyleAttrsKeys} key
   * @param {string} value
   * @returns {StyleAttrsModifierFn} Modifier function
   */
  static appendVal(n, r2) {
    return (t2) => {
      const a2 = t2.get(n), s = a2 ? a2.split(" ") : [];
      s.includes(r2) || s.push(r2), t2.set(n, s.join(" "));
    };
  }
  /**
   * Remove `value` from space separated list if present
   * @param {StyleAttrsKeys} key
   * @param {string} val
   * @returns {StyleAttrsModifierFn} Modifier function
   */
  static removeVal(n, r2) {
    return (t2) => {
      const a2 = t2.get(n);
      let s = a2 ? a2.split(" ") : [];
      s = s.filter((o) => o !== r2), s.length ? t2.set(n, s.join(" ")) : t2.delete(n);
    };
  }
};
var A = g2();
var k = g2({ onlyFirst: true });
var e2 = new Array(108);
e2[0] = { 5: "var(--ansi-bold-font-weight, 600)" };
e2[1] = { 5: "var(--ansi-bold-font-weight, 600)" };
e2[2] = { 6: "var(--ansi-dim-opacity, 0.7)" };
e2[3] = { 4: "italic" };
e2[4] = u.appendVal(8, "underline");
e2[8] = { 13: "hidden" };
e2[9] = u.appendVal(8, "line-through");
e2[10] = u.delete(
  2
  /* StyleAttrsKeys.FontFamily */
);
e2[11] = { 2: "var(--ansi-font-1)" };
e2[12] = { 2: "var(--ansi-font-2)" };
e2[13] = { 2: "var(--ansi-font-3)" };
e2[14] = { 2: "var(--ansi-font-4)" };
e2[15] = { 2: "var(--ansi-font-5)" };
e2[16] = { 2: "var(--ansi-font-6)" };
e2[17] = { 2: "var(--ansi-font-7)" };
e2[18] = { 2: "var(--ansi-font-8)" };
e2[19] = { 2: "var(--ansi-font-9)" };
e2[21] = { 10: "underline", 11: "double" };
e2[22] = u.delete(
  5
  /* StyleAttrsKeys.FontWeight */
);
e2[23] = u.delete(
  4
  /* StyleAttrsKeys.FontStyle */
);
e2[24] = u.removeVal(8, "underline");
e2[28] = u.delete(
  13
  /* StyleAttrsKeys.Visibility */
);
e2[29] = u.removeVal(8, "line-through");
e2[30] = { 1: `var(--ansi-black, ${e.black})` };
e2[31] = { 1: `var(--ansi-red, ${e.red})` };
e2[32] = { 1: `var(--ansi-green, ${e.green})` };
e2[33] = { 1: `var(--ansi-yellow, ${e.yellow})` };
e2[34] = { 1: `var(--ansi-blue, ${e.blue})` };
e2[35] = { 1: `var(--ansi-magenta, ${e.magenta})` };
e2[36] = { 1: `var(--ansi-cyan, ${e.cyan})` };
e2[37] = { 1: `var(--ansi-white, ${e.white})` };
e2[39] = u.delete(
  1
  /* StyleAttrsKeys.Color */
);
e2[40] = { 0: `var(--ansi-black, ${e.black})` };
e2[41] = { 0: `var(--ansi-red, ${e.red})` };
e2[42] = { 0: `var(--ansi-green, ${e.green})` };
e2[43] = { 0: `var(--ansi-yellow, ${e.yellow})` };
e2[44] = { 0: `var(--ansi-blue, ${e.blue})` };
e2[45] = { 0: `var(--ansi-magenta, ${e.magenta})` };
e2[46] = { 0: `var(--ansi-cyan, ${e.cyan})` };
e2[47] = { 0: `var(--ansi-white, ${e.white})` };
e2[49] = u.delete(
  0
  /* StyleAttrsKeys.BackgroundColor */
);
e2[51] = { 7: "var(--ansi-frame-outline, 1px solid)" };
e2[53] = u.appendVal(8, "overline");
e2[54] = u.delete(
  7
  /* StyleAttrsKeys.Outline */
);
e2[55] = u.removeVal(8, "overline");
e2[59] = u.delete(
  9
  /* StyleAttrsKeys.TextDecorationColor */
);
e2[73] = { 12: "super", 3: "var(--ansi-superscript-font-size, 80%)" };
e2[74] = { 12: "sub", 3: "var(--ansi-subscript-font-size, 80%)" };
e2[75] = u.delete(
  12,
  3
  /* StyleAttrsKeys.FontSize */
);
e2[90] = { 1: `var(--ansi-bright-black, ${e[
  "bright-black"
  /* StandardColorKeys.BrightBlack */
]})` };
e2[91] = { 1: `var(--ansi-bright-red, ${e[
  "bright-red"
  /* StandardColorKeys.BrightRed */
]})` };
e2[92] = { 1: `var(--ansi-bright-green, ${e[
  "bright-green"
  /* StandardColorKeys.BrightGreen */
]})` };
e2[93] = { 1: `var(--ansi-bright-yellow, ${e[
  "bright-yellow"
  /* StandardColorKeys.BrightYellow */
]})` };
e2[94] = { 1: `var(--ansi-bright-blue, ${e[
  "bright-blue"
  /* StandardColorKeys.BrightBlue */
]})` };
e2[95] = { 1: `var(--ansi-bright-magenta, ${e[
  "bright-magenta"
  /* StandardColorKeys.BrightMagenta */
]})` };
e2[96] = { 1: `var(--ansi-bright-cyan, ${e[
  "bright-cyan"
  /* StandardColorKeys.BrightCyan */
]})` };
e2[97] = { 1: `var(--ansi-bright-white, ${e[
  "bright-white"
  /* StandardColorKeys.BrightWhite */
]})` };
e2[100] = { 0: `var(--ansi-bright-black, ${e[
  "bright-black"
  /* StandardColorKeys.BrightBlack */
]})` };
e2[101] = { 0: `var(--ansi-bright-red, ${e[
  "bright-red"
  /* StandardColorKeys.BrightRed */
]})` };
e2[102] = { 0: `var(--ansi-bright-green, ${e[
  "bright-green"
  /* StandardColorKeys.BrightGreen */
]})` };
e2[103] = { 0: `var(--ansi-bright-yellow, ${e[
  "bright-yellow"
  /* StandardColorKeys.BrightYellow */
]})` };
e2[104] = { 0: `var(--ansi-bright-blue, ${e[
  "bright-blue"
  /* StandardColorKeys.BrightBlue */
]})` };
e2[105] = { 0: `var(--ansi-bright-magenta, ${e[
  "bright-magenta"
  /* StandardColorKeys.BrightMagenta */
]})` };
e2[106] = { 0: `var(--ansi-bright-cyan, ${e[
  "bright-cyan"
  /* StandardColorKeys.BrightCyan */
]})` };
e2[107] = { 0: `var(--ansi-bright-white, ${e[
  "bright-white"
  /* StandardColorKeys.BrightWhite */
]})` };
var c2 = new Array(16);
c2[0] = "black";
c2[1] = "red";
c2[2] = "green";
c2[3] = "yellow";
c2[4] = "blue";
c2[5] = "magenta";
c2[6] = "cyan";
c2[7] = "white";
c2[8] = "bright-black";
c2[9] = "bright-red";
c2[10] = "bright-green";
c2[11] = "bright-yellow";
c2[12] = "bright-blue";
c2[13] = "bright-magenta";
c2[14] = "bright-cyan";
c2[15] = "bright-white";
function b2(l) {
  switch (l) {
    case "38":
      return 1;
    case "48":
      return 0;
    case "58":
      return 9;
    default:
      throw new Error("not implemented");
  }
}
function I(l, n) {
  const r2 = l.text.split(";");
  if (r2.length !== 3)
    return;
  const t2 = b2(r2[0]), a2 = parseInt(r2[2], 10);
  if (0 <= a2 && a2 <= 15) {
    const s = c2[a2];
    n.set(t2, `var(--ansi-${s}, ${e[s]})`);
  } else if (16 <= a2 && a2 <= 231) {
    const s = a2 - 16, o = [0, 95, 135, 175, 215, 255], f2 = o[s / 36 % 6 | 0], d = o[s / 6 % 6 | 0], v = o[s % 6];
    n.set(t2, `rgb(${f2},${d},${v})`);
  } else if (232 <= a2 && a2 <= 255) {
    const s = 8 + (a2 - 232) * 10;
    n.set(t2, `var(--ansi-gray-${256 - a2}, rgb(${s},${s},${s}))`);
  }
}
function z(l, n) {
  const r2 = l.text.split(";");
  if (r2.length !== 5)
    return;
  const t2 = b2(r2[0]), [, , a2, s, o] = r2;
  n.set(t2, `rgb(${a2},${s},${o})`);
}
function R(l, n) {
  if (/^(38|48|58);(2|5);/.test(l.text)) {
    l.text[3] === "2" ? z(l, n) : I(l, n);
    return;
  }
  l.text.split(";").forEach((r2) => {
    const t2 = parseInt(r2 || "0", 10);
    if (t2 === 0) {
      n.clear();
      return;
    }
    const a2 = e2[t2];
    a2 && (typeof a2 == "function" ? a2(n) : n.update(a2));
  });
}
function _(l) {
  return k.test(l);
}
function E(l) {
  return l.replaceAll(A, "");
}
var P = class {
  /**
   * Convert input string with ansi markup to browser-safe HTML
   * @param {string} input
   * @returns {string} A browser-safe HTML string with converted ANSI
   */
  toHtml(n) {
    const r2 = new u();
    let t2 = "", a2 = false;
    return Array.from(new w(n)).forEach((s) => {
      switch (s.kind) {
        case 1:
          t2 += (0, import_escape_html.default)(s.text);
          break;
        case 4:
          a2 && (t2 += "</span>", a2 = false), R(s, r2), r2.size && (t2 += `<span style="${r2.toString()}">`, a2 = true);
          break;
      }
    }), a2 && (t2 += "</span>"), t2;
  }
};

export {
  _,
  E,
  P
};
/*! Bundled license information:

escape-html/index.js:
  (*!
   * escape-html
   * Copyright(c) 2012-2013 TJ Holowaychuk
   * Copyright(c) 2015 Andreas Lubbe
   * Copyright(c) 2015 Tiancheng "Timothy" Gu
   * MIT Licensed
   *)
*/
//# sourceMappingURL=chunk-DN3KNMHR.js.map
