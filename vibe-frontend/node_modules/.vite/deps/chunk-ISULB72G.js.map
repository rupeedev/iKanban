{
  "version": 3,
  "sources": ["../../../../node_modules/.pnpm/fast-diff@1.3.0/node_modules/fast-diff/diff.js", "../../../../node_modules/.pnpm/@git-diff-view+lowlight@0.0.30/node_modules/@git-diff-view/lowlight/src/processAST.ts", "../../../../node_modules/.pnpm/@git-diff-view+lowlight@0.0.30/node_modules/@git-diff-view/lowlight/src/lang.ts", "../../../../node_modules/.pnpm/@git-diff-view+lowlight@0.0.30/node_modules/@git-diff-view/lowlight/src/index.ts", "../../../../node_modules/.pnpm/@git-diff-view+core@0.0.30/node_modules/@git-diff-view/core/src/parse/raw-diff.ts", "../../../../node_modules/.pnpm/@git-diff-view+core@0.0.30/node_modules/@git-diff-view/utils/dist/esm/index.mjs", "../../../../node_modules/.pnpm/@git-diff-view+core@0.0.30/node_modules/@git-diff-view/core/src/parse/change-range.ts", "../../../../node_modules/.pnpm/@git-diff-view+core@0.0.30/node_modules/@git-diff-view/core/src/parse/diff-line.ts", "../../../../node_modules/.pnpm/@git-diff-view+core@0.0.30/node_modules/@git-diff-view/core/src/escape-html.ts", "../../../../node_modules/.pnpm/@git-diff-view+core@0.0.30/node_modules/@git-diff-view/core/src/parse/transform.ts", "../../../../node_modules/.pnpm/@git-diff-view+core@0.0.30/node_modules/@git-diff-view/core/src/parse/template.ts", "../../../../node_modules/.pnpm/@git-diff-view+core@0.0.30/node_modules/@git-diff-view/core/src/parse/diff-tool.ts", "../../../../node_modules/.pnpm/@git-diff-view+core@0.0.30/node_modules/@git-diff-view/core/src/parse/diff-parse.ts", "../../../../node_modules/.pnpm/@git-diff-view+core@0.0.30/node_modules/node_modules/.pnpm/@rollup+plugin-typescript@12.1.4_rollup@4.44.0_tslib@2.8.1_typescript@5.3.3/node_modules/tslib/tslib.es6.js", "../../../../node_modules/.pnpm/@git-diff-view+core@0.0.30/node_modules/@git-diff-view/core/src/cache.ts", "../../../../node_modules/.pnpm/@git-diff-view+core@0.0.30/node_modules/@git-diff-view/core/src/file.ts", "../../../../node_modules/.pnpm/@git-diff-view+core@0.0.30/node_modules/@git-diff-view/core/src/diff-file.ts", "../../../../node_modules/.pnpm/@git-diff-view+core@0.0.30/node_modules/@git-diff-view/core/src/diff-file-utils.ts", "../../../../node_modules/.pnpm/@git-diff-view+core@0.0.30/node_modules/@git-diff-view/core/src/index.ts"],
  "sourcesContent": ["/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int|Object} [cursor_pos] Edit position in text1 or object with more info\n * @param {boolean} [cleanup] Apply semantic cleanup before returning.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos, cleanup, _fix_unicode) {\n  // Check for equality\n  if (text1 === text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  if (cursor_pos != null) {\n    var editdiff = find_cursor_edit_diff(text1, text2, cursor_pos);\n    if (editdiff) {\n      return editdiff;\n    }\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs, _fix_unicode);\n  if (cleanup) {\n    diff_cleanupSemantic(diffs);\n  }\n  return diffs;\n}\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i !== -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [\n      [DIFF_INSERT, longtext.substring(0, i)],\n      [DIFF_EQUAL, shorttext],\n      [DIFF_INSERT, longtext.substring(i + shorttext.length)],\n    ];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length === 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [\n      [DIFF_DELETE, text1],\n      [DIFF_INSERT, text2],\n    ];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n}\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = delta % 2 !== 0;\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 === -d || (k1 !== d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (\n        x1 < text1_length &&\n        y1 < text2_length &&\n        text1.charAt(x1) === text2.charAt(y1)\n      ) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] !== -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 === -d || (k2 !== d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (\n        x2 < text1_length &&\n        y2 < text2_length &&\n        text1.charAt(text1_length - x2 - 1) ===\n          text2.charAt(text2_length - y2 - 1)\n      ) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] !== -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [\n    [DIFF_DELETE, text1],\n    [DIFF_INSERT, text2],\n  ];\n}\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n}\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) !== text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(pointerstart, pointermid) ==\n      text2.substring(pointerstart, pointermid)\n    ) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_start(text1.charCodeAt(pointermid - 1))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\nfunction diff_commonOverlap_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  // Eliminate the null case.\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  }\n  // Truncate the longer string.\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n  var text_length = Math.min(text1_length, text2_length);\n  // Quick check for the worst case.\n  if (text1 == text2) {\n    return text_length;\n  }\n\n  // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: http://neil.fraser.name/news/2010/11/04/\n  var best = 0;\n  var length = 1;\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n    if (found == -1) {\n      return best;\n    }\n    length += found;\n    if (\n      found == 0 ||\n      text1.substring(text_length - length) == text2.substring(0, length)\n    ) {\n      best = length;\n      length++;\n    }\n  }\n}\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.slice(-1) !== text2.slice(-1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n      text2.substring(text2.length - pointermid, text2.length - pointerend)\n    ) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_end(text1.charCodeAt(text1.length - pointermid))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null; // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = \"\";\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) !== -1) {\n      var prefixLength = diff_commonPrefix(\n        longtext.substring(i),\n        shorttext.substring(j)\n      );\n      var suffixLength = diff_commonSuffix(\n        longtext.substring(0, i),\n        shorttext.substring(0, j)\n      );\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common =\n          shorttext.substring(j - suffixLength, j) +\n          shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [\n        best_longtext_a,\n        best_longtext_b,\n        best_shorttext_a,\n        best_shorttext_b,\n        best_common,\n      ];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 4)\n  );\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 2)\n  );\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n}\n\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemantic(diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastequality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0; // Index of current position.\n  // Number of characters that changed prior to the equality.\n  var length_insertions1 = 0;\n  var length_deletions1 = 0;\n  // Number of characters that changed after the equality.\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastequality = diffs[pointer][1];\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      }\n      // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n      if (\n        lastequality &&\n        lastequality.length <=\n          Math.max(length_insertions1, length_deletions1) &&\n        lastequality.length <= Math.max(length_insertions2, length_deletions2)\n      ) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, [\n          DIFF_DELETE,\n          lastequality,\n        ]);\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        // Throw away the equality we just deleted.\n        equalitiesLength--;\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0; // Reset the counters.\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastequality = null;\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  // Normalize the diff.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n  diff_cleanupSemanticLossless(diffs);\n\n  // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n  pointer = 1;\n  while (pointer < diffs.length) {\n    if (\n      diffs[pointer - 1][0] == DIFF_DELETE &&\n      diffs[pointer][0] == DIFF_INSERT\n    ) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = diff_commonOverlap_(insertion, deletion);\n      if (overlap_length1 >= overlap_length2) {\n        if (\n          overlap_length1 >= deletion.length / 2 ||\n          overlap_length1 >= insertion.length / 2\n        ) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            insertion.substring(0, overlap_length1),\n          ]);\n          diffs[pointer - 1][1] = deletion.substring(\n            0,\n            deletion.length - overlap_length1\n          );\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (\n          overlap_length2 >= deletion.length / 2 ||\n          overlap_length2 >= insertion.length / 2\n        ) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            deletion.substring(0, overlap_length2),\n          ]);\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] = insertion.substring(\n            0,\n            insertion.length - overlap_length2\n          );\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] = deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n      pointer++;\n    }\n    pointer++;\n  }\n}\n\nvar nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\nvar whitespaceRegex_ = /\\s/;\nvar linebreakRegex_ = /[\\r\\n]/;\nvar blanklineEndRegex_ = /\\n\\r?\\n$/;\nvar blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemanticLossless(diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 && char1.match(whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 && char2.match(whitespaceRegex_);\n    var lineBreak1 = whitespace1 && char1.match(linebreakRegex_);\n    var lineBreak2 = whitespace2 && char2.match(linebreakRegex_);\n    var blankLine1 = lineBreak1 && one.match(blanklineEndRegex_);\n    var blankLine2 = lineBreak2 && two.match(blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n    return 0;\n  }\n\n  var pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] == DIFF_EQUAL &&\n      diffs[pointer + 1][0] == DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1];\n\n      // First, shift the edit as far left as possible.\n      var commonOffset = diff_commonSuffix(equality1, edit);\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore =\n        diff_cleanupSemanticScore_(equality1, edit) +\n        diff_cleanupSemanticScore_(edit, equality2);\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score =\n          diff_cleanupSemanticScore_(equality1, edit) +\n          diff_cleanupSemanticScore_(edit, equality2);\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n        diffs[pointer][1] = bestEdit;\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n    pointer++;\n  }\n}\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n * @param {boolean} fix_unicode Whether to normalize to a unicode-correct diff\n */\nfunction diff_cleanupMerge(diffs, fix_unicode) {\n  diffs.push([DIFF_EQUAL, \"\"]); // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = \"\";\n  var text_insert = \"\";\n  var commonlength;\n  while (pointer < diffs.length) {\n    if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n      diffs.splice(pointer, 1);\n      continue;\n    }\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        var previous_equality = pointer - count_insert - count_delete - 1;\n        if (fix_unicode) {\n          // prevent splitting of unicode surrogate pairs.  when fix_unicode is true,\n          // we assume that the old and new text in the diff are complete and correct\n          // unicode-encoded JS strings, but the tuple boundaries may fall between\n          // surrogate pairs.  we fix this by shaving off stray surrogates from the end\n          // of the previous equality and the beginning of this equality.  this may create\n          // empty equalities or a common prefix or suffix.  for example, if AB and AC are\n          // emojis, `[[0, 'A'], [-1, 'BA'], [0, 'C']]` would turn into deleting 'ABAC' and\n          // inserting 'AC', and then the common suffix 'AC' will be eliminated.  in this\n          // particular case, both equalities go away, we absorb any previous inequalities,\n          // and we keep scanning for the next equality before rewriting the tuples.\n          if (\n            previous_equality >= 0 &&\n            ends_with_pair_start(diffs[previous_equality][1])\n          ) {\n            var stray = diffs[previous_equality][1].slice(-1);\n            diffs[previous_equality][1] = diffs[previous_equality][1].slice(\n              0,\n              -1\n            );\n            text_delete = stray + text_delete;\n            text_insert = stray + text_insert;\n            if (!diffs[previous_equality][1]) {\n              // emptied out previous equality, so delete it and include previous delete/insert\n              diffs.splice(previous_equality, 1);\n              pointer--;\n              var k = previous_equality - 1;\n              if (diffs[k] && diffs[k][0] === DIFF_INSERT) {\n                count_insert++;\n                text_insert = diffs[k][1] + text_insert;\n                k--;\n              }\n              if (diffs[k] && diffs[k][0] === DIFF_DELETE) {\n                count_delete++;\n                text_delete = diffs[k][1] + text_delete;\n                k--;\n              }\n              previous_equality = k;\n            }\n          }\n          if (starts_with_pair_end(diffs[pointer][1])) {\n            var stray = diffs[pointer][1].charAt(0);\n            diffs[pointer][1] = diffs[pointer][1].slice(1);\n            text_delete += stray;\n            text_insert += stray;\n          }\n        }\n        if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n          // for empty equality not at end, wait for next equality\n          diffs.splice(pointer, 1);\n          break;\n        }\n        if (text_delete.length > 0 || text_insert.length > 0) {\n          // note that diff_commonPrefix and diff_commonSuffix are unicode-aware\n          if (text_delete.length > 0 && text_insert.length > 0) {\n            // Factor out any common prefixes.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if (previous_equality >= 0) {\n                diffs[previous_equality][1] += text_insert.substring(\n                  0,\n                  commonlength\n                );\n              } else {\n                diffs.splice(0, 0, [\n                  DIFF_EQUAL,\n                  text_insert.substring(0, commonlength),\n                ]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixes.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] =\n                text_insert.substring(text_insert.length - commonlength) +\n                diffs[pointer][1];\n              text_insert = text_insert.substring(\n                0,\n                text_insert.length - commonlength\n              );\n              text_delete = text_delete.substring(\n                0,\n                text_delete.length - commonlength\n              );\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          var n = count_insert + count_delete;\n          if (text_delete.length === 0 && text_insert.length === 0) {\n            diffs.splice(pointer - n, n);\n            pointer = pointer - n;\n          } else if (text_delete.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_INSERT, text_insert]);\n            pointer = pointer - n + 1;\n          } else if (text_insert.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_DELETE, text_delete]);\n            pointer = pointer - n + 1;\n          } else {\n            diffs.splice(\n              pointer - n,\n              n,\n              [DIFF_DELETE, text_delete],\n              [DIFF_INSERT, text_insert]\n            );\n            pointer = pointer - n + 2;\n          }\n        }\n        if (pointer !== 0 && diffs[pointer - 1][0] === DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = \"\";\n        text_insert = \"\";\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === \"\") {\n    diffs.pop(); // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] === DIFF_EQUAL &&\n      diffs[pointer + 1][0] === DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      if (\n        diffs[pointer][1].substring(\n          diffs[pointer][1].length - diffs[pointer - 1][1].length\n        ) === diffs[pointer - 1][1]\n      ) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] =\n          diffs[pointer - 1][1] +\n          diffs[pointer][1].substring(\n            0,\n            diffs[pointer][1].length - diffs[pointer - 1][1].length\n          );\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (\n        diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n        diffs[pointer + 1][1]\n      ) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n          diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n          diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs, fix_unicode);\n  }\n}\n\nfunction is_surrogate_pair_start(charCode) {\n  return charCode >= 0xd800 && charCode <= 0xdbff;\n}\n\nfunction is_surrogate_pair_end(charCode) {\n  return charCode >= 0xdc00 && charCode <= 0xdfff;\n}\n\nfunction starts_with_pair_end(str) {\n  return is_surrogate_pair_end(str.charCodeAt(0));\n}\n\nfunction ends_with_pair_start(str) {\n  return is_surrogate_pair_start(str.charCodeAt(str.length - 1));\n}\n\nfunction remove_empty_tuples(tuples) {\n  var ret = [];\n  for (var i = 0; i < tuples.length; i++) {\n    if (tuples[i][1].length > 0) {\n      ret.push(tuples[i]);\n    }\n  }\n  return ret;\n}\n\nfunction make_edit_splice(before, oldMiddle, newMiddle, after) {\n  if (ends_with_pair_start(before) || starts_with_pair_end(after)) {\n    return null;\n  }\n  return remove_empty_tuples([\n    [DIFF_EQUAL, before],\n    [DIFF_DELETE, oldMiddle],\n    [DIFF_INSERT, newMiddle],\n    [DIFF_EQUAL, after],\n  ]);\n}\n\nfunction find_cursor_edit_diff(oldText, newText, cursor_pos) {\n  // note: this runs after equality check has ruled out exact equality\n  var oldRange =\n    typeof cursor_pos === \"number\"\n      ? { index: cursor_pos, length: 0 }\n      : cursor_pos.oldRange;\n  var newRange = typeof cursor_pos === \"number\" ? null : cursor_pos.newRange;\n  // take into account the old and new selection to generate the best diff\n  // possible for a text edit.  for example, a text change from \"xxx\" to \"xx\"\n  // could be a delete or forwards-delete of any one of the x's, or the\n  // result of selecting two of the x's and typing \"x\".\n  var oldLength = oldText.length;\n  var newLength = newText.length;\n  if (oldRange.length === 0 && (newRange === null || newRange.length === 0)) {\n    // see if we have an insert or delete before or after cursor\n    var oldCursor = oldRange.index;\n    var oldBefore = oldText.slice(0, oldCursor);\n    var oldAfter = oldText.slice(oldCursor);\n    var maybeNewCursor = newRange ? newRange.index : null;\n    editBefore: {\n      // is this an insert or delete right before oldCursor?\n      var newCursor = oldCursor + newLength - oldLength;\n      if (maybeNewCursor !== null && maybeNewCursor !== newCursor) {\n        break editBefore;\n      }\n      if (newCursor < 0 || newCursor > newLength) {\n        break editBefore;\n      }\n      var newBefore = newText.slice(0, newCursor);\n      var newAfter = newText.slice(newCursor);\n      if (newAfter !== oldAfter) {\n        break editBefore;\n      }\n      var prefixLength = Math.min(oldCursor, newCursor);\n      var oldPrefix = oldBefore.slice(0, prefixLength);\n      var newPrefix = newBefore.slice(0, prefixLength);\n      if (oldPrefix !== newPrefix) {\n        break editBefore;\n      }\n      var oldMiddle = oldBefore.slice(prefixLength);\n      var newMiddle = newBefore.slice(prefixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldAfter);\n    }\n    editAfter: {\n      // is this an insert or delete right after oldCursor?\n      if (maybeNewCursor !== null && maybeNewCursor !== oldCursor) {\n        break editAfter;\n      }\n      var cursor = oldCursor;\n      var newBefore = newText.slice(0, cursor);\n      var newAfter = newText.slice(cursor);\n      if (newBefore !== oldBefore) {\n        break editAfter;\n      }\n      var suffixLength = Math.min(oldLength - cursor, newLength - cursor);\n      var oldSuffix = oldAfter.slice(oldAfter.length - suffixLength);\n      var newSuffix = newAfter.slice(newAfter.length - suffixLength);\n      if (oldSuffix !== newSuffix) {\n        break editAfter;\n      }\n      var oldMiddle = oldAfter.slice(0, oldAfter.length - suffixLength);\n      var newMiddle = newAfter.slice(0, newAfter.length - suffixLength);\n      return make_edit_splice(oldBefore, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n  if (oldRange.length > 0 && newRange && newRange.length === 0) {\n    replaceRange: {\n      // see if diff could be a splice of the old selection range\n      var oldPrefix = oldText.slice(0, oldRange.index);\n      var oldSuffix = oldText.slice(oldRange.index + oldRange.length);\n      var prefixLength = oldPrefix.length;\n      var suffixLength = oldSuffix.length;\n      if (newLength < prefixLength + suffixLength) {\n        break replaceRange;\n      }\n      var newPrefix = newText.slice(0, prefixLength);\n      var newSuffix = newText.slice(newLength - suffixLength);\n      if (oldPrefix !== newPrefix || oldSuffix !== newSuffix) {\n        break replaceRange;\n      }\n      var oldMiddle = oldText.slice(prefixLength, oldLength - suffixLength);\n      var newMiddle = newText.slice(prefixLength, newLength - suffixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n\n  return null;\n}\n\nfunction diff(text1, text2, cursor_pos, cleanup) {\n  // only pass fix_unicode=true at the top level, not when diff_main is\n  // recursively invoked\n  return diff_main(text1, text2, cursor_pos, cleanup, true);\n}\n\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n", "import type { DiffAST } from \".\";\n\nexport type SyntaxNode = {\n  type: string;\n  value: string;\n  lineNumber: number;\n  startIndex: number;\n  endIndex: number;\n  properties?: { className?: string[]; [key: string]: any };\n  children?: SyntaxNode[];\n};\n\nexport type SyntaxLine = {\n  value: string;\n  lineNumber: number;\n  valueLength: number;\n  nodeList: { node: SyntaxNode; wrapper?: SyntaxNode }[];\n};\n\nexport const processAST = (ast: DiffAST) => {\n  let lineNumber = 1;\n\n  const syntaxObj: Record<number, SyntaxLine> = {};\n\n  const loopAST = (nodes: SyntaxNode[], wrapper?: SyntaxNode) => {\n    nodes.forEach((node) => {\n      if (node.type === \"text\") {\n        if (node.value.indexOf(\"\\n\") === -1) {\n          const valueLength = node.value.length;\n          if (!syntaxObj[lineNumber]) {\n            node.startIndex = 0;\n            node.endIndex = valueLength - 1;\n            const item = {\n              value: node.value,\n              lineNumber,\n              valueLength,\n              nodeList: [{ node, wrapper }],\n            };\n            syntaxObj[lineNumber] = item;\n          } else {\n            node.startIndex = syntaxObj[lineNumber].valueLength;\n            node.endIndex = node.startIndex + valueLength - 1;\n            syntaxObj[lineNumber].value += node.value;\n            syntaxObj[lineNumber].valueLength += valueLength;\n            syntaxObj[lineNumber].nodeList.push({ node, wrapper });\n          }\n          node.lineNumber = lineNumber;\n          return;\n        }\n\n        const lines = node.value.split(\"\\n\");\n        node.children = node.children || [];\n        for (let i = 0; i < lines.length; i++) {\n          const _value = i === lines.length - 1 ? lines[i] : lines[i] + \"\\n\";\n          const _lineNumber = i === 0 ? lineNumber : ++lineNumber;\n          const _valueLength = _value.length;\n          const _node: SyntaxNode = {\n            type: \"text\",\n            value: _value,\n            startIndex: Infinity,\n            endIndex: Infinity,\n            lineNumber: _lineNumber,\n          };\n          if (!syntaxObj[_lineNumber]) {\n            _node.startIndex = 0;\n            _node.endIndex = _valueLength - 1;\n            const item = {\n              value: _value,\n              lineNumber: _lineNumber,\n              valueLength: _valueLength,\n              nodeList: [{ node: _node, wrapper }],\n            };\n            syntaxObj[_lineNumber] = item;\n          } else {\n            _node.startIndex = syntaxObj[_lineNumber].valueLength;\n            _node.endIndex = _node.startIndex + _valueLength - 1;\n            syntaxObj[_lineNumber].value += _value;\n            syntaxObj[_lineNumber].valueLength += _valueLength;\n            syntaxObj[_lineNumber].nodeList.push({ node: _node, wrapper });\n          }\n          node.children.push(_node);\n        }\n\n        node.lineNumber = lineNumber;\n\n        return;\n      }\n      if (node.children) {\n        loopAST(node.children, node);\n\n        node.lineNumber = lineNumber;\n      }\n    });\n  };\n\n  loopAST(ast.children as SyntaxNode[]);\n\n  return { syntaxFileObject: syntaxObj, syntaxFileLineNumber: lineNumber };\n};\n", "import type { DiffAST } from \".\";\n\nexport type DiffHighlighterLang =\n  | \"arduino\"\n  | \"bash\"\n  | \"c\"\n  | \"cpp\"\n  | \"csharp\"\n  | \"css\"\n  | \"diff\"\n  | \"go\"\n  | \"graphql\"\n  | \"ini\"\n  | \"java\"\n  | \"javascript\"\n  | \"js\"\n  | \"jsx\"\n  | \"json\"\n  | \"kotlin\"\n  | \"less\"\n  | \"lua\"\n  | \"makefile\"\n  | \"markdown\"\n  | \"objectivec\"\n  | \"perl\"\n  | \"php\"\n  | \"php-template\"\n  | \"plaintext\"\n  | \"python\"\n  | \"python-repl\"\n  | \"r\"\n  | \"ruby\"\n  | \"rust\"\n  | \"scss\"\n  | \"shell\"\n  | \"sql\"\n  | \"swift\"\n  | \"typescript\"\n  | \"ts\"\n  | \"tsx\"\n  | \"vbnet\"\n  | \"wasm\"\n  | \"xml\"\n  | \"yaml\"\n  | \"abnf\"\n  | \"accesslog\"\n  | \"actionscript\"\n  | \"ada\"\n  | \"angelscript\"\n  | \"apache\"\n  | \"applescript\"\n  | \"arcade\"\n  | \"armasm\"\n  | \"asciidoc\"\n  | \"aspectj\"\n  | \"autohotkey\"\n  | \"autoit\"\n  | \"avrasm\"\n  | \"awk\"\n  | \"axapta\"\n  | \"basic\"\n  | \"bnf\"\n  | \"brainfuck\"\n  | \"cal\"\n  | \"capnproto\"\n  | \"ceylon\"\n  | \"clean\"\n  | \"clojure\"\n  | \"clojure-repl\"\n  | \"cmake\"\n  | \"coffeescript\"\n  | \"coq\"\n  | \"cos\"\n  | \"crmsh\"\n  | \"crystal\"\n  | \"csp\"\n  | \"d\"\n  | \"dart\"\n  | \"delphi\"\n  | \"django\"\n  | \"dns\"\n  | \"dockerfile\"\n  | \"dos\"\n  | \"dsconfig\"\n  | \"dts\"\n  | \"dust\"\n  | \"ebnf\"\n  | \"elixir\"\n  | \"elm\"\n  | \"erb\"\n  | \"erlang\"\n  | \"erlang-repl\"\n  | \"excel\"\n  | \"fix\"\n  | \"flix\"\n  | \"fortran\"\n  | \"fsharp\"\n  | \"gams\"\n  | \"gauss\"\n  | \"gcode\"\n  | \"gherkin\"\n  | \"glsl\"\n  | \"gml\"\n  | \"golo\"\n  | \"gradle\"\n  | \"groovy\"\n  | \"haml\"\n  | \"handlebars\"\n  | \"haskell\"\n  | \"haxe\"\n  | \"hsp\"\n  | \"http\"\n  | \"hy\"\n  | \"inform7\"\n  | \"irpf90\"\n  | \"isbl\"\n  | \"jboss-cli\"\n  | \"julia\"\n  | \"julia-repl\"\n  | \"lasso\"\n  | \"latex\"\n  | \"ldif\"\n  | \"leaf\"\n  | \"lisp\"\n  | \"livecodeserver\"\n  | \"livescript\"\n  | \"llvm\"\n  | \"lsl\"\n  | \"mathematica\"\n  | \"matlab\"\n  | \"maxima\"\n  | \"mel\"\n  | \"mercury\"\n  | \"mipsasm\"\n  | \"mizar\"\n  | \"mojolicious\"\n  | \"monkey\"\n  | \"moonscript\"\n  | \"n1ql\"\n  | \"nestedtext\"\n  | \"nginx\"\n  | \"nim\"\n  | \"nix\"\n  | \"node-repl\"\n  | \"nsis\"\n  | \"ocaml\"\n  | \"openscad\"\n  | \"oxygene\"\n  | \"parser3\"\n  | \"pf\"\n  | \"pgsql\"\n  | \"pony\"\n  | \"powershell\"\n  | \"processing\"\n  | \"profile\"\n  | \"prolog\"\n  | \"properties\"\n  | \"protobuf\"\n  | \"puppet\"\n  | \"purebasic\"\n  | \"q\"\n  | \"qml\"\n  | \"reasonml\"\n  | \"rib\"\n  | \"roboconf\"\n  | \"routeros\"\n  | \"rsl\"\n  | \"ruleslanguage\"\n  | \"sas\"\n  | \"scala\"\n  | \"scheme\"\n  | \"scilab\"\n  | \"smali\"\n  | \"smalltalk\"\n  | \"sml\"\n  | \"sqf\"\n  | \"stan\"\n  | \"stata\"\n  | \"step21\"\n  | \"stylus\"\n  | \"subunit\"\n  | \"taggerscript\"\n  | \"tap\"\n  | \"tcl\"\n  | \"thrift\"\n  | \"tp\"\n  | \"twig\"\n  | \"vala\"\n  | \"vbscript\"\n  | \"vbscript-html\"\n  | \"verilog\"\n  | \"vhdl\"\n  | \"vim\"\n  | \"wren\"\n  | \"x86asm\"\n  | \"xl\"\n  | \"xquery\"\n  | \"zephi\"\n  | \"vue\"\n  | \"vue-html\";\n\n// type helper function\nexport function _getAST(raw: string, fileName?: string, lang?: DiffHighlighterLang, theme?: \"light\" | \"dark\"): DiffAST;\nexport function _getAST(raw: string, fileName?: string, lang?: string, theme?: \"light\" | \"dark\"): DiffAST;\nexport function _getAST(\n  _raw: string,\n  _fileName?: string,\n  _lang?: DiffHighlighterLang | string,\n  _theme?: \"light\" | \"dark\"\n) {\n  return {} as DiffAST;\n}\n", "import { createLowlight, all } from \"lowlight\";\n\nimport { processAST, type SyntaxLine } from \"./processAST\";\n\nimport type { _getAST } from \"./lang\";\n\nconst lowlight = createLowlight(all);\n\n// !SEE https://github.com/highlightjs/highlightjs-vue\n\nlowlight.register(\"vue\", function hljsDefineVue(hljs) {\n  return {\n    subLanguage: \"xml\",\n    contains: [\n      hljs.COMMENT(\"<!--\", \"-->\", {\n        relevance: 10,\n      }),\n      {\n        begin: /^(\\s*)(<script>)/gm,\n        end: /^(\\s*)(<\\/script>)/gm,\n        subLanguage: \"javascript\",\n        excludeBegin: true,\n        excludeEnd: true,\n      },\n      {\n        begin: /^(?:\\s*)(?:<script\\s+lang=([\"'])ts\\1>)/gm,\n        end: /^(\\s*)(<\\/script>)/gm,\n        subLanguage: \"typescript\",\n        excludeBegin: true,\n        excludeEnd: true,\n      },\n      {\n        begin: /^(\\s*)(<style(\\s+scoped)?>)/gm,\n        end: /^(\\s*)(<\\/style>)/gm,\n        subLanguage: \"css\",\n        excludeBegin: true,\n        excludeEnd: true,\n      },\n      {\n        begin: /^(?:\\s*)(?:<style(?:\\s+scoped)?\\s+lang=([\"'])(?:s[ca]ss)\\1(?:\\s+scoped)?>)/gm,\n        end: /^(\\s*)(<\\/style>)/gm,\n        subLanguage: \"scss\",\n        excludeBegin: true,\n        excludeEnd: true,\n      },\n      {\n        begin: /^(?:\\s*)(?:<style(?:\\s+scoped)?\\s+lang=([\"'])stylus\\1(?:\\s+scoped)?>)/gm,\n        end: /^(\\s*)(<\\/style>)/gm,\n        subLanguage: \"stylus\",\n        excludeBegin: true,\n        excludeEnd: true,\n      },\n    ],\n  };\n});\n\nexport type DiffAST = ReturnType<typeof lowlight.highlight>;\n\nexport type DiffHighlighter = {\n  name: string;\n  type: \"class\" | \"style\" | string;\n  maxLineToIgnoreSyntax: number;\n  setMaxLineToIgnoreSyntax: (v: number) => void;\n  ignoreSyntaxHighlightList: (string | RegExp)[];\n  setIgnoreSyntaxHighlightList: (v: (string | RegExp)[]) => void;\n  getAST: typeof _getAST;\n  processAST: (ast: DiffAST) => { syntaxFileObject: Record<number, SyntaxLine>; syntaxFileLineNumber: number };\n  hasRegisteredCurrentLang: (lang: string) => boolean;\n  getHighlighterEngine: () => typeof lowlight;\n};\n\nconst instance = { name: \"lowlight\" };\n\nlet _maxLineToIgnoreSyntax = 2000;\n\nconst _ignoreSyntaxHighlightList: (string | RegExp)[] = [];\n\nObject.defineProperty(instance, \"maxLineToIgnoreSyntax\", {\n  get: () => _maxLineToIgnoreSyntax,\n});\n\nObject.defineProperty(instance, \"setMaxLineToIgnoreSyntax\", {\n  value: (v: number) => {\n    _maxLineToIgnoreSyntax = v;\n  },\n});\n\nObject.defineProperty(instance, \"ignoreSyntaxHighlightList\", {\n  get: () => _ignoreSyntaxHighlightList,\n});\n\nObject.defineProperty(instance, \"setIgnoreSyntaxHighlightList\", {\n  value: (v: (string | RegExp)[]) => {\n    _ignoreSyntaxHighlightList.length = 0;\n    _ignoreSyntaxHighlightList.push(...v);\n  },\n});\n\nObject.defineProperty(instance, \"getAST\", {\n  value: (raw: string, fileName?: string, lang?: string) => {\n    let hasRegisteredLang = true;\n\n    if (!lowlight.registered(lang)) {\n      if (__DEV__) {\n        console.warn(`not support current lang: ${lang} yet`);\n      }\n      hasRegisteredLang = false;\n    }\n\n    if (\n      fileName &&\n      highlighter.ignoreSyntaxHighlightList.some((item) =>\n        item instanceof RegExp ? item.test(fileName) : fileName === item\n      )\n    ) {\n      if (__DEV__) {\n        console.warn(\n          `ignore syntax for current file, because the fileName is in the ignoreSyntaxHighlightList: ${fileName}`\n        );\n      }\n      return;\n    }\n\n    if (hasRegisteredLang) {\n      return lowlight.highlight(lang, raw);\n    } else {\n      return lowlight.highlightAuto(raw);\n    }\n  },\n});\n\nObject.defineProperty(instance, \"processAST\", {\n  value: (ast: DiffAST) => {\n    return processAST(ast);\n  },\n});\n\nObject.defineProperty(instance, \"hasRegisteredCurrentLang\", {\n  value: (lang: string) => {\n    return lowlight.registered(lang);\n  },\n});\n\nObject.defineProperty(instance, \"getHighlighterEngine\", {\n  value: () => lowlight,\n});\n\nObject.defineProperty(instance, \"type\", { value: \"class\" });\n\nexport { processAST } from \"./processAST\";\n\nexport const versions = __VERSION__;\n\nexport const highlighter: DiffHighlighter = instance as DiffHighlighter;\n\nexport * from \"./lang\";\n", "import type { DiffLine } from \"./diff-line\";\n\nexport enum DiffHunkExpansionType {\n  /** The hunk header cannot be expanded at all. */\n  None = \"None\",\n\n  /**\n   * The hunk header can be expanded up exclusively. Only the first hunk can be\n   * expanded up exclusively.\n   */\n  Up = \"Up\",\n\n  /**\n   * The hunk header can be expanded down exclusively. Only the last hunk (if\n   * it's the dummy hunk with only one line) can be expanded down exclusively.\n   */\n  Down = \"Down\",\n\n  /** The hunk header can be expanded both up and down. */\n  Both = \"Both\",\n\n  /**\n   * The hunk header represents a short gap that, when expanded, will\n   * result in merging this hunk and the hunk above.\n   */\n  Short = \"Short\",\n}\n\n/** each diff is made up of a number of hunks */\nexport class DiffHunk {\n  /**\n   * @param header The details from the diff hunk header about the line start and patch length.\n   * @param lines The contents - context and changes - of the diff section.\n   * @param unifiedDiffStart The diff hunk's start position in the overall file diff.\n   * @param unifiedDiffEnd The diff hunk's end position in the overall file diff.\n   */\n  public constructor(\n    public readonly header: DiffHunkHeader,\n    public readonly lines: ReadonlyArray<DiffLine>,\n    public readonly unifiedDiffStart: number,\n    public readonly unifiedDiffEnd: number,\n    public readonly expansionType: DiffHunkExpansionType\n  ) {}\n\n  public equals(other: DiffHunk) {\n    if (this === other) {\n      return true;\n    }\n\n    return (\n      this.header.equals(other.header) &&\n      this.unifiedDiffStart === other.unifiedDiffStart &&\n      this.unifiedDiffEnd === other.unifiedDiffEnd &&\n      this.expansionType === other.expansionType &&\n      this.lines.length === other.lines.length &&\n      this.lines.every((xLine, ix) => xLine.equals(other.lines[ix]))\n    );\n  }\n}\n\n/** details about the start and end of a diff hunk */\nexport class DiffHunkHeader {\n  /**\n   * @param oldStartLine The line in the old (or original) file where this diff hunk starts.\n   * @param oldLineCount The number of lines in the old (or original) file that this diff hunk covers\n   * @param newStartLine The line in the new file where this diff hunk starts.\n   * @param newLineCount The number of lines in the new file that this diff hunk covers.\n   */\n  public constructor(\n    public readonly oldStartLine: number,\n    public readonly oldLineCount: number,\n    public readonly newStartLine: number,\n    public readonly newLineCount: number\n  ) {}\n\n  public toDiffLineRepresentation() {\n    return `@@ -${this.oldStartLine},${this.oldLineCount} +${this.newStartLine},${this.newLineCount} @@`;\n  }\n\n  public equals(other: DiffHunkHeader) {\n    return (\n      this.oldStartLine === other.oldStartLine &&\n      this.oldLineCount === other.oldLineCount &&\n      this.newStartLine === other.newStartLine &&\n      this.oldStartLine === other.oldStartLine\n    );\n  }\n}\n\n/** the contents of a diff generated by Git */\nexport interface IRawDiff {\n  /**\n   * The plain text contents of the diff header. This contains\n   * everything from the start of the diff up until the first\n   * hunk header starts. Note that this does not include a trailing\n   * newline.\n   */\n  readonly header: string;\n\n  /**\n   * The plain text contents of the diff. This contains everything\n   * after the diff header until the last character in the diff.\n   *\n   * Note that this does not include a trailing newline nor does\n   * it include diff 'no newline at end of file' comments. For\n   * no-newline information, consult the DiffLine noTrailingNewLine\n   * property.\n   */\n  readonly contents: string;\n\n  /**\n   * Each hunk in the diff with information about start, and end\n   * positions, lines and line statuses.\n   */\n  readonly hunks: ReadonlyArray<DiffHunk>;\n\n  /**\n   * Whether or not the unified diff indicates that the contents\n   * could not be diffed due to one of the versions being binary.\n   */\n  readonly isBinary: boolean;\n\n  /** The largest line number in the diff */\n  readonly maxLineNumber: number;\n\n  /** Whether or not the diff has invisible bidi characters */\n  readonly hasHiddenBidiChars: boolean;\n}\n", "/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\n\r\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nfunction __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nvar _TextMeasure_instances, _TextMeasure_key, _TextMeasure_map, _TextMeasure_getInstance;\nlet canvasCtx = null;\nconst getKey = (font, text) => {\n    return `${font.fontFamily}-${font.fontStyle}-${font.fontSize}-${text}`;\n};\nconst getStableKey = (font, text) => {\n    return getKey(font, \"0\".repeat(text.length));\n};\nclass TextMeasure {\n    constructor() {\n        _TextMeasure_instances.add(this);\n        _TextMeasure_key.set(this, \"\");\n        _TextMeasure_map.set(this, {});\n    }\n    measure(text, font) {\n        const currentKey = getStableKey(font, text);\n        if (__classPrivateFieldGet(this, _TextMeasure_map, \"f\")[currentKey]) {\n            return __classPrivateFieldGet(this, _TextMeasure_map, \"f\")[currentKey];\n        }\n        const instance = __classPrivateFieldGet(this, _TextMeasure_instances, \"m\", _TextMeasure_getInstance).call(this);\n        if (font) {\n            const currentFontKey = `${font.fontFamily}-${font.fontStyle}-${font.fontSize}`;\n            if (__classPrivateFieldGet(this, _TextMeasure_key, \"f\") !== currentFontKey) {\n                __classPrivateFieldSet(this, _TextMeasure_key, currentFontKey, \"f\");\n                instance.font = `${font.fontStyle || \"\"} ${font.fontSize || \"\"} ${font.fontFamily || \"\"}`;\n            }\n        }\n        else {\n            instance.font = \"\";\n        }\n        const textWidth = instance.measureText(text).width;\n        return textWidth;\n    }\n}\n_TextMeasure_key = new WeakMap(), _TextMeasure_map = new WeakMap(), _TextMeasure_instances = new WeakSet(), _TextMeasure_getInstance = function _TextMeasure_getInstance() {\n    canvasCtx = canvasCtx || document.createElement(\"canvas\").getContext(\"2d\");\n    return canvasCtx;\n};\nlet instance = null;\nconst getTextMeasureInstance = () => {\n    instance = instance || new TextMeasure();\n    return instance;\n};\n\nconst addContentBGName = \"--diff-add-content--\";\nconst delContentBGName = \"--diff-del-content--\";\nconst borderColorName = \"--diff-border--\";\nconst addLineNumberBGName = \"--diff-add-lineNumber--\";\nconst delLineNumberBGName = \"--diff-del-lineNumber--\";\nconst plainContentBGName = \"--diff-plain-content--\";\nconst expandContentBGName = \"--diff-expand-content--\";\nconst plainLineNumberColorName = \"--diff-plain-lineNumber-color--\";\nconst expandLineNumberColorName = \"--diff-expand-lineNumber-color--\";\nconst plainLineNumberBGName = \"--diff-plain-lineNumber--\";\nconst expandLineNumberBGName = \"--diff-expand-lineNumber--\";\nconst hunkContentBGName = \"--diff-hunk-content--\";\nconst hunkContentColorName = \"--diff-hunk-content-color--\";\nconst hunkLineNumberBGName = \"--diff-hunk-lineNumber--\";\nconst hunkLineNumberBGHoverName = \"--diff-hunk-lineNumber-hover--\";\nconst addContentHighlightBGName = \"--diff-add-content-highlight--\";\nconst delContentHighlightBGName = \"--diff-del-content-highlight--\";\nconst addWidgetBGName = \"--diff-add-widget--\";\nconst addWidgetColorName = \"--diff-add-widget-color--\";\nconst emptyBGName = \"--diff-empty-content--\";\nconst getContentBG = (isAdded, isDelete, hasDiff) => {\n    return isAdded\n        ? `var(${addContentBGName})`\n        : isDelete\n            ? `var(${delContentBGName})`\n            : hasDiff\n                ? `var(${plainContentBGName})`\n                : `var(${expandContentBGName})`;\n};\nconst getLineNumberBG = (isAdded, isDelete, hasDiff) => {\n    return isAdded\n        ? `var(${addLineNumberBGName})`\n        : isDelete\n            ? `var(${delLineNumberBGName})`\n            : hasDiff\n                ? `var(${plainLineNumberBGName})`\n                : `var(${expandLineNumberBGName})`;\n};\n\nconst removeAllSelection = () => {\n    const selection = window.getSelection();\n    for (let i = 0; i < selection.rangeCount; i++) {\n        selection.removeRange(selection.getRangeAt(i));\n    }\n};\nconst syncScroll = (left, right) => {\n    const onScroll = function (event) {\n        if (event === null || event.target === null)\n            return;\n        if (event.target === left) {\n            right.scrollTop = left.scrollTop;\n            right.scrollLeft = left.scrollLeft;\n        }\n        else {\n            left.scrollTop = right.scrollTop;\n            left.scrollLeft = right.scrollLeft;\n        }\n    };\n    if (!left.onscroll) {\n        left.onscroll = onScroll;\n    }\n    if (!right.onscroll) {\n        right.onscroll = onScroll;\n    }\n    return () => {\n        left.onscroll = null;\n        right.onscroll = null;\n    };\n};\n\nconst diffFontSizeName = \"--diff-font-size--\";\nconst diffAsideWidthName = \"--diff-aside-width--\";\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\nconst memoFunc = (func) => {\n    const cache = {};\n    return ((key) => {\n        if (cache[key]) {\n            return cache[key];\n        }\n        const result = func(key);\n        cache[key] = result;\n        return result;\n    });\n};\n\nvar NewLineSymbol;\n(function (NewLineSymbol) {\n    NewLineSymbol[NewLineSymbol[\"CRLF\"] = 1] = \"CRLF\";\n    NewLineSymbol[NewLineSymbol[\"CR\"] = 2] = \"CR\";\n    NewLineSymbol[NewLineSymbol[\"LF\"] = 3] = \"LF\";\n    NewLineSymbol[NewLineSymbol[\"NEWLINE\"] = 4] = \"NEWLINE\";\n    NewLineSymbol[NewLineSymbol[\"NORMAL\"] = 5] = \"NORMAL\";\n    NewLineSymbol[NewLineSymbol[\"NULL\"] = 6] = \"NULL\";\n})(NewLineSymbol || (NewLineSymbol = {}));\nconst getSymbol = (symbol) => {\n    switch (symbol) {\n        case NewLineSymbol.LF:\n            return \"\";\n        case NewLineSymbol.CR:\n            return \"\";\n        case NewLineSymbol.CRLF:\n            return \"\";\n        default:\n            return \"\";\n    }\n};\nvar DiffModeEnum;\n(function (DiffModeEnum) {\n    // github like\n    DiffModeEnum[DiffModeEnum[\"SplitGitHub\"] = 1] = \"SplitGitHub\";\n    // gitlab like\n    DiffModeEnum[DiffModeEnum[\"SplitGitLab\"] = 2] = \"SplitGitLab\";\n    DiffModeEnum[DiffModeEnum[\"Split\"] = 3] = \"Split\";\n    DiffModeEnum[DiffModeEnum[\"Unified\"] = 4] = \"Unified\";\n})(DiffModeEnum || (DiffModeEnum = {}));\n\nexport { DiffModeEnum, NewLineSymbol, addContentBGName, addContentHighlightBGName, addLineNumberBGName, addWidgetBGName, addWidgetColorName, borderColorName, delContentBGName, delContentHighlightBGName, delLineNumberBGName, diffAsideWidthName, diffFontSizeName, emptyBGName, expandContentBGName, expandLineNumberBGName, expandLineNumberColorName, getContentBG, getLineNumberBG, getSymbol, getTextMeasureInstance, hunkContentBGName, hunkContentColorName, hunkLineNumberBGHoverName, hunkLineNumberBGName, memoFunc, plainContentBGName, plainLineNumberBGName, plainLineNumberColorName, removeAllSelection, syncScroll };\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgubWpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJvbGx1cCtwbHVnaW4tdHlwZXNjcmlwdEAxMi4xLjRfcm9sbHVwQDQuNDQuMF90c2xpYkAyLjguMV90eXBlc2NyaXB0QDUuMy4zL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCIuLi8uLi9zcmMvdGV4dE1lYXN1cmUudHMiLCIuLi8uLi9zcmMvY29sb3IudHMiLCIuLi8uLi9zcmMvZG9tLnRzIiwiLi4vLi4vc3JjL3NpemUudHMiLCIuLi8uLi9zcmMvdXRpbHMudHMiLCIuLi8uLi9zcmMvc3ltYm9sLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSwgU3VwcHJlc3NlZEVycm9yLCBTeW1ib2wsIEl0ZXJhdG9yICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2VzRGVjb3JhdGUoY3RvciwgZGVzY3JpcHRvckluLCBkZWNvcmF0b3JzLCBjb250ZXh0SW4sIGluaXRpYWxpemVycywgZXh0cmFJbml0aWFsaXplcnMpIHtcclxuICAgIGZ1bmN0aW9uIGFjY2VwdChmKSB7IGlmIChmICE9PSB2b2lkIDAgJiYgdHlwZW9mIGYgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZ1bmN0aW9uIGV4cGVjdGVkXCIpOyByZXR1cm4gZjsgfVxyXG4gICAgdmFyIGtpbmQgPSBjb250ZXh0SW4ua2luZCwga2V5ID0ga2luZCA9PT0gXCJnZXR0ZXJcIiA/IFwiZ2V0XCIgOiBraW5kID09PSBcInNldHRlclwiID8gXCJzZXRcIiA6IFwidmFsdWVcIjtcclxuICAgIHZhciB0YXJnZXQgPSAhZGVzY3JpcHRvckluICYmIGN0b3IgPyBjb250ZXh0SW5bXCJzdGF0aWNcIl0gPyBjdG9yIDogY3Rvci5wcm90b3R5cGUgOiBudWxsO1xyXG4gICAgdmFyIGRlc2NyaXB0b3IgPSBkZXNjcmlwdG9ySW4gfHwgKHRhcmdldCA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBjb250ZXh0SW4ubmFtZSkgOiB7fSk7XHJcbiAgICB2YXIgXywgZG9uZSA9IGZhbHNlO1xyXG4gICAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICB2YXIgY29udGV4dCA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluKSBjb250ZXh0W3BdID0gcCA9PT0gXCJhY2Nlc3NcIiA/IHt9IDogY29udGV4dEluW3BdO1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluLmFjY2VzcykgY29udGV4dC5hY2Nlc3NbcF0gPSBjb250ZXh0SW4uYWNjZXNzW3BdO1xyXG4gICAgICAgIGNvbnRleHQuYWRkSW5pdGlhbGl6ZXIgPSBmdW5jdGlvbiAoZikgeyBpZiAoZG9uZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgaW5pdGlhbGl6ZXJzIGFmdGVyIGRlY29yYXRpb24gaGFzIGNvbXBsZXRlZFwiKTsgZXh0cmFJbml0aWFsaXplcnMucHVzaChhY2NlcHQoZiB8fCBudWxsKSk7IH07XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9ICgwLCBkZWNvcmF0b3JzW2ldKShraW5kID09PSBcImFjY2Vzc29yXCIgPyB7IGdldDogZGVzY3JpcHRvci5nZXQsIHNldDogZGVzY3JpcHRvci5zZXQgfSA6IGRlc2NyaXB0b3Jba2V5XSwgY29udGV4dCk7XHJcbiAgICAgICAgaWYgKGtpbmQgPT09IFwiYWNjZXNzb3JcIikge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHR5cGVvZiByZXN1bHQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5nZXQpKSBkZXNjcmlwdG9yLmdldCA9IF87XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5zZXQpKSBkZXNjcmlwdG9yLnNldCA9IF87XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5pbml0KSkgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKF8gPSBhY2NlcHQocmVzdWx0KSkge1xyXG4gICAgICAgICAgICBpZiAoa2luZCA9PT0gXCJmaWVsZFwiKSBpbml0aWFsaXplcnMudW5zaGlmdChfKTtcclxuICAgICAgICAgICAgZWxzZSBkZXNjcmlwdG9yW2tleV0gPSBfO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0YXJnZXQpIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGNvbnRleHRJbi5uYW1lLCBkZXNjcmlwdG9yKTtcclxuICAgIGRvbmUgPSB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcnVuSW5pdGlhbGl6ZXJzKHRoaXNBcmcsIGluaXRpYWxpemVycywgdmFsdWUpIHtcclxuICAgIHZhciB1c2VWYWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0aWFsaXplcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YWx1ZSA9IHVzZVZhbHVlID8gaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZywgdmFsdWUpIDogaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXNlVmFsdWUgPyB2YWx1ZSA6IHZvaWQgMDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Byb3BLZXkoeCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB4ID09PSBcInN5bWJvbFwiID8geCA6IFwiXCIuY29uY2F0KHgpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc2V0RnVuY3Rpb25OYW1lKGYsIG5hbWUsIHByZWZpeCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN5bWJvbFwiKSBuYW1lID0gbmFtZS5kZXNjcmlwdGlvbiA/IFwiW1wiLmNvbmNhdChuYW1lLmRlc2NyaXB0aW9uLCBcIl1cIikgOiBcIlwiO1xyXG4gICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCBcIm5hbWVcIiwgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiBwcmVmaXggPyBcIlwiLmNvbmNhdChwcmVmaXgsIFwiIFwiLCBuYW1lKSA6IG5hbWUgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnID0gT2JqZWN0LmNyZWF0ZSgodHlwZW9mIEl0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKTtcclxuICAgIHJldHVybiBnLm5leHQgPSB2ZXJiKDApLCBnW1widGhyb3dcIl0gPSB2ZXJiKDEpLCBnW1wicmV0dXJuXCJdID0gdmVyYigyKSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xyXG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcclxuICAgICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgQXN5bmNJdGVyYXRvciA9PT0gXCJmdW5jdGlvblwiID8gQXN5bmNJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiLCBhd2FpdFJldHVybiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIGF3YWl0UmV0dXJuKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUodikudGhlbihmLCByZWplY3QpOyB9OyB9XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaWYgKGdbbl0pIHsgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgaWYgKGYpIGlbbl0gPSBmKGlbbl0pOyB9IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBmYWxzZSB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG52YXIgb3duS2V5cyA9IGZ1bmN0aW9uKG8pIHtcclxuICAgIG93bktleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiAobykge1xyXG4gICAgICAgIHZhciBhciA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGsgaW4gbykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBrKSkgYXJbYXIubGVuZ3RoXSA9IGs7XHJcbiAgICAgICAgcmV0dXJuIGFyO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBvd25LZXlzKG8pO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgPSBvd25LZXlzKG1vZCksIGkgPSAwOyBpIDwgay5sZW5ndGg7IGkrKykgaWYgKGtbaV0gIT09IFwiZGVmYXVsdFwiKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGtbaV0pO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEluKHN0YXRlLCByZWNlaXZlcikge1xyXG4gICAgaWYgKHJlY2VpdmVyID09PSBudWxsIHx8ICh0eXBlb2YgcmVjZWl2ZXIgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHJlY2VpdmVyICE9PSBcImZ1bmN0aW9uXCIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHVzZSAnaW4nIG9wZXJhdG9yIG9uIG5vbi1vYmplY3RcIik7XHJcbiAgICByZXR1cm4gdHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciA9PT0gc3RhdGUgOiBzdGF0ZS5oYXMocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52LCB2YWx1ZSwgYXN5bmMpIHtcclxuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdm9pZCAwKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBleHBlY3RlZC5cIik7XHJcbiAgICAgICAgdmFyIGRpc3Bvc2UsIGlubmVyO1xyXG4gICAgICAgIGlmIChhc3luYykge1xyXG4gICAgICAgICAgICBpZiAoIVN5bWJvbC5hc3luY0Rpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNEaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgICAgICAgICAgZGlzcG9zZSA9IHZhbHVlW1N5bWJvbC5hc3luY0Rpc3Bvc2VdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGlzcG9zZSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIGlmICghU3ltYm9sLmRpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuZGlzcG9zZSBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICAgICAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuZGlzcG9zZV07XHJcbiAgICAgICAgICAgIGlmIChhc3luYykgaW5uZXIgPSBkaXNwb3NlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIGRpc3Bvc2UgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBub3QgZGlzcG9zYWJsZS5cIik7XHJcbiAgICAgICAgaWYgKGlubmVyKSBkaXNwb3NlID0gZnVuY3Rpb24oKSB7IHRyeSB7IGlubmVyLmNhbGwodGhpcyk7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpOyB9IH07XHJcbiAgICAgICAgZW52LnN0YWNrLnB1c2goeyB2YWx1ZTogdmFsdWUsIGRpc3Bvc2U6IGRpc3Bvc2UsIGFzeW5jOiBhc3luYyB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFzeW5jKSB7XHJcbiAgICAgICAgZW52LnN0YWNrLnB1c2goeyBhc3luYzogdHJ1ZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZTtcclxuXHJcbn1cclxuXHJcbnZhciBfU3VwcHJlc3NlZEVycm9yID0gdHlwZW9mIFN1cHByZXNzZWRFcnJvciA9PT0gXCJmdW5jdGlvblwiID8gU3VwcHJlc3NlZEVycm9yIDogZnVuY3Rpb24gKGVycm9yLCBzdXBwcmVzc2VkLCBtZXNzYWdlKSB7XHJcbiAgICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kaXNwb3NlUmVzb3VyY2VzKGVudikge1xyXG4gICAgZnVuY3Rpb24gZmFpbChlKSB7XHJcbiAgICAgICAgZW52LmVycm9yID0gZW52Lmhhc0Vycm9yID8gbmV3IF9TdXBwcmVzc2VkRXJyb3IoZSwgZW52LmVycm9yLCBcIkFuIGVycm9yIHdhcyBzdXBwcmVzc2VkIGR1cmluZyBkaXNwb3NhbC5cIikgOiBlO1xyXG4gICAgICAgIGVudi5oYXNFcnJvciA9IHRydWU7XHJcbiAgICB9XHJcbiAgICB2YXIgciwgcyA9IDA7XHJcbiAgICBmdW5jdGlvbiBuZXh0KCkge1xyXG4gICAgICAgIHdoaWxlIChyID0gZW52LnN0YWNrLnBvcCgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXIuYXN5bmMgJiYgcyA9PT0gMSkgcmV0dXJuIHMgPSAwLCBlbnYuc3RhY2sucHVzaChyKSwgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihuZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmIChyLmRpc3Bvc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gci5kaXNwb3NlLmNhbGwoci52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIuYXN5bmMpIHJldHVybiBzIHw9IDIsIFByb21pc2UucmVzb2x2ZShyZXN1bHQpLnRoZW4obmV4dCwgZnVuY3Rpb24oZSkgeyBmYWlsKGUpOyByZXR1cm4gbmV4dCgpOyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgcyB8PSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBmYWlsKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzID09PSAxKSByZXR1cm4gZW52Lmhhc0Vycm9yID8gUHJvbWlzZS5yZWplY3QoZW52LmVycm9yKSA6IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIGlmIChlbnYuaGFzRXJyb3IpIHRocm93IGVudi5lcnJvcjtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXh0KCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jld3JpdGVSZWxhdGl2ZUltcG9ydEV4dGVuc2lvbihwYXRoLCBwcmVzZXJ2ZUpzeCkge1xyXG4gICAgaWYgKHR5cGVvZiBwYXRoID09PSBcInN0cmluZ1wiICYmIC9eXFwuXFwuP1xcLy8udGVzdChwYXRoKSkge1xyXG4gICAgICAgIHJldHVybiBwYXRoLnJlcGxhY2UoL1xcLih0c3gpJHwoKD86XFwuZCk/KSgoPzpcXC5bXi4vXSs/KT8pXFwuKFtjbV0/KXRzJC9pLCBmdW5jdGlvbiAobSwgdHN4LCBkLCBleHQsIGNtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c3ggPyBwcmVzZXJ2ZUpzeCA/IFwiLmpzeFwiIDogXCIuanNcIiA6IGQgJiYgKCFleHQgfHwgIWNtKSA/IG0gOiAoZCArIGV4dCArIFwiLlwiICsgY20udG9Mb3dlckNhc2UoKSArIFwianNcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGF0aDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgX19leHRlbmRzOiBfX2V4dGVuZHMsXHJcbiAgICBfX2Fzc2lnbjogX19hc3NpZ24sXHJcbiAgICBfX3Jlc3Q6IF9fcmVzdCxcclxuICAgIF9fZGVjb3JhdGU6IF9fZGVjb3JhdGUsXHJcbiAgICBfX3BhcmFtOiBfX3BhcmFtLFxyXG4gICAgX19lc0RlY29yYXRlOiBfX2VzRGVjb3JhdGUsXHJcbiAgICBfX3J1bkluaXRpYWxpemVyczogX19ydW5Jbml0aWFsaXplcnMsXHJcbiAgICBfX3Byb3BLZXk6IF9fcHJvcEtleSxcclxuICAgIF9fc2V0RnVuY3Rpb25OYW1lOiBfX3NldEZ1bmN0aW9uTmFtZSxcclxuICAgIF9fbWV0YWRhdGE6IF9fbWV0YWRhdGEsXHJcbiAgICBfX2F3YWl0ZXI6IF9fYXdhaXRlcixcclxuICAgIF9fZ2VuZXJhdG9yOiBfX2dlbmVyYXRvcixcclxuICAgIF9fY3JlYXRlQmluZGluZzogX19jcmVhdGVCaW5kaW5nLFxyXG4gICAgX19leHBvcnRTdGFyOiBfX2V4cG9ydFN0YXIsXHJcbiAgICBfX3ZhbHVlczogX192YWx1ZXMsXHJcbiAgICBfX3JlYWQ6IF9fcmVhZCxcclxuICAgIF9fc3ByZWFkOiBfX3NwcmVhZCxcclxuICAgIF9fc3ByZWFkQXJyYXlzOiBfX3NwcmVhZEFycmF5cyxcclxuICAgIF9fc3ByZWFkQXJyYXk6IF9fc3ByZWFkQXJyYXksXHJcbiAgICBfX2F3YWl0OiBfX2F3YWl0LFxyXG4gICAgX19hc3luY0dlbmVyYXRvcjogX19hc3luY0dlbmVyYXRvcixcclxuICAgIF9fYXN5bmNEZWxlZ2F0b3I6IF9fYXN5bmNEZWxlZ2F0b3IsXHJcbiAgICBfX2FzeW5jVmFsdWVzOiBfX2FzeW5jVmFsdWVzLFxyXG4gICAgX19tYWtlVGVtcGxhdGVPYmplY3Q6IF9fbWFrZVRlbXBsYXRlT2JqZWN0LFxyXG4gICAgX19pbXBvcnRTdGFyOiBfX2ltcG9ydFN0YXIsXHJcbiAgICBfX2ltcG9ydERlZmF1bHQ6IF9faW1wb3J0RGVmYXVsdCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQ6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0OiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEluOiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4sXHJcbiAgICBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZTogX19hZGREaXNwb3NhYmxlUmVzb3VyY2UsXHJcbiAgICBfX2Rpc3Bvc2VSZXNvdXJjZXM6IF9fZGlzcG9zZVJlc291cmNlcyxcclxuICAgIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uOiBfX3Jld3JpdGVSZWxhdGl2ZUltcG9ydEV4dGVuc2lvbixcclxufTtcclxuIixudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbF0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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\n", "import { NewLineSymbol } from \"@git-diff-view/utils\";\nimport fastDiff from \"fast-diff\";\n\nimport type { DiffLine } from \"./diff-line\";\n\nexport interface IRange {\n  readonly range: {\n    /** The starting location for the range. */\n    readonly location: number;\n\n    /** The length of the range. */\n    readonly length: number;\n  };\n\n  readonly hasLineChange?: boolean;\n\n  readonly newLineSymbol?: NewLineSymbol;\n}\n\nexport interface DiffRange {\n  readonly range: { type: 1 | -1 | 0; str: string; location: number; length: number }[];\n\n  readonly hasLineChange?: boolean;\n\n  readonly newLineSymbol?: NewLineSymbol;\n}\n\nconst maxLength = 1000;\n\n/** Get the maximum position in the range. */\nfunction rangeMax(range: IRange[\"range\"]): number {\n  return range.location + range.length;\n}\n\n/** Get the length of the common substring between the two strings. */\nfunction commonLength(\n  stringA: string,\n  rangeA: IRange[\"range\"],\n  stringB: string,\n  rangeB: IRange[\"range\"],\n  reverse: boolean\n): number {\n  const max = Math.min(rangeA.length, rangeB.length);\n  const startA = reverse ? rangeMax(rangeA) - 1 : rangeA.location;\n  const startB = reverse ? rangeMax(rangeB) - 1 : rangeB.location;\n  const stride = reverse ? -1 : 1;\n\n  let length = 0;\n  while (Math.abs(length) < max) {\n    if (stringA[startA + length] !== stringB[startB + length]) {\n      break;\n    }\n\n    length += stride;\n  }\n\n  return Math.abs(length);\n}\n\nfunction isInValidString(s: string) {\n  return s.trim().length === 0 || s.length >= maxLength;\n}\n\nfunction checkNewLineSymbolChange(\n  addition: DiffLine,\n  deletion: DiffLine\n): { addSymbol: NewLineSymbol; addString: string; delSymbol: NewLineSymbol; delString: string } {\n  const stringA = addition.text;\n\n  const stringB = deletion.text;\n\n  const aEndStr = stringA.slice(-2);\n\n  const bEndStr = stringB.slice(-2);\n\n  const aSymbol =\n    aEndStr === \"\\r\\n\"\n      ? NewLineSymbol.CRLF\n      : aEndStr.endsWith(\"\\r\")\n        ? NewLineSymbol.CR\n        : aEndStr.endsWith(\"\\n\")\n          ? NewLineSymbol.LF\n          : NewLineSymbol.NULL;\n\n  const bSymbol =\n    bEndStr === \"\\r\\n\"\n      ? NewLineSymbol.CRLF\n      : bEndStr.endsWith(\"\\r\")\n        ? NewLineSymbol.CR\n        : bEndStr.endsWith(\"\\n\")\n          ? NewLineSymbol.LF\n          : NewLineSymbol.NULL;\n\n  const hasNewLineChanged = addition.noTrailingNewLine !== deletion.noTrailingNewLine;\n\n  if (aSymbol === bSymbol && !hasNewLineChanged) {\n    return { addSymbol: undefined, addString: stringA, delSymbol: undefined, delString: stringB };\n  }\n\n  return {\n    addSymbol: hasNewLineChanged\n      ? addition.noTrailingNewLine\n        ? NewLineSymbol.NEWLINE\n        : NewLineSymbol.NORMAL\n      : aSymbol,\n    addString:\n      aSymbol === NewLineSymbol.CRLF\n        ? stringA.slice(0, -2)\n        : aSymbol === NewLineSymbol.CR || aSymbol === NewLineSymbol.LF\n          ? stringA.slice(0, -1)\n          : stringA,\n    delSymbol: hasNewLineChanged\n      ? deletion.noTrailingNewLine\n        ? NewLineSymbol.NEWLINE\n        : NewLineSymbol.NORMAL\n      : bSymbol,\n    delString:\n      bSymbol === NewLineSymbol.CRLF\n        ? stringB.slice(0, -2)\n        : bSymbol === NewLineSymbol.CR || bSymbol === NewLineSymbol.LF\n          ? stringB.slice(0, -1)\n          : stringB,\n  };\n}\n\n// TODO maybe could use the original content line.  fixed\n/** Get the changed ranges in the strings, relative to each other. */\nexport function relativeChanges(addition: DiffLine, deletion: DiffLine): { addRange: IRange; delRange: IRange } {\n  const stringA = addition.text;\n\n  const stringB = deletion.text;\n\n  const { addString, delString, addSymbol, delSymbol } = checkNewLineSymbolChange(addition, deletion);\n\n  if (addString === delString && addSymbol && delSymbol) {\n    return {\n      addRange: {\n        range: {\n          location: addString.length,\n          length: stringA.length - addString.length,\n        },\n        hasLineChange: true,\n        newLineSymbol: addSymbol,\n      },\n      delRange: {\n        range: {\n          location: delString.length,\n          length: stringB.length - delString.length,\n        },\n        hasLineChange: true,\n        newLineSymbol: delSymbol,\n      },\n    };\n  }\n\n  let delRange = { location: 0, length: delString.length };\n  let addRange = { location: 0, length: addString.length };\n\n  if (isInValidString(stringA) || isInValidString(stringB)) {\n    addRange.length = 0;\n    delRange.length = 0;\n\n    return {\n      addRange: { range: addRange },\n      delRange: { range: delRange },\n    };\n  }\n\n  const prefixLength = commonLength(delString, delRange, addString, addRange, false);\n\n  delRange = {\n    location: delRange.location + prefixLength,\n    length: delRange.length - prefixLength,\n  };\n  addRange = {\n    location: addRange.location + prefixLength,\n    length: addRange.length - prefixLength,\n  };\n\n  const suffixLength = commonLength(delString, delRange, addString, addRange, true);\n\n  delRange.length -= suffixLength;\n\n  addRange.length -= suffixLength;\n\n  return {\n    addRange: {\n      range: addRange,\n      hasLineChange:\n        (addString.slice(0, addRange.location) + addString.slice(addRange.location + addRange.length)).trim().length >\n        0,\n    },\n    delRange: {\n      range: delRange,\n      hasLineChange:\n        (delString.slice(0, delRange.location) + delString.slice(delRange.location + delRange.length)).trim().length >\n        0,\n    },\n  };\n}\n\nexport function diffChanges(addition: DiffLine, deletion: DiffLine): { addRange: DiffRange; delRange: DiffRange } {\n  const { addString, addSymbol, delString, delSymbol } = checkNewLineSymbolChange(addition, deletion);\n\n  if (isInValidString(addString) || isInValidString(delString)) {\n    return {\n      addRange: { range: [], hasLineChange: !!addSymbol, newLineSymbol: addSymbol },\n      delRange: { range: [], hasLineChange: !!delSymbol, newLineSymbol: delSymbol },\n    };\n  }\n\n  const diffRange = fastDiff(delString, addString, 0, true);\n\n  let aStart = 0;\n  let bStart = 0;\n\n  const aRange = diffRange\n    .filter((i) => i[0] !== -1)\n    .map((i) => ({ type: i[0], str: i[1], location: aStart, length: ((aStart += i[1].length), i[1].length) }));\n\n  const bRange = diffRange\n    .filter((i) => i[0] !== 1)\n    .map((i) => ({ type: i[0], str: i[1], location: bStart, length: ((bStart += i[1].length), i[1].length) }));\n\n  return {\n    addRange: {\n      range: aRange,\n      hasLineChange: aRange.some((i) => i.type === 0 && i.str.trim().length > 0),\n      newLineSymbol: addSymbol,\n    },\n    delRange: {\n      range: bRange,\n      hasLineChange: aRange.some((i) => i.type === 0 && i.str.trim().length > 0),\n      newLineSymbol: delSymbol,\n    },\n  };\n}\n", "import type { DiffRange, IRange } from \"./change-range\";\n\n/** indicate what a line in the diff represents */\nexport enum DiffLineType {\n  Context,\n  Add,\n  Delete,\n  Hunk,\n}\n\n/** track details related to each line in the diff */\nexport class DiffLine {\n  public constructor(\n    public readonly text: string,\n    public readonly type: DiffLineType,\n    // Line number in the original diff patch (before expanding it), or null if\n    // it was added as part of a diff expansion action.\n    public readonly originalLineNumber: number | null,\n    public readonly oldLineNumber: number | null,\n    public readonly newLineNumber: number | null,\n    public readonly noTrailingNewLine: boolean = false,\n    public changes?: IRange,\n    public diffChanges?: DiffRange,\n    public plainTemplate?: string,\n    public syntaxTemplate?: string\n  ) {}\n\n  public withNoTrailingNewLine(noTrailingNewLine: boolean): DiffLine {\n    return new DiffLine(\n      this.text,\n      this.type,\n      this.originalLineNumber,\n      this.oldLineNumber,\n      this.newLineNumber,\n      noTrailingNewLine\n    );\n  }\n\n  public isIncludeableLine() {\n    return this.type === DiffLineType.Add || this.type === DiffLineType.Delete;\n  }\n\n  public equals(other: DiffLine) {\n    return (\n      this.text === other.text &&\n      this.type === other.type &&\n      this.originalLineNumber === other.originalLineNumber &&\n      this.oldLineNumber === other.oldLineNumber &&\n      this.newLineNumber === other.newLineNumber &&\n      this.noTrailingNewLine === other.noTrailingNewLine\n    );\n  }\n\n  public clone(text: string) {\n    return new DiffLine(\n      text,\n      this.type,\n      this.originalLineNumber,\n      this.oldLineNumber,\n      this.newLineNumber,\n      this.noTrailingNewLine\n    );\n  }\n}\n\nexport const checkDiffLineIncludeChange = (diffLine?: DiffLine) => {\n  if (!diffLine) return false;\n  return diffLine.type === DiffLineType.Add || diffLine.type === DiffLineType.Delete;\n};\n", "// copy from https://github.com/vuejs/core/blob/main/packages/shared/src/escapeHtml.ts\n\nconst escapeRE = /[\"'&<>]/;\n\nexport function escapeHtml(string: unknown): string {\n  const str = \"\" + string;\n  const match = escapeRE.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  let html = \"\";\n  let escaped: string;\n  let index: number;\n  let lastIndex = 0;\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escaped = \"&quot;\";\n        break;\n      case 38: // &\n        escaped = \"&amp;\";\n        break;\n      case 39: // '\n        escaped = \"&#39;\";\n        break;\n      case 60: // <\n        escaped = \"&lt;\";\n        break;\n      case 62: // >\n        escaped = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.slice(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escaped;\n  }\n\n  return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\n}\n", "let enableTransform = false;\n\nconst temp = (f: string) => f;\n\nlet transformContent = temp;\n\nlet transformFile = temp;\n\n/**\n *  **WARNING: DANGEROUS OPERATION** \n *\n * This function modifies global state and may cause unexpected side effects.\n * You may also need escapeHTML for the content.\n *\n * @param fn - The transformation function to help transform template content\n * @throws {Error} Throws an error if the provided parameter is not a function\n *\n * @example\n * ```typescript\n * // Use with caution - this affects global behavior\n * setTransformForTemplateContent((content) => content.trim());\n * ```\n */\nexport const setTransformForTemplateContent = (fn: (content: string) => string) => {\n  if (typeof fn !== \"function\") {\n    throw new Error(\"Transform must be a function\");\n  }\n\n  transformContent = fn;\n\n  enableTransform = true;\n};\n\n/**\n *  **WARNING: DANGEROUS OPERATION** \n *\n * @param fn - The transformation function to apply to file content\n * @throws {Error} Throws an error if the provided parameter is not a function\n *\n * @example\n * ```typescript\n * // Use with caution - this affects global behavior\n * setTransformFile((content) => content.toUpperCase());\n * ```\n */\nexport const setTransformForFile = (fn: (content: string) => string) => {\n  if (typeof fn !== \"function\") {\n    throw new Error(\"Transform must be a function\");\n  }\n  transformFile = fn;\n  enableTransform = true;\n};\n\n/**\n * Resets all transformation functions to their default state and disables transformation.\n *\n * @example\n * ```typescript\n * resetTransform(); // Clears all transformations\n * ```\n */\nexport const resetTransform = () => {\n  enableTransform = false;\n\n  transformContent = temp;\n\n  transformFile = temp;\n};\n\n/**\n * Checks whether content transformation is currently enabled.\n *\n * @returns {boolean} True if transformation is enabled, false otherwise\n *\n * @example\n * ```typescript\n * if (isTransformEnabled()) {\n *   console.log('Transformations are active');\n * }\n * ```\n */\nexport const isTransformEnabled = () => enableTransform;\n\n/**\n * Applies the transformation function to the provided content if transformation is enabled.\n *\n * @param content - The content string to transform\n * @returns {string} The transformed content if transformation is enabled and configured, otherwise the original content\n *\n * @example\n * ```typescript\n * const transformed = processTransformTemplateContent('  hello world  ');\n * ```\n */\nexport const processTransformTemplateContent = (content: string) => {\n  if (enableTransform && temp !== transformContent) {\n    return transformContent(content);\n  }\n  return content;\n};\n\n/**\n * Applies the file transformation function to the provided content if transformation is enabled.\n *\n * @param content - The content string to transform\n * @returns {string} The transformed content if transformation is enabled and configured, otherwise the original content\n *\n * @example\n * ```typescript\n * const transformed = doTransformFile('some file content');\n * ```\n */\nexport const processTransformForFile = (content: string) => {\n  if (enableTransform && temp !== transformFile) {\n    return transformFile(content);\n  }\n  return content;\n};\n", "import { addContentHighlightBGName, delContentHighlightBGName, getSymbol } from \"@git-diff-view/utils\";\n\nimport { escapeHtml } from \"../escape-html\";\n\nimport { processTransformTemplateContent, isTransformEnabled } from \"./transform\";\n\nimport type { SyntaxLineWithTemplate } from \"../file\";\nimport type { DiffLine } from \"./diff-line\";\nimport type { SyntaxLine } from \"@git-diff-view/lowlight\";\n\nconst defaultTransform = (content: string) => escapeHtml(content).replace(/\\n/g, \"\").replace(/\\r/g, \"\");\n\nexport const getPlainDiffTemplate = ({\n  diffLine,\n  rawLine,\n  operator,\n}: {\n  diffLine: DiffLine;\n  rawLine: string;\n  operator: \"add\" | \"del\";\n}) => {\n  if (diffLine.plainTemplate) return;\n\n  const changes = diffLine.changes;\n\n  if (!changes || !changes.hasLineChange || !rawLine) return;\n\n  const transform = isTransformEnabled() ? processTransformTemplateContent : defaultTransform;\n\n  const range = changes.range;\n  const str1 = rawLine.slice(0, range.location);\n  const str2 = rawLine.slice(range.location, range.location + range.length);\n  const str3 = rawLine.slice(range.location + range.length);\n  const isLast = str2.includes(\"\\n\");\n  const _str2 = isLast ? str2.replace(\"\\n\", \"\").replace(\"\\r\", \"\") : str2;\n  const isNewLineSymbolChanged = changes.newLineSymbol;\n\n  const template = `<span data-range-start=\"${range.location}\" data-range-end=\"${\n    range.location + range.length\n  }\">${transform(str1)}<span data-diff-highlight style=\"background-color: var(${operator === \"add\" ? addContentHighlightBGName : delContentHighlightBGName});border-radius: 0.2em;\">${\n    isLast\n      ? `${transform(_str2)}<span data-newline-symbol>${getSymbol(isNewLineSymbolChanged)}</span>`\n      : transform(str2)\n  }</span>${transform(str3)}</span>`;\n\n  diffLine.plainTemplate = template;\n};\n\nexport const getSyntaxDiffTemplate = ({\n  diffLine,\n  syntaxLine,\n  operator,\n}: {\n  diffLine: DiffLine;\n  syntaxLine: SyntaxLineWithTemplate;\n  operator: \"add\" | \"del\";\n}) => {\n  if (diffLine.syntaxTemplate || !syntaxLine) return;\n\n  const changes = diffLine.changes;\n\n  if (!changes || !changes.hasLineChange) return;\n\n  const transform = isTransformEnabled() ? processTransformTemplateContent : defaultTransform;\n\n  const range = changes.range;\n\n  let template = `<span data-range-start=\"${range.location}\" data-range-end=\"${range.location + range.length}\">`;\n\n  syntaxLine?.nodeList?.forEach(({ node, wrapper }) => {\n    if (node.endIndex < range.location || range.location + range.length < node.startIndex) {\n      template += `<span data-start=\"${node.startIndex}\" data-end=\"${node.endIndex}\" class=\"${(\n        wrapper?.properties?.className || []\n      )?.join(\" \")}\" style=\"${wrapper?.properties?.style || \"\"}\">${transform(node.value)}</span>`;\n    } else {\n      const index1 = range.location - node.startIndex;\n      const index2 = index1 < 0 ? 0 : index1;\n      const str1 = node.value.slice(0, index2);\n      const str2 = node.value.slice(index2, index1 + range.length);\n      const str3 = node.value.slice(index1 + range.length);\n      const isStart = str1.length || range.location === node.startIndex;\n      const isEnd = str3.length || node.endIndex === range.location + range.length - 1;\n      const isLast = str2.includes(\"\\n\");\n      const _str2 = isLast ? str2.replace(\"\\n\", \"\").replace(\"\\r\", \"\") : str2;\n      template += `<span data-start=\"${node.startIndex}\" data-end=\"${node.endIndex}\" class=\"${(\n        wrapper?.properties?.className || []\n      )?.join(\n        \" \"\n      )}\" style=\"${wrapper?.properties?.style || \"\"}\">${transform(str1)}<span data-diff-highlight style=\"background-color: var(${operator === \"add\" ? addContentHighlightBGName : delContentHighlightBGName});border-top-left-radius: ${isStart ? \"0.2em\" : \"0\"};border-bottom-left-radius: ${isStart ? \"0.2em\" : \"0\"};border-top-right-radius: ${isEnd || isLast ? \"0.2em\" : \"0\"};border-bottom-right-radius: ${isEnd || isLast ? \"0.2em\" : \"0\"}\">${\n        isLast\n          ? `${transform(_str2)}<span data-newline-symbol>${getSymbol(changes.newLineSymbol)}</span>`\n          : transform(str2)\n      }</span>${transform(str3)}</span>`;\n    }\n  });\n\n  template += \"</span>\";\n\n  diffLine.syntaxTemplate = template;\n};\n\nexport const getSyntaxLineTemplate = (line: SyntaxLine) => {\n  let template = \"\";\n\n  const transform = isTransformEnabled() ? processTransformTemplateContent : defaultTransform;\n\n  line?.nodeList?.forEach(({ node, wrapper }) => {\n    template += `<span data-start=\"${node.startIndex}\" data-end=\"${node.endIndex}\" class=\"${(\n      wrapper?.properties?.className || []\n    )?.join(\" \")}\" style=\"${wrapper?.properties?.style || \"\"}\">${transform(node.value)}</span>`;\n  });\n\n  return template;\n};\n\nexport const getPlainLineTemplate = (line: string) => {\n  if (!line) return \"\";\n\n  const transform = isTransformEnabled() ? processTransformTemplateContent : defaultTransform;\n\n  const template = transform(line);\n\n  return template;\n};\n", "import { relativeChanges } from \"./change-range\";\nimport { DiffLineType } from \"./diff-line\";\nimport { DiffHunkExpansionType } from \"./raw-diff\";\nimport { getPlainDiffTemplate, getSyntaxDiffTemplate } from \"./template\";\n\nimport type { SyntaxLineWithTemplate } from \"../file\";\nimport type { DiffLine } from \"./diff-line\";\nimport type { DiffHunk, DiffHunkHeader } from \"./raw-diff\";\n\n/** How many new lines will be added to a diff hunk by default. */\nexport const DefaultDiffExpansionStep = 40;\n\nexport function assertNever(_: never, message: string): never {\n  throw new Error(message);\n}\n\n/** Utility function for getting the digit count of the largest line number in an array of diff hunks */\nexport function getLargestLineNumber(hunks: DiffHunk[]): number {\n  if (hunks.length === 0) {\n    return 0;\n  }\n\n  for (let i = hunks.length - 1; i >= 0; i--) {\n    const hunk = hunks[i];\n\n    for (let j = hunk.lines.length - 1; j >= 0; j--) {\n      const line = hunk.lines[j];\n\n      if (line.type === DiffLineType.Hunk) {\n        continue;\n      }\n\n      const newLineNumber = line.newLineNumber ?? 0;\n      const oldLineNumber = line.oldLineNumber ?? 0;\n      return newLineNumber > oldLineNumber ? newLineNumber : oldLineNumber;\n    }\n  }\n\n  return 0;\n}\n\n/**\n * Calculates whether or not a hunk header can be expanded up, down, both, or if\n * the space represented by the hunk header is short and expansion there would\n * mean merging with the hunk above.\n *\n * @param hunkIndex     Index of the hunk to evaluate within the whole diff.\n * @param hunkHeader    Header of the hunk to evaluate.\n * @param previousHunk  Hunk previous to the one to evaluate. Null if the\n *                      evaluated hunk is the first one.\n */\nexport function getHunkHeaderExpansionType(\n  hunkIndex: number,\n  hunkHeader: DiffHunkHeader,\n  previousHunk: DiffHunk | null\n): DiffHunkExpansionType {\n  const distanceToPrevious =\n    previousHunk === null\n      ? Infinity\n      : hunkHeader.oldStartLine - previousHunk.header.oldStartLine - previousHunk.header.oldLineCount;\n\n  // In order to simplify the whole logic around expansion, only the hunk at the\n  // top can be expanded up exclusively, and only the hunk at the bottom (the\n  // dummy one, see getTextDiffWithBottomDummyHunk) can be expanded down\n  // exclusively.\n  // The rest of the hunks can be expanded both ways, except those which are too\n  // short and therefore the direction of expansion doesn't matter.\n  if (hunkIndex === 0) {\n    // The top hunk can only be expanded if there is content above it\n    if (hunkHeader.oldStartLine > 1 && hunkHeader.newStartLine > 1) {\n      return DiffHunkExpansionType.Up;\n    } else {\n      return DiffHunkExpansionType.None;\n    }\n  } else if (distanceToPrevious <= DefaultDiffExpansionStep) {\n    return DiffHunkExpansionType.Short;\n  } else {\n    return DiffHunkExpansionType.Both;\n  }\n}\n\nexport const numIterator = <T>(num: number, cb: (index: number) => T): T[] => {\n  const re = [];\n  for (let i = 0; i < num; i++) {\n    re.push(cb(i));\n  }\n  return re;\n};\n\nexport const getLang = (fileName: string) => {\n  const dotIndex = fileName.lastIndexOf(\".\");\n  const extension = fileName.slice(dotIndex + 1);\n  return extension;\n};\n\nexport const getDiffRange = (\n  additions: DiffLine[],\n  deletions: DiffLine[],\n  {\n    getAdditionRaw,\n    getDeletionRaw,\n    getAdditionSyntax,\n    getDeletionSyntax,\n  }: {\n    getAdditionRaw: (lineNumber: number) => string;\n    getDeletionRaw: (lineNumber: number) => string;\n    getAdditionSyntax: (lineNumber: number) => SyntaxLineWithTemplate;\n    getDeletionSyntax: (lineNumber: number) => SyntaxLineWithTemplate;\n  }\n) => {\n  if (additions.length === deletions.length) {\n    const len = additions.length;\n    for (let i = 0; i < len; i++) {\n      const addition = additions[i];\n      const deletion = deletions[i];\n      if (!addition.changes || !deletion.changes) {\n        // use the original text content to computed diff range\n        // fix: get diff with ignoreWhiteSpace config\n        const _addition = addition.clone(getAdditionRaw(addition.newLineNumber) || addition.text || \"\");\n        const _deletion = deletion.clone(getDeletionRaw(deletion.oldLineNumber) || deletion.text || \"\");\n        const { addRange, delRange } = relativeChanges(_addition, _deletion);\n        addition.changes = addRange;\n        deletion.changes = delRange;\n      }\n      if (!addition.plainTemplate || !deletion.plainTemplate) {\n        getPlainDiffTemplate({ diffLine: addition, rawLine: getAdditionRaw(addition.newLineNumber), operator: \"add\" });\n        getPlainDiffTemplate({ diffLine: deletion, rawLine: getDeletionRaw(deletion.oldLineNumber), operator: \"del\" });\n      }\n      if (!addition.syntaxTemplate || !deletion.syntaxTemplate) {\n        getSyntaxDiffTemplate({\n          diffLine: addition,\n          syntaxLine: getAdditionSyntax(addition.newLineNumber),\n          operator: \"add\",\n        });\n        getSyntaxDiffTemplate({\n          diffLine: deletion,\n          syntaxLine: getDeletionSyntax(deletion.oldLineNumber),\n          operator: \"del\",\n        });\n      }\n\n      // TODO! support word diff\n      // const { addRange: _addRange, delRange: _delRange } = diffChanges(_addition, _deletion);\n      // addition.diffChanges = _addRange;\n      // deletion.diffChanges = _delRange;\n    }\n  }\n};\n", "/* eslint-disable max-lines */\n\n// !NOTE: ALL of the diff parse logic copy from desktop, SEE https://github.com/desktop/desktop\n// With mirror change\n\n// https://en.wikipedia.org/wiki/Diff_utility\n//\n// @@ -l,s +l,s @@ optional section heading\n//\n// The hunk range information contains two hunk ranges. The range for the hunk of the original\n// file is preceded by a minus symbol, and the range for the new file is preceded by a plus\n// symbol. Each hunk range is of the format l,s where l is the starting line number and s is\n// the number of lines the change hunk applies to for each respective file.\n//\n// In many versions of GNU diff, each range can omit the comma and trailing value s,\n\nimport { DiffLine, DiffLineType } from \"./diff-line\";\nimport { assertNever, getHunkHeaderExpansionType, getLargestLineNumber } from \"./diff-tool\";\nimport { DiffHunk, DiffHunkHeader } from \"./raw-diff\";\n\nimport type { IRawDiff } from \"./raw-diff\";\n\n// in which case s defaults to 1\nconst diffHeaderRe = /^@@ -(\\d+)(?:,(\\d+))? \\+(\\d+)(?:,(\\d+))? @@/;\n\n/**\n * Regular expression matching invisible bidirectional Unicode characters that\n * may be interpreted or compiled differently than what it appears. More info:\n * https://github.co/hiddenchars\n */\nexport const HiddenBidiCharsRegex = /[\\u202A-\\u202E]|[\\u2066-\\u2069]/;\n\nconst DiffPrefixAdd = \"+\" as const;\nconst DiffPrefixDelete = \"-\" as const;\nconst DiffPrefixContext = \" \" as const;\nconst DiffPrefixNoNewline = \"\\\\\" as const;\n\ntype DiffLinePrefix =\n  | typeof DiffPrefixAdd\n  | typeof DiffPrefixDelete\n  | typeof DiffPrefixContext\n  | typeof DiffPrefixNoNewline;\nconst DiffLinePrefixChars: Set<DiffLinePrefix> = new Set([\n  DiffPrefixAdd,\n  DiffPrefixDelete,\n  DiffPrefixContext,\n  DiffPrefixNoNewline,\n]);\n\ninterface IDiffHeaderInfo {\n  /**\n   * Whether or not the diff header contained a marker indicating\n   * that a diff couldn't be produced due to the contents of the\n   * new and/or old file was binary.\n   */\n  readonly isBinary: boolean;\n}\n\n/**\n * A parser for the GNU unified diff format\n *\n * See https://www.gnu.org/software/diffutils/manual/html_node/Detailed-Unified.html\n */\nexport class DiffParser {\n  /**\n   * Line start pointer.\n   *\n   * The offset into the text property where the current line starts (ie either zero\n   * or one character ahead of the last newline character).\n   */\n  private ls!: number;\n\n  /**\n   * Line end pointer.\n   *\n   * The offset into the text property where the current line ends (ie it points to\n   * the newline character) or -1 if the line boundary hasn't been determined yet\n   */\n  private le!: number;\n\n  /**\n   * The text buffer containing the raw, unified diff output to be parsed\n   */\n  private text!: string;\n\n  public constructor() {\n    Object.defineProperty(this, \"__v_skip\", { value: true });\n    this.reset();\n  }\n\n  /**\n   * Resets the internal parser state so that it can be reused.\n   *\n   * This is done automatically at the end of each parse run.\n   */\n  private reset() {\n    this.ls = 0;\n    this.le = -1;\n    this.text = \"\";\n  }\n\n  /**\n   * Aligns the internal character pointers at the boundaries of\n   * the next line.\n   *\n   * Returns true if successful or false if the end of the diff\n   * has been reached.\n   */\n  private nextLine(): boolean {\n    this.ls = this.le + 1;\n\n    // We've reached the end of the diff\n    if (this.ls >= this.text.length) {\n      return false;\n    }\n\n    this.le = this.text.indexOf(\"\\n\", this.ls);\n\n    // If we can't find the next newline character we'll put our\n    // end pointer at the end of the diff string\n    if (this.le === -1) {\n      this.le = this.text.length;\n    }\n\n    // We've succeeded if there's anything to read in between the\n    // start and the end\n    return this.ls !== this.le;\n  }\n\n  /**\n   * Advances to the next line and returns it as a substring\n   * of the raw diff text. Returns null if end of diff was\n   * reached.\n   */\n  private readLine(header: boolean): string | null {\n    if (header) {\n      return this.nextLine() ? this.text.substring(this.ls, this.le) : null;\n    } else {\n      return this.nextLine() ? this.text.substring(this.ls + 1, this.le + 1) : null;\n    }\n  }\n\n  /** Tests if the current line starts with the given search text */\n  private lineStartsWith(searchString: string): boolean {\n    return this.text.startsWith(searchString, this.ls);\n  }\n\n  /** Tests if the current line ends with the given search text */\n  private lineEndsWith(searchString: string): boolean {\n    return this.text.endsWith(searchString, this.le);\n  }\n\n  /**\n   * Returns the starting character of the next line without\n   * advancing the internal state. Returns null if advancing\n   * would mean reaching the end of the diff.\n   */\n  private peek(): string | null {\n    const p = this.le + 1;\n    return p < this.text.length ? this.text[p] : null;\n  }\n\n  /**\n   * Parse the diff header, meaning everything from the\n   * start of the diff output to the end of the line beginning\n   * with +++\n   *\n   * Example diff header:\n   *\n   *   diff --git a/app/src/lib/diff-parser.ts b/app/src/lib/diff-parser.ts\n   *   index e1d4871..3bd3ee0 100644\n   *   --- a/app/src/lib/diff-parser.ts\n   *   +++ b/app/src/lib/diff-parser.ts\n   *\n   * Returns an object with information extracted from the diff\n   * header (currently whether it's a binary patch) or null if\n   * the end of the diff was reached before the +++ line could be\n   * found (which is a valid state).\n   */\n  private parseDiffHeader(): IDiffHeaderInfo | null {\n    // TODO: There's information in here that we might want to\n    // capture, such as mode changes\n    while (this.nextLine()) {\n      if (this.lineStartsWith(\"Binary files \") && this.lineEndsWith(\"differ\")) {\n        return { isBinary: true };\n      }\n\n      if (this.lineStartsWith(\"+++\")) {\n        return { isBinary: false };\n      }\n    }\n\n    // It's not an error to not find the +++ line, see the\n    // 'parses diff of empty file' test in diff-parser-tests.ts\n    return null;\n  }\n\n  /**\n   * Attempts to convert a RegExp capture group into a number.\n   * If the group doesn't exist or wasn't captured the function\n   * will return the value of the defaultValue parameter or throw\n   * an error if no default value was provided. If the captured\n   * string can't be converted to a number an error will be thrown.\n   */\n  private numberFromGroup(m: RegExpMatchArray, group: number, defaultValue: number | null = null): number {\n    const str = m[group];\n    if (!str) {\n      if (!defaultValue) {\n        throw new Error(`Group ${group} missing from regexp match and no defaultValue was provided`);\n      }\n\n      return defaultValue;\n    }\n\n    const num = parseInt(str, 10);\n\n    if (isNaN(num)) {\n      throw new Error(`Could not parse capture group ${group} into number: ${str}`);\n    }\n\n    return num;\n  }\n\n  /**\n   * Parses a hunk header or throws an error if the given line isn't\n   * a well-formed hunk header.\n   *\n   * We currently only extract the line number information and\n   * ignore any hunk headings.\n   *\n   * Example hunk header (text within ``):\n   *\n   * `@@ -84,10 +82,8 @@ export function parseRawDiff(lines: ReadonlyArray<string>): Diff {`\n   *\n   * Where everything after the last @@ is what's known as the hunk, or section, heading\n   */\n  private parseHunkHeader(line: string): DiffHunkHeader {\n    const m = diffHeaderRe.exec(line);\n    if (!m) {\n      throw new Error(`Invalid hunk header format`);\n    }\n\n    // If endLines are missing default to 1, see diffHeaderRe docs\n    const oldStartLine = this.numberFromGroup(m, 1);\n    const oldLineCount = this.numberFromGroup(m, 2, 1);\n    const newStartLine = this.numberFromGroup(m, 3);\n    const newLineCount = this.numberFromGroup(m, 4, 1);\n\n    return new DiffHunkHeader(oldStartLine, oldLineCount, newStartLine, newLineCount);\n  }\n\n  /**\n   * Convenience function which lets us leverage the type system to\n   * prove exhaustive checks in parseHunk.\n   *\n   * Takes an arbitrary string and checks to see if the first character\n   * of that string is one of the allowed prefix characters for diff\n   * lines (ie lines in between hunk headers).\n   */\n  private parseLinePrefix(c: string | null): DiffLinePrefix | null {\n    // Since we know that DiffLinePrefixChars and the DiffLinePrefix type\n    // include the same characters we can tell the type system that we\n    // now know that c[0] is one of the characters in the DifflinePrefix set\n    if (c && c.length && (DiffLinePrefixChars as Set<string>).has(c[0])) {\n      return c[0] as DiffLinePrefix;\n    }\n\n    return null;\n  }\n\n  /**\n   * Parses a hunk, including its header or throws an error if the diff doesn't\n   * contain a well-formed diff hunk at the current position.\n   *\n   * Expects that the position has been advanced to the beginning of a presumed\n   * diff hunk header.\n   *\n   * @param linesConsumed The number of unified diff lines consumed up until\n   *                      this point by the diff parser. Used to give the\n   *                      position and length (in lines) of the parsed hunk\n   *                      relative to the overall parsed diff. These numbers\n   *                      have no real meaning in the context of a diff and\n   *                      are only used to aid the app in line-selections.\n   */\n  private parseHunk(linesConsumed: number, hunkIndex: number, previousHunk: DiffHunk | null): DiffHunk {\n    const headerLine = this.readLine(true);\n    if (!headerLine) {\n      throw new Error(\"Expected hunk header but reached end of diff\");\n    }\n\n    const header = this.parseHunkHeader(headerLine);\n    const lines = new Array<DiffLine>();\n    lines.push(new DiffLine(headerLine, DiffLineType.Hunk, 1, null, null));\n\n    let c: DiffLinePrefix | null;\n\n    let rollingDiffBeforeCounter = header.oldStartLine;\n    let rollingDiffAfterCounter = header.newStartLine;\n\n    let diffLineNumber = linesConsumed;\n    while ((c = this.parseLinePrefix(this.peek()))) {\n      const line = this.readLine(false);\n\n      if (!line) {\n        throw new Error(\"Expected unified diff line but reached end of diff\");\n      }\n\n      // A marker indicating that the last line in the original or the new file\n      // is missing a trailing newline. In other words, the presence of this marker\n      // means that the new and/or original file lacks a trailing newline.\n      //\n      // When we find it we have to look up the previous line and set the\n      // noTrailingNewLine flag\n      if (c === DiffPrefixNoNewline) {\n        // See https://github.com/git/git/blob/21f862b498925194f8f1ebe8203b7a7df756555b/apply.c#L1725-L1732\n        if (line.length < 12) {\n          throw new Error(`Expected \"no newline at end of file\" marker to be at least 12 bytes long`);\n        }\n\n        const previousLineIndex = lines.length - 1;\n        const previousLine = lines[previousLineIndex];\n        lines[previousLineIndex] = previousLine.withNoTrailingNewLine(true);\n\n        continue;\n      }\n\n      // We must increase `diffLineNumber` only when we're certain that the line\n      // is not a \"no newline\" marker. Otherwise, we'll end up with a wrong\n      // `diffLineNumber` for the next line. This could happen if the last line\n      // in the file doesn't have a newline before the change.\n      diffLineNumber++;\n\n      let diffLine: DiffLine;\n\n      if (c === DiffPrefixAdd) {\n        diffLine = new DiffLine(line, DiffLineType.Add, diffLineNumber, null, rollingDiffAfterCounter++);\n      } else if (c === DiffPrefixDelete) {\n        diffLine = new DiffLine(line, DiffLineType.Delete, diffLineNumber, rollingDiffBeforeCounter++, null);\n      } else if (c === DiffPrefixContext) {\n        diffLine = new DiffLine(\n          line,\n          DiffLineType.Context,\n          diffLineNumber,\n          rollingDiffBeforeCounter++,\n          rollingDiffAfterCounter++\n        );\n      } else {\n        return assertNever(c, `Unknown DiffLinePrefix: ${c}`);\n      }\n\n      lines.push(diffLine);\n    }\n\n    if (lines.length === 1) {\n      throw new Error(\"Malformed diff, empty hunk\");\n    }\n\n    return new DiffHunk(\n      header,\n      lines,\n      linesConsumed,\n      linesConsumed + lines.length - 1,\n      getHunkHeaderExpansionType(hunkIndex, header, previousHunk)\n    );\n  }\n\n  /**\n   * Parse a well-formed unified diff into hunks and lines.\n   *\n   * @param text A unified diff produced by git diff, git log --patch\n   *             or any other git plumbing command that produces unified\n   *             diffs.\n   */\n  public parse(text: string): IRawDiff {\n    this.text = text;\n\n    try {\n      const headerInfo = this.parseDiffHeader();\n\n      const headerEnd = this.le;\n      const header = this.text.substring(0, headerEnd);\n\n      // empty diff\n      if (!headerInfo) {\n        return {\n          header,\n          contents: \"\",\n          hunks: [],\n          isBinary: false,\n          maxLineNumber: 0,\n          hasHiddenBidiChars: false,\n        };\n      }\n\n      if (headerInfo.isBinary) {\n        return {\n          header,\n          contents: \"\",\n          hunks: [],\n          isBinary: true,\n          maxLineNumber: 0,\n          hasHiddenBidiChars: false,\n        };\n      }\n\n      const hunks = new Array<DiffHunk>();\n      let linesConsumed = 0;\n      let previousHunk: DiffHunk | null = null;\n\n      do {\n        const hunk = this.parseHunk(linesConsumed, hunks.length, previousHunk);\n        hunks.push(hunk);\n        previousHunk = hunk;\n        linesConsumed += hunk.lines.length;\n      } while (this.peek());\n\n      const contents = this.text\n        .substring(headerEnd + 1, this.le)\n        // Note that this simply returns a reference to the\n        // substring if no match is found, it does not create\n        // a new string instance.\n        .replace(/\\n\\\\ No newline at end of file/g, \"\");\n\n      return {\n        header,\n        contents,\n        hunks,\n        isBinary: headerInfo.isBinary,\n        maxLineNumber: getLargestLineNumber(hunks),\n        hasHiddenBidiChars: HiddenBidiCharsRegex.test(text),\n      };\n    } finally {\n      this.reset();\n    }\n  }\n}\n\nexport const parseInstance = new DiffParser();\n", "/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n", "export class Cache<K, V> extends Map<K, V> {\n  #keyArray: K[] = [];\n\n  name: string;\n\n  #maxLength = 30;\n\n  get maxLength() {\n    return this.#maxLength;\n  }\n\n  setMaxLength(length: number) {\n    this.#maxLength = length;\n    this.#checkLength();\n  }\n\n  set(key: K, value: V): this {\n    if (this.#maxLength <= 0) return this;\n    if (this.has(key)) return this;\n    this.#keyArray.push(key);\n    this.#checkLength();\n    return super.set(key, value);\n  }\n\n  #checkLength() {\n    while (this.#keyArray.length > this.#maxLength) {\n      const key = this.#keyArray.shift();\n      this.delete(key);\n    }\n  }\n}\n", "import { highlighter } from \"@git-diff-view/lowlight\";\n\nimport { Cache } from \"./cache\";\nimport { getPlainLineTemplate, getSyntaxLineTemplate, processTransformForFile } from \"./parse\";\n\nimport type { DiffAST, DiffHighlighter, DiffHighlighterLang, SyntaxLine } from \"@git-diff-view/lowlight\";\n\nconst map = new Cache<string, File>();\n\nconst devKey = \"@git-diff-cache\";\n\nmap.setMaxLength(50);\n\nmap.name = \"@git-diff-view/core\";\n\nif (__DEV__ && typeof globalThis !== \"undefined\") {\n  if (Array.isArray(globalThis[devKey])) {\n    globalThis[devKey] = globalThis[devKey].filter((i) => i !== map);\n\n    if (globalThis[devKey].length > 0) {\n      console.warn(\"there are multiple instance of @git-diff-view/core in current environment!\");\n    }\n\n    globalThis[devKey].push(map);\n  } else {\n    globalThis[devKey] = [map];\n  }\n}\n\nexport type SyntaxLineWithTemplate = SyntaxLine & {\n  template?: string;\n};\n\nexport class File {\n  ast?: DiffAST;\n\n  rawFile: Record<number, string> = {};\n\n  hasDoRaw: boolean = false;\n\n  rawLength?: number;\n\n  syntaxFile: Record<number, SyntaxLineWithTemplate> = {};\n\n  plainFile: Record<number, { value: string; template?: string }> = {};\n\n  hasDoSyntax: boolean = false;\n\n  syntaxLength?: number;\n\n  highlighterName?: DiffHighlighter[\"name\"];\n\n  highlighterType?: DiffHighlighter[\"type\"];\n\n  maxLineNumber: number = 0;\n\n  enableTemplate: boolean = true;\n\n  static createInstance(data: File) {\n    const file = new File(data?.raw, data?.lang, data?.fileName);\n\n    file.ast = data?.ast;\n\n    file.rawFile = data?.rawFile || {};\n\n    file.plainFile = data?.plainFile || {};\n\n    file.hasDoRaw = data?.hasDoRaw;\n\n    file.rawLength = data?.rawLength;\n\n    file.syntaxFile = data?.syntaxFile || {};\n\n    file.hasDoSyntax = data?.hasDoSyntax;\n\n    file.syntaxLength = data?.syntaxLength;\n\n    file.highlighterName = data?.highlighterName;\n\n    file.highlighterType = data?.highlighterType;\n\n    file.maxLineNumber = data?.maxLineNumber;\n\n    file.enableTemplate = data?.enableTemplate ?? true;\n\n    return file;\n  }\n\n  constructor(row: string, lang: DiffHighlighterLang, fileName?: string);\n  constructor(row: string, lang: string, fileName?: string);\n  constructor(\n    public raw: string,\n    readonly lang: DiffHighlighterLang | string,\n    readonly fileName?: string\n  ) {\n    this.raw = processTransformForFile(raw);\n\n    Object.defineProperty(this, \"__v_skip\", { value: true });\n  }\n\n  doSyntax({\n    registerHighlighter,\n    theme,\n  }: {\n    registerHighlighter?: Omit<DiffHighlighter, \"getHighlighterEngine\">;\n    theme?: \"light\" | \"dark\";\n  }) {\n    if (!this.raw || this.hasDoSyntax) return;\n\n    const finalHighlighter = registerHighlighter || highlighter;\n\n    if (this.syntaxLength) {\n      if (__DEV__) {\n        console.error(\"current file already doSyntax before!\");\n      }\n      return;\n    }\n\n    if (this.rawLength > finalHighlighter.maxLineToIgnoreSyntax) {\n      if (__DEV__) {\n        console.warn(`ignore syntax for current file, because the rawLength is too long: ${this.rawLength}`);\n      }\n      return;\n    }\n\n    // check current lang is support or not\n    // if it's a unsupported lang, fallback to use lowlightHighlighter\n    let supportEngin = finalHighlighter;\n\n    try {\n      if (!finalHighlighter.hasRegisteredCurrentLang(this.lang)) {\n        supportEngin = highlighter;\n      }\n    } catch {\n      supportEngin = highlighter;\n    }\n\n    this.ast = supportEngin.getAST(this.raw, this.fileName, this.lang, theme);\n\n    if (!this.ast) return;\n\n    const { syntaxFileObject, syntaxFileLineNumber } = supportEngin.processAST(this.ast);\n\n    if (this.enableTemplate) {\n      // get syntax template\n      Object.values(syntaxFileObject).forEach((line: SyntaxLineWithTemplate) => {\n        line.template = getSyntaxLineTemplate(line);\n      });\n    }\n\n    this.syntaxFile = syntaxFileObject;\n\n    this.syntaxLength = syntaxFileLineNumber;\n\n    this.highlighterName = supportEngin.name;\n\n    this.highlighterType = supportEngin.type;\n\n    if (__DEV__) {\n      this.#doCheck();\n    }\n\n    this.hasDoSyntax = true;\n  }\n\n  doRaw() {\n    if (!this.raw || this.hasDoRaw) return;\n\n    const rawString = this.raw;\n\n    const rawArray = rawString.split(\"\\n\");\n\n    this.rawLength = rawArray.length;\n\n    this.maxLineNumber = rawArray.length;\n\n    this.rawFile = {};\n\n    this.plainFile = {};\n\n    for (let i = 0; i < rawArray.length; i++) {\n      this.rawFile[i + 1] = i < rawArray.length - 1 ? rawArray[i] + \"\\n\" : rawArray[i];\n      if (this.enableTemplate) {\n        this.plainFile[i + 1] = {\n          value: this.rawFile[i + 1],\n          template: getPlainLineTemplate(this.rawFile[i + 1]),\n        };\n      }\n    }\n\n    this.hasDoRaw = true;\n  }\n\n  #doCheck() {\n    if (this.rawLength && this.syntaxLength) {\n      if (this.rawLength !== this.syntaxLength) {\n        console.warn(\"the rawLength not match for the syntaxLength\");\n      }\n      Object.values(this.syntaxFile).forEach(({ value, lineNumber }) => {\n        if (value !== this.rawFile[lineNumber]) {\n          console.log(\n            \"some line not match:\" + value + \" __ \" + this.rawFile[lineNumber] + \" __ at: \" + lineNumber + \" lineNumber\"\n          );\n        }\n      });\n    }\n  }\n}\n\n// TODO add highlight engine key to cache key\nexport function getFile(\n  raw: string,\n  lang: DiffHighlighterLang,\n  theme: \"light\" | \"dark\",\n  fileName?: string,\n  uuid?: string\n): File;\nexport function getFile(raw: string, lang: string, theme: \"light\" | \"dark\", fileName?: string, uuid?: string): File;\nexport function getFile(\n  raw: string,\n  lang: DiffHighlighterLang | string,\n  theme: \"light\" | \"dark\",\n  fileName?: string,\n  uuid?: string\n) {\n  let key = raw + \"--\" + __VERSION__ + \"--\" + theme + \"--\" + lang;\n\n  if (uuid) {\n    key = uuid + \"--\" + __VERSION__ + \"--\" + theme + \"--\" + lang;\n  }\n\n  let otherThemeKey = raw + \"--\" + __VERSION__ + \"--\" + (theme === \"light\" ? \"dark\" : \"light\") + \"--\" + lang;\n\n  if (uuid) {\n    otherThemeKey = uuid + \"--\" + __VERSION__ + \"--\" + (theme === \"light\" ? \"dark\" : \"light\") + \"--\" + lang;\n  }\n\n  if (map.has(key)) return map.get(key);\n\n  if (map.has(otherThemeKey)) {\n    const cacheFile = map.get(otherThemeKey);\n    // classNameast\n    if (cacheFile.highlighterType === \"class\") {\n      return cacheFile;\n    }\n  }\n\n  const file = new File(raw, lang, fileName);\n\n  map.set(key, file);\n\n  return file;\n}\n\nexport const _cacheMap = map;\n\nexport const disableCache = () => map.setMaxLength(0);\n", "/* eslint-disable @typescript-eslint/ban-ts-comment */\n/* eslint-disable max-lines */\nimport { getFile, File } from \"./file\";\nimport { DiffLine, DiffLineType, parseInstance, getDiffRange, getLang } from \"./parse\";\n\nimport { SplitSide } from \".\";\n\nimport type { IRawDiff } from \"./parse\";\nimport type { DiffHighlighter, DiffHighlighterLang } from \"@git-diff-view/lowlight\";\n\nexport let composeLen = 40;\n\nexport const getCurrentComposeLength = () => composeLen;\n\nexport const changeDefaultComposeLength = (compose: number) => {\n  composeLen = compose;\n};\n\nexport const resetDefaultComposeLength = () => {\n  composeLen = 40;\n};\n\nconst idSet = new Set<string>();\n\nexport interface SplitLineItem {\n  lineNumber?: number;\n  value?: string;\n  diff?: DiffLineItem;\n  isHidden?: boolean;\n  _isHidden?: boolean;\n}\n\nexport interface UnifiedLineItem {\n  oldLineNumber?: number;\n  newLineNumber?: number;\n  value?: string;\n  diff?: DiffLineItem;\n  isHidden?: boolean;\n  _isHidden?: boolean;\n}\n\ntype HunkInfo = {\n  oldStartIndex: number;\n  newStartIndex: number;\n  oldLength: number;\n  newLength: number;\n  _oldStartIndex: number;\n  _newStartIndex: number;\n  _oldLength: number;\n  _newLength: number;\n};\n\ntype HunkLineInfo = {\n  startHiddenIndex: number;\n  endHiddenIndex: number;\n  plainText: string;\n  _startHiddenIndex: number;\n  _endHiddenIndex: number;\n  _plainText: string;\n};\n\nexport interface DiffLineItem extends DiffLine {\n  index: number;\n  prevHunkLine?: DiffHunkItem;\n}\n\nexport interface DiffHunkItem extends DiffLineItem {\n  isFirst: boolean;\n  isLast: boolean;\n  hunkInfo: HunkInfo;\n  splitInfo?: HunkLineInfo & HunkInfo;\n  unifiedInfo?: HunkLineInfo & HunkInfo;\n}\n\ntype FileData_1 = {\n  oldFile?: { fileName?: string | null; fileLang?: DiffHighlighterLang | null; content?: string | null };\n  newFile?: { fileName?: string | null; fileLang?: DiffHighlighterLang | null; content?: string | null };\n  hunks?: string[];\n};\n\ntype FileData_2 = {\n  oldFile?: { fileName?: string | null; fileLang?: string | null; content?: string | null };\n  newFile?: { fileName?: string | null; fileLang?: string | null; content?: string | null };\n  hunks?: string[];\n};\n\ntype FileData_3 = {\n  oldFile?: { fileName?: string | null; fileLang?: DiffHighlighterLang | string | null; content?: string | null };\n  newFile?: { fileName?: string | null; fileLang?: DiffHighlighterLang | string | null; content?: string | null };\n  hunks?: string[];\n};\n\nexport class DiffFile {\n  #oldFileResult?: File;\n\n  #newFileResult?: File;\n\n  #diffListResults?: IRawDiff[];\n\n  #diffLines?: DiffLineItem[];\n\n  #oldFileDiffLines?: Record<string, DiffLineItem>;\n\n  #newFileDiffLines?: Record<string, DiffLineItem>;\n\n  #oldFileLines?: File[\"rawFile\"];\n\n  #newFileLines?: File[\"rawFile\"];\n\n  #oldFilePlainLines?: File[\"plainFile\"];\n\n  #newFilePlainLines?: File[\"plainFile\"];\n\n  #oldFileSyntaxLines?: File[\"syntaxFile\"];\n\n  #newFileSyntaxLines?: File[\"syntaxFile\"];\n\n  #oldFilePlaceholderLines?: Record<string, boolean>;\n\n  #newFilePlaceholderLines?: Record<string, boolean>;\n\n  #splitLeftLines: SplitLineItem[] = [];\n\n  #splitRightLines: SplitLineItem[] = [];\n\n  #splitHunksLines?: Record<string, DiffHunkItem>;\n\n  #unifiedLines: UnifiedLineItem[] = [];\n\n  #unifiedHunksLines?: Record<string, DiffHunkItem>;\n\n  #listeners: ((() => void) & { isSyncExternal?: boolean })[] = [];\n\n  #hasInitRaw: boolean = false;\n\n  #hasInitSyntax: boolean = false;\n\n  #hasBuildSplit: boolean = false;\n\n  #hasBuildUnified: boolean = false;\n\n  #updateCount: number = 0;\n\n  #composeByDiff: boolean = false;\n\n  #composeByMerge: boolean = false;\n\n  #enableTemplate: boolean = true;\n\n  #composeByFullMerge: boolean = false;\n\n  #highlighterName?: string;\n\n  #highlighterType?: string;\n\n  #theme: \"light\" | \"dark\" = \"light\";\n\n  #_theme?: \"light\" | \"dark\";\n\n  #hasExpandSplitAll = { state: false };\n\n  #hasExpandUnifiedAll = { state: false };\n\n  _version_ = __VERSION__;\n\n  _oldFileName: string = \"\";\n\n  _oldFileContent: string = \"\";\n\n  _oldFileLang: DiffHighlighterLang | string = \"\";\n\n  _newFileName: string = \"\";\n\n  _newFileContent: string = \"\";\n\n  _newFileLang: DiffHighlighterLang | string = \"\";\n\n  _diffList: string[] = [];\n\n  diffLineLength: number = 0;\n\n  splitLineLength: number = 0;\n\n  unifiedLineLength: number = 0;\n\n  fileLineLength: number = 0;\n\n  additionLength: number = 0;\n\n  deletionLength: number = 0;\n\n  hasSomeLineCollapsed: boolean = false;\n\n  #id: string = \"\";\n\n  #clonedInstance = new Map<DiffFile, () => void>();\n\n  static createInstance(\n    data: FileData_1,\n    bundle?: ReturnType<DiffFile[\"getBundle\"] | DiffFile[\"_getFullBundle\"]>\n  ): DiffFile;\n  static createInstance(\n    data: FileData_2,\n    bundle?: ReturnType<DiffFile[\"getBundle\"] | DiffFile[\"_getFullBundle\"]>\n  ): DiffFile;\n  static createInstance(data: FileData_3, bundle?: ReturnType<DiffFile[\"getBundle\"] | DiffFile[\"_getFullBundle\"]>) {\n    const instance = new DiffFile(\n      data?.oldFile?.fileName || \"\",\n      data?.oldFile?.content || \"\",\n      data?.newFile?.fileName || \"\",\n      data?.newFile?.content || \"\",\n      data?.hunks || [],\n      data?.oldFile?.fileLang || \"\",\n      data?.newFile?.fileLang || \"\"\n    );\n    if (bundle) {\n      if (bundle.isFullMerge) {\n        instance._mergeFullBundle(bundle as ReturnType<DiffFile[\"_getFullBundle\"]>);\n      } else {\n        instance.mergeBundle(bundle);\n      }\n    }\n\n    return instance;\n  }\n\n  constructor(\n    _oldFileName: string,\n    _oldFileContent: string,\n    _newFileName: string,\n    _newFileContent: string,\n    _diffList: string[],\n    _oldFileLang?: DiffHighlighterLang,\n    _newFileLang?: DiffHighlighterLang,\n    uuid?: string\n  );\n  constructor(\n    _oldFileName: string,\n    _oldFileContent: string,\n    _newFileName: string,\n    _newFileContent: string,\n    _diffList: string[],\n    _oldFileLang?: string,\n    _newFileLang?: string,\n    uuid?: string\n  );\n  constructor(\n    _oldFileName: string,\n    _oldFileContent: string,\n    _newFileName: string,\n    _newFileContent: string,\n    _diffList: string[],\n    _oldFileLang?: DiffHighlighterLang | string,\n    _newFileLang?: DiffHighlighterLang | string,\n    readonly uuid?: string\n  ) {\n    Object.defineProperty(this, \"__v_skip\", { value: true });\n\n    const diffList = Array.from(new Set(_diffList));\n\n    this._oldFileName = _oldFileName;\n\n    this._newFileName = _newFileName;\n\n    this._diffList = diffList;\n\n    this._oldFileLang = getLang(_oldFileLang || _oldFileName || _newFileLang || _newFileName) || \"txt\";\n\n    this._newFileLang = getLang(_newFileLang || _newFileName || _oldFileLang || _oldFileName) || \"txt\";\n\n    this._oldFileContent = _oldFileContent;\n\n    this._newFileContent = _newFileContent;\n\n    this.initId();\n  }\n\n  #doDiff() {\n    if (!this._diffList) return;\n\n    this.#diffListResults = this._diffList.map((s) => parseInstance.parse(s));\n  }\n\n  #doFile() {\n    if (!this._oldFileContent && !this._newFileContent) return;\n\n    if (this._oldFileContent) {\n      this.#oldFileResult = getFile(\n        this._oldFileContent,\n        this._oldFileLang,\n        this.#theme,\n        this._oldFileName,\n        this.uuid ? this.uuid + \"-old\" : undefined\n      );\n      this.#oldFileResult.enableTemplate = this.#enableTemplate;\n    }\n\n    if (this._newFileContent) {\n      this.#newFileResult = getFile(\n        this._newFileContent,\n        this._newFileLang,\n        this.#theme,\n        this._newFileName,\n        this.uuid ? this.uuid + \"-new\" : undefined\n      );\n      this.#newFileResult.enableTemplate = this.#enableTemplate;\n    }\n  }\n\n  #composeRaw() {\n    this.#oldFileResult?.doRaw();\n\n    this.#oldFileLines = this.#oldFileResult?.rawFile;\n\n    this.#oldFilePlainLines = this.#oldFileResult?.plainFile;\n\n    this.#newFileResult?.doRaw();\n\n    this.#newFileLines = this.#newFileResult?.rawFile;\n\n    this.#newFilePlainLines = this.#newFileResult?.plainFile;\n\n    this.fileLineLength = Math.max(\n      this.fileLineLength,\n      this.#oldFileResult?.maxLineNumber || 0,\n      this.#newFileResult?.maxLineNumber || 0\n    );\n  }\n\n  #composeFile() {\n    if (this._oldFileContent && this._newFileContent) return;\n\n    const oldFilePlaceholderLines: Record<string, boolean> = {};\n\n    const newFilePlaceholderLines: Record<string, boolean> = {};\n\n    // all of the file content not exist, try to use diff result to compose\n    if (!this._oldFileContent && !this._newFileContent) {\n      let newLineNumber = 1;\n      let oldLineNumber = 1;\n      let oldFileContent = \"\";\n      let newFileContent = \"\";\n      let hasSymbolChanged = false;\n      while (oldLineNumber <= this.diffLineLength || newLineNumber <= this.diffLineLength) {\n        const oldIndex = oldLineNumber++;\n        const newIndex = newLineNumber++;\n        const oldDiffLine = this.#getOldDiffLine(oldIndex);\n        const newDiffLine = this.#getNewDiffLine(newIndex);\n        if (oldDiffLine) {\n          oldFileContent += oldDiffLine.text;\n        } else {\n          // empty line for placeholder\n          oldFileContent += \"\\n\";\n          oldFilePlaceholderLines[oldIndex] = true;\n        }\n        if (newDiffLine) {\n          newFileContent += newDiffLine.text;\n        } else {\n          // empty line for placeholder\n          newFileContent += \"\\n\";\n          newFilePlaceholderLines[newIndex] = true;\n        }\n        if (!hasSymbolChanged && oldDiffLine && newDiffLine) {\n          hasSymbolChanged = hasSymbolChanged || oldDiffLine.noTrailingNewLine !== newDiffLine.noTrailingNewLine;\n        }\n      }\n      if (!hasSymbolChanged && oldFileContent === newFileContent) return;\n      this._oldFileContent = oldFileContent;\n      this._newFileContent = newFileContent;\n      this.#oldFileResult = getFile(\n        this._oldFileContent,\n        this._oldFileLang,\n        this.#theme,\n        this._oldFileName,\n        this.uuid ? this.uuid + \"-old\" : undefined\n      );\n      this.#oldFileResult.enableTemplate = this.#enableTemplate;\n      this.#newFileResult = getFile(\n        this._newFileContent,\n        this._newFileLang,\n        this.#theme,\n        this._newFileName,\n        this.uuid ? this.uuid + \"-new\" : undefined\n      );\n      this.#newFileResult.enableTemplate = this.#enableTemplate;\n      this.#oldFilePlaceholderLines = oldFilePlaceholderLines;\n      this.#newFilePlaceholderLines = newFilePlaceholderLines;\n      // all of the file just compose by diff, so we can not do the expand action\n      this.#composeByDiff = true;\n    } else if (this.#oldFileResult) {\n      let newLineNumber = 1;\n      let oldLineNumber = 1;\n      let newFileContent = \"\";\n      let hasSymbolChanged = false;\n      while (oldLineNumber <= this.#oldFileResult.maxLineNumber) {\n        const newDiffLine = this.#getNewDiffLine(newLineNumber++);\n        const oldDiffLine = this.#getOldDiffLine(oldLineNumber);\n        if (newDiffLine) {\n          newFileContent += newDiffLine.text;\n          oldLineNumber = newDiffLine.oldLineNumber ? newDiffLine.oldLineNumber + 1 : oldLineNumber;\n        } else {\n          if (!oldDiffLine) {\n            newFileContent += this.#getOldRawLine(oldLineNumber);\n          }\n          oldLineNumber++;\n        }\n        if (!hasSymbolChanged && newDiffLine && oldDiffLine) {\n          hasSymbolChanged = hasSymbolChanged || newDiffLine.noTrailingNewLine !== oldDiffLine.noTrailingNewLine;\n        }\n      }\n      if (!hasSymbolChanged && newFileContent === this._oldFileContent) return;\n      this._newFileContent = newFileContent;\n      this.#newFileResult = getFile(\n        this._newFileContent,\n        this._newFileLang,\n        this.#theme,\n        this._newFileName,\n        this.uuid ? this.uuid + \"-new\" : undefined\n      );\n      this.#newFileResult.enableTemplate = this.#enableTemplate;\n    } else if (this.#newFileResult) {\n      let oldLineNumber = 1;\n      let newLineNumber = 1;\n      let oldFileContent = \"\";\n      let hasSymbolChanged = false;\n      while (newLineNumber <= this.#newFileResult.maxLineNumber) {\n        const oldDiffLine = this.#getOldDiffLine(oldLineNumber++);\n        const newDiffLine = this.#getNewDiffLine(newLineNumber);\n        if (oldDiffLine) {\n          oldFileContent += oldDiffLine.text;\n          newLineNumber = oldDiffLine.newLineNumber ? oldDiffLine.newLineNumber + 1 : newLineNumber;\n        } else {\n          if (!newDiffLine) {\n            oldFileContent += this.#getNewRawLine(newLineNumber);\n          }\n          newLineNumber++;\n        }\n        if (!hasSymbolChanged && newDiffLine && oldDiffLine) {\n          hasSymbolChanged = hasSymbolChanged || newDiffLine.noTrailingNewLine !== oldDiffLine.noTrailingNewLine;\n        }\n      }\n      if (!hasSymbolChanged && oldFileContent === this._newFileContent) return;\n      this._oldFileContent = oldFileContent;\n      this.#oldFileResult = getFile(\n        this._oldFileContent,\n        this._oldFileLang,\n        this.#theme,\n        this._oldFileName,\n        this.uuid ? this.uuid + \"-old\" : undefined\n      );\n      this.#oldFileResult.enableTemplate = this.#enableTemplate;\n    }\n\n    this.#composeRaw();\n  }\n\n  #composeDiff() {\n    if (!this.#diffListResults?.length) return;\n\n    const getAdditionRaw = (lineNumber: number) => {\n      return this.#getNewRawLine(lineNumber);\n    };\n\n    const getDeletionRaw = (lineNumber: number) => {\n      return this.#getOldRawLine(lineNumber);\n    };\n\n    const getAdditionSyntax = (lineNumber: number) => {\n      return this.#getNewSyntaxLine(lineNumber);\n    };\n\n    const getDeletionSyntax = (lineNumber: number) => {\n      return this.#getOldSyntaxLine(lineNumber);\n    };\n\n    this.#diffLines = [];\n\n    this.additionLength = 0;\n\n    this.deletionLength = 0;\n\n    const tmp: DiffLine[] = [];\n\n    this.#diffListResults.forEach((item) => {\n      const hunks = item.hunks;\n      hunks.forEach((hunk) => {\n        let additions: DiffLine[] = [];\n        let deletions: DiffLine[] = [];\n        hunk.lines.forEach((line) => {\n          if (line.type === DiffLineType.Add) {\n            additions.push(line);\n            this.additionLength++;\n          } else if (line.type === DiffLineType.Delete) {\n            deletions.push(line);\n            this.deletionLength++;\n          } else {\n            getDiffRange(additions, deletions, {\n              getAdditionRaw,\n              getDeletionRaw,\n              getAdditionSyntax,\n              getDeletionSyntax,\n            });\n            additions = [];\n            deletions = [];\n          }\n          tmp.push(line);\n        });\n        getDiffRange(additions, deletions, { getAdditionRaw, getDeletionRaw, getAdditionSyntax, getDeletionSyntax });\n      });\n    });\n\n    let prevHunkLine: DiffHunkItem | null = null;\n\n    this.#diffLines = tmp.map<DiffLineItem>((i, index) => {\n      const typedI = i as DiffHunkItem;\n\n      typedI.index = index;\n\n      typedI.isFirst = index === 0;\n\n      if (typedI.type === DiffLineType.Hunk) {\n        const numInfo = typedI.text.split(\"@@\")?.[1].split(\" \").filter(Boolean);\n        const oldNumInfo = numInfo?.[0] || \"\";\n        const newNumInfo = numInfo?.[1] || \"\";\n        const [oldNumStartIndex, oldNumLength] = oldNumInfo.split(\",\");\n        const [newNumStartIndex, newNumLength] = newNumInfo.split(\",\");\n        typedI.hunkInfo = {\n          oldStartIndex: -Number(oldNumStartIndex),\n          oldLength: Number(oldNumLength),\n          newStartIndex: +Number(newNumStartIndex),\n          newLength: Number(newNumLength),\n\n          _oldStartIndex: -Number(oldNumStartIndex),\n          _oldLength: Number(oldNumLength),\n          _newStartIndex: +Number(newNumStartIndex),\n          _newLength: Number(newNumLength),\n        };\n\n        if (\n          __DEV__ &&\n          typedI.isFirst &&\n          typedI.hunkInfo.oldStartIndex &&\n          typedI.hunkInfo.newStartIndex &&\n          typedI.hunkInfo.oldStartIndex !== typedI.hunkInfo.newStartIndex\n        ) {\n          console.warn(\"the first hunk should start with the same line number\");\n        }\n\n        prevHunkLine = typedI;\n      } else if (typedI.type === DiffLineType.Context) {\n        const typedItem = i as DiffLineItem;\n        if (prevHunkLine) {\n          typedItem.prevHunkLine = prevHunkLine;\n          prevHunkLine = null;\n        }\n      } else {\n        prevHunkLine = null;\n      }\n      return typedI;\n    });\n\n    this.#oldFileDiffLines = {};\n\n    this.#newFileDiffLines = {};\n\n    let maxOldLineNumber = -1;\n\n    let maxNewLineNumber = -1;\n\n    this.#diffLines.forEach((item) => {\n      if (item.oldLineNumber) {\n        this.diffLineLength = Math.max(this.diffLineLength, item.oldLineNumber);\n\n        this.#oldFileDiffLines[item.oldLineNumber] = item;\n\n        if (__DEV__) {\n          if (item.oldLineNumber <= maxOldLineNumber) {\n            console.warn(\n              'the \"lineNumber\" from \"diff\" should be in ascending order, maybe current \"diff\" string is not a valid \"diff\" string'\n            );\n          }\n\n          maxOldLineNumber = Math.max(maxOldLineNumber, item.oldLineNumber);\n        }\n      }\n\n      if (item.newLineNumber) {\n        this.diffLineLength = Math.max(this.diffLineLength, item.newLineNumber);\n\n        this.#newFileDiffLines[item.newLineNumber] = item;\n\n        if (__DEV__) {\n          if (item.newLineNumber <= maxNewLineNumber) {\n            console.warn(\n              'the \"lineNumber\" from \"diff\" should be in ascending order, maybe current \"diff\" string is not a valid \"diff\" string'\n            );\n          }\n\n          maxNewLineNumber = Math.max(maxNewLineNumber, item.newLineNumber);\n        }\n      }\n    });\n  }\n\n  #composeSyntax({ registerHighlighter }: { registerHighlighter?: Omit<DiffHighlighter, \"getHighlighterEngine\"> }) {\n    this.#oldFileResult?.doSyntax({ registerHighlighter, theme: this.#theme });\n\n    this.#oldFileSyntaxLines = this.#oldFileResult?.syntaxFile;\n\n    this.#newFileResult?.doSyntax({ registerHighlighter, theme: this.#theme });\n\n    this.#newFileSyntaxLines = this.#newFileResult?.syntaxFile;\n  }\n\n  #doSyntax({ registerHighlighter }: { registerHighlighter?: Omit<DiffHighlighter, \"getHighlighterEngine\"> } = {}) {\n    if (this.#highlighterType === \"class\") return;\n\n    if (this.#composeByMerge && !this.#composeByFullMerge) {\n      if (__DEV__) {\n        console.error(\n          `this instance can not do syntax because of the data missing, try to use '_getFullBundle' & '_mergeFullBundle' instead of 'getBundle' & 'mergeBundle'`\n        );\n      }\n\n      return;\n    }\n\n    this.#composeSyntax({ registerHighlighter });\n\n    this.#highlighterName =\n      this.#oldFileResult?.highlighterName || this.#newFileResult?.highlighterName || this.#highlighterName;\n\n    this.#highlighterType =\n      this.#oldFileResult?.highlighterType || this.#newFileResult?.highlighterType || this.#highlighterType;\n  }\n\n  #getOldDiffLine(lineNumber: number | null) {\n    if (!lineNumber) return;\n    return this.#oldFileDiffLines?.[lineNumber];\n  }\n\n  #getNewDiffLine(lineNumber: number | null) {\n    if (!lineNumber) return;\n    return this.#newFileDiffLines?.[lineNumber];\n  }\n\n  #getOldRawLine(lineNumber: number) {\n    return this.#oldFileLines?.[lineNumber];\n  }\n\n  #getNewRawLine(lineNumber: number) {\n    return this.#newFileLines?.[lineNumber];\n  }\n\n  #getOldSyntaxLine(lineNumber: number) {\n    return this.#oldFileSyntaxLines?.[lineNumber];\n  }\n\n  #getNewSyntaxLine(lineNumber: number) {\n    return this.#newFileSyntaxLines?.[lineNumber];\n  }\n\n  initId() {\n    let id = \"--\" + Math.random().toString().slice(2);\n\n    while (idSet.has(id)) {\n      id = \"--\" + Math.random().toString().slice(2);\n    }\n\n    idSet.add(id);\n\n    this.#id = id;\n  }\n\n  getId() {\n    return this.#id;\n  }\n\n  clearId() {\n    idSet.delete(this.#id);\n  }\n\n  initTheme(theme?: \"light\" | \"dark\") {\n    this.#_theme = this.#theme;\n    this.#theme = theme || this.#theme || \"light\";\n  }\n\n  initRaw() {\n    if (this.#hasInitRaw) return;\n    this.#doFile();\n    this.#composeRaw();\n    this.#doDiff();\n    this.#composeDiff();\n    this.#composeFile();\n    this.#hasInitRaw = true;\n  }\n\n  initSyntax({ registerHighlighter }: { registerHighlighter?: Omit<DiffHighlighter, \"getHighlighterEngine\"> } = {}) {\n    if (this.#hasInitSyntax && (!this.#_theme || this.#theme === this.#_theme)) return;\n\n    this.#doSyntax({ registerHighlighter });\n\n    this.#composeDiff();\n\n    this.#hasInitSyntax = true;\n  }\n\n  init() {\n    this.initRaw();\n    this.initSyntax();\n  }\n\n  enableTemplate() {\n    this.#enableTemplate = true;\n  }\n\n  disableTemplate() {\n    this.#enableTemplate = false;\n  }\n\n  getIsEnableTemplate() {\n    return this.#enableTemplate;\n  }\n\n  buildSplitDiffLines() {\n    if (this.#hasBuildSplit) return;\n    let oldFileLineNumber = 1;\n    let newFileLineNumber = 1;\n    let prevIsHidden = true;\n    let hideStart = Infinity;\n    const maxOldFileLineNumber = this.#oldFileResult?.maxLineNumber || 0;\n    const maxNewFileLineNumber = this.#newFileResult?.maxLineNumber || 0;\n\n    if (__DEV__ && !this.#oldFileResult && !this.#newFileResult && this.#composeByMerge) {\n      console.error(\n        \"this instance can not `buildSplitDiffLines` because of the data missing, try to use '_getFullBundle' & '_mergeFullBundle' instead of 'getBundle' & 'mergeBundle'\"\n      );\n    }\n\n    while (oldFileLineNumber <= maxOldFileLineNumber || newFileLineNumber <= maxNewFileLineNumber) {\n      const oldDiffLine = this.#getOldDiffLine(oldFileLineNumber);\n      const newDiffLine = this.#getNewDiffLine(newFileLineNumber);\n      const oldRawLine = this.#getOldRawLine(oldFileLineNumber);\n      const newRawLine = this.#getNewRawLine(newFileLineNumber);\n      const oldLineHasChange = DiffLine.prototype.isIncludeableLine.call(oldDiffLine || {});\n      const newLineHasChange = DiffLine.prototype.isIncludeableLine.call(newDiffLine || {});\n      const len = this.#splitRightLines.length;\n      const isHidden = !oldDiffLine && !newDiffLine;\n\n      if (oldDiffLine && !newDiffLine) {\n        if (oldDiffLine.newLineNumber && oldDiffLine.newLineNumber > newFileLineNumber) {\n          newFileLineNumber++;\n          continue;\n        }\n        if (oldDiffLine.newLineNumber === null || oldDiffLine.newLineNumber === undefined) {\n          newFileLineNumber++;\n        }\n      }\n\n      if (newDiffLine && !oldDiffLine) {\n        if (newDiffLine.oldLineNumber && newDiffLine.oldLineNumber > oldFileLineNumber) {\n          oldFileLineNumber++;\n          continue;\n        }\n        if (newDiffLine.oldLineNumber === null || newDiffLine.oldLineNumber === undefined) {\n          oldFileLineNumber++;\n        }\n      }\n\n      if (!oldDiffLine && !oldRawLine && !newDiffLine && !newRawLine) break;\n\n      if (!oldDiffLine && !newDiffLine) {\n        if (this.#oldFilePlaceholderLines?.[oldFileLineNumber] && this.#newFilePlaceholderLines?.[newFileLineNumber]) {\n          oldFileLineNumber++;\n          newFileLineNumber++;\n          continue;\n        }\n        if (!oldRawLine && this.#newFilePlaceholderLines?.[newFileLineNumber]) {\n          newFileLineNumber++;\n          continue;\n        }\n        if (!newRawLine && this.#oldFilePlaceholderLines?.[oldFileLineNumber]) {\n          oldFileLineNumber++;\n          continue;\n        }\n      }\n\n      if ((oldLineHasChange && newLineHasChange) || (!oldLineHasChange && !newLineHasChange)) {\n        this.#splitLeftLines.push({\n          lineNumber: oldFileLineNumber++,\n          value: oldRawLine,\n          diff: oldDiffLine,\n          isHidden,\n          _isHidden: isHidden,\n        });\n        this.#splitRightLines.push({\n          lineNumber: newFileLineNumber++,\n          value: newRawLine,\n          diff: newDiffLine,\n          isHidden,\n          _isHidden: isHidden,\n        });\n      } else if (oldLineHasChange) {\n        this.#splitLeftLines.push({\n          lineNumber: oldFileLineNumber++,\n          value: oldRawLine,\n          diff: oldDiffLine,\n          isHidden,\n          _isHidden: isHidden,\n        });\n        this.#splitRightLines.push({});\n      } else if (newLineHasChange) {\n        this.#splitLeftLines.push({});\n        this.#splitRightLines.push({\n          lineNumber: newFileLineNumber++,\n          value: newRawLine,\n          diff: newDiffLine,\n          isHidden,\n          _isHidden: isHidden,\n        });\n      }\n\n      if (!prevIsHidden && isHidden) {\n        hideStart = len;\n      }\n\n      if (isHidden) {\n        this.hasSomeLineCollapsed = true;\n      }\n\n      prevIsHidden = isHidden;\n\n      if (oldDiffLine?.prevHunkLine || newDiffLine?.prevHunkLine) {\n        const prevHunkLine = oldDiffLine?.prevHunkLine || newDiffLine.prevHunkLine;\n        if (prevHunkLine.isFirst) {\n          if (__DEV__ && Number.isFinite(hideStart)) {\n            console.warn(\"the first hunk can not have a previous diff line\");\n          }\n          prevHunkLine.splitInfo = {\n            ...prevHunkLine.hunkInfo,\n\n            startHiddenIndex: 0,\n            endHiddenIndex: prevHunkLine.hunkInfo.newStartIndex - 1,\n            plainText: prevHunkLine.text,\n\n            _startHiddenIndex: 0,\n            _endHiddenIndex: prevHunkLine.hunkInfo.newStartIndex - 1,\n            _plainText: prevHunkLine.text,\n          };\n          hideStart = Infinity;\n        } else if (Number.isFinite(hideStart)) {\n          prevHunkLine.splitInfo = {\n            ...prevHunkLine.hunkInfo,\n\n            startHiddenIndex: hideStart,\n            endHiddenIndex: len,\n            plainText: prevHunkLine.text,\n\n            _startHiddenIndex: hideStart,\n            _endHiddenIndex: len,\n            _plainText: prevHunkLine.text,\n          };\n          hideStart = Infinity;\n        }\n        this.#splitHunksLines = {\n          ...this.#splitHunksLines,\n          [len]: prevHunkLine,\n        };\n      }\n    }\n\n    // have last hunk\n    if (Number.isFinite(hideStart)) {\n      const lastDiff = new DiffLine(\"\", DiffLineType.Hunk, null, null, null);\n      const lastHunk = lastDiff as DiffHunkItem;\n      lastHunk.isLast = true;\n      lastHunk.splitInfo = {\n        startHiddenIndex: hideStart,\n        endHiddenIndex: this.#splitRightLines.length,\n\n        _startHiddenIndex: hideStart,\n        _endHiddenIndex: this.#splitRightLines.length,\n\n        // just for placeholder\n        plainText: \"\",\n        oldStartIndex: 0,\n        newStartIndex: 0,\n        oldLength: 0,\n        newLength: 0,\n\n        _plainText: \"\",\n        _oldStartIndex: 0,\n        _newStartIndex: 0,\n        _oldLength: 0,\n        _newLength: 0,\n      };\n      this.#splitHunksLines = {\n        ...this.#splitHunksLines,\n        [this.#splitRightLines.length]: lastHunk,\n      };\n      hideStart = Infinity;\n    }\n\n    this.splitLineLength = this.#splitRightLines.length;\n\n    this.#hasBuildSplit = true;\n\n    this.notifyAll();\n  }\n\n  buildUnifiedDiffLines() {\n    if (this.#hasBuildUnified) return;\n    let oldFileLineNumber = 1;\n    let newFileLineNumber = 1;\n    let prevIsHidden = true;\n    let hideStart = Infinity;\n    const maxOldFileLineNumber = this.#oldFileResult?.maxLineNumber || 0;\n    const maxNewFileLineNumber = this.#newFileResult?.maxLineNumber || 0;\n\n    if (__DEV__ && !this.#oldFileResult && !this.#newFileResult && this.#composeByMerge) {\n      console.error(\n        \"this instance can not `buildUnifiedDiffLines` because of the data missing, try to use '_getFullBundle' & '_mergeFullBundle' instead of 'getBundle' & 'mergeBundle'\"\n      );\n    }\n\n    while (oldFileLineNumber <= maxOldFileLineNumber || newFileLineNumber <= maxNewFileLineNumber) {\n      const oldRawLine = this.#getOldRawLine(oldFileLineNumber);\n      const oldDiffLine = this.#getOldDiffLine(oldFileLineNumber);\n      const newRawLine = this.#getNewRawLine(newFileLineNumber);\n      const newDiffLine = this.#getNewDiffLine(newFileLineNumber);\n      const oldLineHasChange = DiffLine.prototype.isIncludeableLine.call(oldDiffLine || {});\n      const newLineHasChange = DiffLine.prototype.isIncludeableLine.call(newDiffLine || {});\n      const len = this.#unifiedLines.length;\n      const isHidden = !oldDiffLine && !newDiffLine;\n\n      if (oldDiffLine && !newDiffLine) {\n        if (oldDiffLine.newLineNumber && oldDiffLine.newLineNumber > newFileLineNumber) {\n          newFileLineNumber++;\n          continue;\n        }\n        if (oldDiffLine.newLineNumber === null || oldDiffLine.newLineNumber === undefined) {\n          newFileLineNumber++;\n        }\n      }\n\n      if (newDiffLine && !oldDiffLine) {\n        if (newDiffLine.oldLineNumber && newDiffLine.oldLineNumber > oldFileLineNumber) {\n          oldFileLineNumber++;\n          continue;\n        }\n        if (newDiffLine.oldLineNumber === null || newDiffLine.oldLineNumber === undefined) {\n          oldFileLineNumber++;\n        }\n      }\n\n      if (!oldRawLine && !newRawLine && !newDiffLine && !oldDiffLine) break;\n\n      if (!oldDiffLine && !newDiffLine) {\n        if (this.#oldFilePlaceholderLines?.[oldFileLineNumber] && this.#newFilePlaceholderLines?.[newFileLineNumber]) {\n          oldFileLineNumber++;\n          newFileLineNumber++;\n          continue;\n        }\n        if (!oldRawLine && this.#newFilePlaceholderLines?.[newFileLineNumber]) {\n          newFileLineNumber++;\n          continue;\n        }\n        if (!newRawLine && this.#oldFilePlaceholderLines?.[oldFileLineNumber]) {\n          oldFileLineNumber++;\n          continue;\n        }\n      }\n\n      if (!oldLineHasChange && !newLineHasChange) {\n        this.#unifiedLines.push({\n          oldLineNumber: oldFileLineNumber++,\n          newLineNumber: newFileLineNumber++,\n          value: newRawLine,\n          diff: newDiffLine,\n          isHidden,\n          _isHidden: isHidden,\n        });\n      } else if (oldLineHasChange) {\n        this.#unifiedLines.push({\n          oldLineNumber: oldFileLineNumber++,\n          value: oldRawLine,\n          diff: oldDiffLine,\n          isHidden,\n          _isHidden: isHidden,\n        });\n      } else if (newLineHasChange) {\n        this.#unifiedLines.push({\n          newLineNumber: newFileLineNumber++,\n          value: newRawLine,\n          diff: newDiffLine,\n          isHidden,\n          _isHidden: isHidden,\n        });\n      }\n\n      if (!prevIsHidden && isHidden) {\n        hideStart = len;\n      }\n\n      if (isHidden) {\n        this.hasSomeLineCollapsed = true;\n      }\n\n      prevIsHidden = isHidden;\n\n      if (oldDiffLine?.prevHunkLine || newDiffLine?.prevHunkLine) {\n        const prevHunkLine = oldDiffLine?.prevHunkLine || newDiffLine.prevHunkLine;\n        if (prevHunkLine.isFirst) {\n          if (__DEV__ && Number.isFinite(hideStart)) {\n            console.warn(\"the first hunk can not have a previous diff line\");\n          }\n          prevHunkLine.unifiedInfo = {\n            ...prevHunkLine.hunkInfo,\n\n            startHiddenIndex: 0,\n            endHiddenIndex: prevHunkLine.hunkInfo.newStartIndex - 1,\n            plainText: prevHunkLine.text,\n\n            _startHiddenIndex: 0,\n            _endHiddenIndex: prevHunkLine.hunkInfo.newStartIndex - 1,\n            _plainText: prevHunkLine.text,\n          };\n          hideStart = Infinity;\n        } else if (Number.isFinite(hideStart)) {\n          prevHunkLine.unifiedInfo = {\n            ...prevHunkLine.hunkInfo,\n\n            startHiddenIndex: hideStart,\n            endHiddenIndex: len,\n            plainText: prevHunkLine.text,\n\n            _startHiddenIndex: hideStart,\n            _endHiddenIndex: len,\n            _plainText: prevHunkLine.text,\n          };\n          hideStart = Infinity;\n        }\n        this.#unifiedHunksLines = {\n          ...this.#unifiedHunksLines,\n          [len]: prevHunkLine,\n        };\n      }\n    }\n\n    // have last hunk\n    if (Number.isFinite(hideStart)) {\n      const lastDiff = new DiffLine(\"\", DiffLineType.Hunk, null, null, null);\n      const lastHunk = lastDiff as DiffHunkItem;\n      lastHunk.isLast = true;\n      lastHunk.unifiedInfo = {\n        startHiddenIndex: hideStart,\n        endHiddenIndex: this.#unifiedLines.length,\n\n        _startHiddenIndex: hideStart,\n        _endHiddenIndex: this.#unifiedLines.length,\n        // just for placeholder\n\n        plainText: \"\",\n        oldStartIndex: 0,\n        newStartIndex: 0,\n        oldLength: 0,\n        newLength: 0,\n\n        _plainText: \"\",\n        _oldStartIndex: 0,\n        _newStartIndex: 0,\n        _oldLength: 0,\n        _newLength: 0,\n      };\n      this.#unifiedHunksLines = {\n        ...this.#unifiedHunksLines,\n        [this.#unifiedLines.length]: lastHunk,\n      };\n      hideStart = Infinity;\n    }\n\n    this.unifiedLineLength = this.#unifiedLines.length;\n\n    this.#hasBuildUnified = true;\n\n    this.notifyAll();\n  }\n\n  getSplitLeftLine = (index: number) => {\n    return this.#splitLeftLines[index];\n  };\n\n  getSplitLineByLineNumber = (lineNumber: number, side: SplitSide) => {\n    if (side === SplitSide.old) {\n      return this.#splitLeftLines?.find((item) => item.lineNumber === lineNumber);\n    } else {\n      return this.#splitRightLines?.find((item) => item.lineNumber === lineNumber);\n    }\n  };\n\n  getSplitLineIndexByLineNumber = (lineNumber: number, side: SplitSide) => {\n    if (side === SplitSide.old) {\n      return this.#splitLeftLines?.findIndex((item) => item.lineNumber === lineNumber);\n    } else {\n      return this.#splitRightLines?.findIndex((item) => item.lineNumber === lineNumber);\n    }\n  };\n\n  getSplitRightLine = (index: number) => {\n    return this.#splitRightLines[index];\n  };\n\n  getSplitHunkLine = (index: number) => {\n    return this.#splitHunksLines?.[index];\n  };\n\n  onSplitHunkExpand = (dir: \"up\" | \"down\" | \"all\", index: number, needTrigger = true) => {\n    const current = this.#splitHunksLines?.[index];\n    if (!current || !current.splitInfo) return;\n\n    if (this.#composeByDiff) return;\n\n    if (dir === \"all\") {\n      for (let i = current.splitInfo.startHiddenIndex; i < current.splitInfo.endHiddenIndex; i++) {\n        const leftLine = this.#splitLeftLines[i];\n        const rightLine = this.#splitRightLines[i];\n        if (leftLine?.isHidden) leftLine.isHidden = false;\n        if (rightLine?.isHidden) rightLine.isHidden = false;\n      }\n      current.splitInfo = {\n        ...current.splitInfo,\n        ...current.hunkInfo,\n        plainText: current.text,\n        startHiddenIndex: current.splitInfo.endHiddenIndex,\n      };\n    } else if (dir === \"down\") {\n      for (let i = current.splitInfo.startHiddenIndex; i < current.splitInfo.startHiddenIndex + composeLen; i++) {\n        const leftLine = this.#splitLeftLines[i];\n        const rightLine = this.#splitRightLines[i];\n        if (leftLine?.isHidden) leftLine.isHidden = false;\n        if (rightLine?.isHidden) rightLine.isHidden = false;\n      }\n      if (current.isLast) {\n        current.splitInfo = {\n          ...current.splitInfo,\n          startHiddenIndex: current.splitInfo.startHiddenIndex + composeLen,\n        };\n      } else {\n        current.splitInfo = {\n          ...current.splitInfo,\n          startHiddenIndex: current.splitInfo.startHiddenIndex + composeLen,\n          plainText: `@@ -${current.splitInfo.oldStartIndex},${current.splitInfo.oldLength} +${current.splitInfo.newStartIndex},${current.splitInfo.newLength}`,\n        };\n      }\n    } else {\n      if (current.isLast) {\n        if (__DEV__) {\n          console.error(\"the last hunk can not expand up!\");\n        }\n        return;\n      }\n      for (let i = current.splitInfo.endHiddenIndex - composeLen; i < current.splitInfo.endHiddenIndex; i++) {\n        const leftLine = this.#splitLeftLines[i];\n        const rightLine = this.#splitRightLines[i];\n        if (leftLine?.isHidden) leftLine.isHidden = false;\n        if (rightLine?.isHidden) rightLine.isHidden = false;\n      }\n      const oldStartIndex = current.splitInfo.oldStartIndex - composeLen;\n      const oldLength = current.splitInfo.oldLength + composeLen;\n      const newStartIndex = current.splitInfo.newStartIndex - composeLen;\n      const newLength = current.splitInfo.newLength + composeLen;\n      current.splitInfo = {\n        ...current.splitInfo,\n        endHiddenIndex: current.splitInfo.endHiddenIndex - composeLen,\n        oldStartIndex,\n        oldLength,\n        newStartIndex,\n        newLength,\n        plainText: `@@ -${oldStartIndex},${oldLength} +${newStartIndex},${newLength}`,\n      };\n\n      delete this.#splitHunksLines?.[index];\n\n      this.#splitHunksLines![current.splitInfo.endHiddenIndex] = current;\n    }\n\n    if (needTrigger) {\n      this.notifyAll();\n    }\n  };\n\n  getUnifiedLine = (index: number) => {\n    return this.#unifiedLines[index];\n  };\n\n  getUnifiedLineByLineNumber = (lienNumber: number, side: SplitSide) => {\n    if (side === SplitSide.old) {\n      return this.#unifiedLines?.find((item) => item.oldLineNumber === lienNumber);\n    } else {\n      return this.#unifiedLines?.find((item) => item.newLineNumber === lienNumber);\n    }\n  };\n\n  getUnifiedLineIndexByLineNumber = (lineNumber: number, side: SplitSide) => {\n    if (side === SplitSide.old) {\n      return this.#unifiedLines?.findIndex((item) => item.oldLineNumber === lineNumber);\n    } else {\n      return this.#unifiedLines?.findIndex((item) => item.newLineNumber === lineNumber);\n    }\n  };\n\n  getUnifiedHunkLine = (index: number) => {\n    return this.#unifiedHunksLines?.[index];\n  };\n\n  // TODO! support rollback?\n  onUnifiedHunkExpand = (dir: \"up\" | \"down\" | \"all\", index: number, needTrigger = true) => {\n    if (this.#composeByDiff) return;\n\n    const current = this.#unifiedHunksLines?.[index];\n\n    if (!current || !current.unifiedInfo) return;\n\n    if (dir === \"all\") {\n      for (let i = current.unifiedInfo.startHiddenIndex; i < current.unifiedInfo.endHiddenIndex; i++) {\n        const unifiedLine = this.#unifiedLines?.[i];\n        if (unifiedLine?.isHidden) {\n          unifiedLine.isHidden = false;\n        }\n      }\n      current.unifiedInfo = {\n        ...current.unifiedInfo,\n        ...current.hunkInfo,\n        plainText: current.text,\n        startHiddenIndex: current.unifiedInfo.endHiddenIndex,\n      };\n    } else if (dir === \"down\") {\n      for (let i = current.unifiedInfo.startHiddenIndex; i < current.unifiedInfo.startHiddenIndex + composeLen; i++) {\n        const unifiedLine = this.#unifiedLines[i];\n        if (unifiedLine?.isHidden) unifiedLine.isHidden = false;\n      }\n      if (current.isLast) {\n        current.unifiedInfo = {\n          ...current.unifiedInfo,\n          startHiddenIndex: current.unifiedInfo.startHiddenIndex + composeLen,\n        };\n      } else {\n        current.unifiedInfo = {\n          ...current.unifiedInfo,\n          startHiddenIndex: current.unifiedInfo.startHiddenIndex + composeLen,\n          plainText: `@@ -${current.unifiedInfo.oldStartIndex},${current.unifiedInfo.oldLength} +${current.unifiedInfo.newStartIndex},${current.unifiedInfo.newLength}`,\n        };\n      }\n    } else {\n      if (current.isLast) {\n        if (__DEV__) {\n          console.error(\"the last hunk can not expand up!\");\n        }\n        return;\n      }\n      for (let i = current.unifiedInfo.endHiddenIndex - composeLen; i < current.unifiedInfo.endHiddenIndex; i++) {\n        const unifiedLine = this.#unifiedLines[i];\n        if (unifiedLine?.isHidden) unifiedLine.isHidden = false;\n      }\n      const oldStartIndex = current.unifiedInfo.oldStartIndex - composeLen;\n      const oldLength = current.unifiedInfo.oldLength + composeLen;\n      const newStartIndex = current.unifiedInfo.newStartIndex - composeLen;\n      const newLength = current.unifiedInfo.newLength + composeLen;\n      current.unifiedInfo = {\n        ...current.unifiedInfo,\n        endHiddenIndex: current.unifiedInfo.endHiddenIndex - composeLen,\n        oldStartIndex,\n        oldLength,\n        newStartIndex,\n        newLength,\n        plainText: `@@ -${oldStartIndex},${oldLength} +${newStartIndex},${newLength}`,\n      };\n\n      delete this.#unifiedHunksLines?.[index];\n\n      this.#unifiedHunksLines![current.unifiedInfo.endHiddenIndex] = current;\n    }\n\n    if (needTrigger) {\n      this.notifyAll();\n    }\n  };\n\n  onAllExpand = (mode: \"split\" | \"unified\") => {\n    if (this.#composeByDiff) return;\n\n    if (mode === \"split\") {\n      Object.keys(this.#splitHunksLines || {}).forEach((key) => {\n        this.onSplitHunkExpand(\"all\", +key, false);\n      });\n      this.#hasExpandSplitAll.state = true;\n    } else {\n      Object.keys(this.#unifiedHunksLines || {}).forEach((key) => {\n        this.onUnifiedHunkExpand(\"all\", +key, false);\n      });\n      this.#hasExpandUnifiedAll.state = true;\n    }\n\n    this.notifyAll();\n  };\n\n  get hasExpandSplitAll() {\n    return this.#hasExpandSplitAll.state;\n  }\n\n  get hasExpandUnifiedAll() {\n    return this.#hasExpandUnifiedAll.state;\n  }\n\n  onAllCollapse = (mode: \"split\" | \"unified\") => {\n    if (this.#composeByDiff) return;\n\n    if (mode === \"split\") {\n      Object.values(this.#splitLeftLines || {}).forEach((item) => {\n        if (!item.isHidden && item._isHidden) {\n          item.isHidden = item._isHidden;\n        }\n      });\n      Object.values(this.#splitRightLines || {}).forEach((item) => {\n        if (!item.isHidden && item._isHidden) {\n          item.isHidden = item._isHidden;\n        }\n      });\n      Object.values(this.#splitHunksLines || {}).forEach((item) => {\n        if (!item.splitInfo) return;\n        item.splitInfo = {\n          ...item.splitInfo,\n          oldStartIndex: item.splitInfo._oldStartIndex,\n          oldLength: item.splitInfo._oldLength,\n          newStartIndex: item.splitInfo._newStartIndex,\n          newLength: item.splitInfo._newLength,\n          startHiddenIndex: item.splitInfo._startHiddenIndex,\n          endHiddenIndex: item.splitInfo._endHiddenIndex,\n          plainText: item.splitInfo._plainText,\n        };\n      });\n      Object.keys(this.#splitHunksLines || {}).forEach((key) => {\n        const item = this.#splitHunksLines![key];\n        if (!item.splitInfo) return;\n        if (item.splitInfo.endHiddenIndex !== +key) {\n          delete this.#splitHunksLines![key];\n\n          this.#splitHunksLines![item.splitInfo.endHiddenIndex] = item;\n        }\n      });\n      this.#hasExpandSplitAll.state = false;\n    } else {\n      Object.values(this.#unifiedLines || {}).forEach((item) => {\n        if (!item.isHidden && item._isHidden) {\n          item.isHidden = item._isHidden;\n        }\n      });\n      Object.values(this.#unifiedHunksLines || {}).forEach((item) => {\n        if (!item.unifiedInfo) return;\n        item.unifiedInfo = {\n          ...item.unifiedInfo,\n          oldStartIndex: item.unifiedInfo._oldStartIndex,\n          oldLength: item.unifiedInfo._oldLength,\n          newStartIndex: item.unifiedInfo._newStartIndex,\n          newLength: item.unifiedInfo._newLength,\n          startHiddenIndex: item.unifiedInfo._startHiddenIndex,\n          endHiddenIndex: item.unifiedInfo._endHiddenIndex,\n          plainText: item.unifiedInfo._plainText,\n        };\n      });\n      Object.keys(this.#unifiedHunksLines || {}).forEach((key) => {\n        const item = this.#unifiedHunksLines![key];\n        if (!item.unifiedInfo) return;\n        if (item.unifiedInfo.endHiddenIndex !== +key) {\n          delete this.#unifiedHunksLines![key];\n\n          this.#unifiedHunksLines![item.unifiedInfo.endHiddenIndex] = item;\n        }\n      });\n      this.#hasExpandUnifiedAll.state = false;\n    }\n\n    this.notifyAll();\n  };\n\n  getOldFileContent = () => {\n    return this.#oldFileResult?.raw;\n  };\n\n  getNewFileContent = () => {\n    return this.#newFileResult?.raw;\n  };\n\n  getOldPlainLine = (lineNumber: number) => {\n    return this.#oldFilePlainLines?.[lineNumber];\n  };\n\n  getOldSyntaxLine = (lineNumber: number) => {\n    return this.#oldFileSyntaxLines?.[lineNumber];\n  };\n\n  getNewPlainLine = (lineNumber: number) => {\n    return this.#newFilePlainLines?.[lineNumber];\n  };\n\n  getNewSyntaxLine = (lineNumber: number) => {\n    return this.#newFileSyntaxLines?.[lineNumber];\n  };\n\n  // TODO improve\n  subscribe = (listener: (() => void) & { isSyncExternal?: boolean }) => {\n    this.#listeners.push(listener);\n\n    return () => {\n      this.#listeners = this.#listeners.filter((i) => i !== listener);\n    };\n  };\n\n  notifyAll = (skipSyncExternal?: boolean) => {\n    this.#updateCount++;\n\n    this.#listeners.forEach((f) => {\n      if (skipSyncExternal && f.isSyncExternal) {\n        return;\n      }\n      f();\n    });\n\n    // support update from outside instance\n    this.#clonedInstance.forEach((_, instance) => {\n      instance.notifyAll(true);\n    });\n  };\n\n  getUpdateCount = () => this.#updateCount;\n\n  getExpandEnabled = () => !this.#composeByDiff;\n\n  getBundle = () => {\n    // common\n    const hasInitRaw = this.#hasInitRaw;\n    const hasInitSyntax = this.#hasInitSyntax;\n    const hasBuildSplit = this.#hasBuildSplit;\n    const hasBuildUnified = this.#hasBuildUnified;\n    const oldFileLines = this.#oldFileLines;\n    const oldFileDiffLines = this.#oldFileDiffLines;\n    const oldFilePlainLines = this.#oldFilePlainLines;\n    const oldFileSyntaxLines = this.#oldFileSyntaxLines;\n    const oldFilePlaceholderLines = this.#oldFilePlaceholderLines;\n    const newFileLines = this.#newFileLines;\n    const newFileDiffLines = this.#newFileDiffLines;\n    const newFilePlainLines = this.#newFilePlainLines;\n    const newFileSyntaxLines = this.#newFileSyntaxLines;\n    const newFilePlaceholderLines = this.#newFilePlaceholderLines;\n    const splitLineLength = this.splitLineLength;\n    const unifiedLineLength = this.unifiedLineLength;\n    const fileLineLength = this.fileLineLength;\n    const additionLength = this.additionLength;\n    const deletionLength = this.deletionLength;\n    const composeByDiff = this.#composeByDiff;\n    const highlighterName = this.#highlighterName;\n    const highlighterType = this.#highlighterType;\n    const hasSomeLineCollapsed = this.hasSomeLineCollapsed;\n    const hasExpandSplitAll = this.#hasExpandSplitAll;\n    const hasExpandUnifiedAll = this.#hasExpandUnifiedAll;\n\n    // split\n    const splitLeftLines = this.#splitLeftLines;\n    const splitRightLines = this.#splitRightLines;\n    const splitHunkLines = this.#splitHunksLines;\n\n    // unified\n    const unifiedLines = this.#unifiedLines;\n    const unifiedHunkLines = this.#unifiedHunksLines;\n\n    const version = this._version_;\n    const theme = this.#theme;\n    const enableTemplate = this.#enableTemplate;\n\n    return {\n      hasInitRaw,\n      hasInitSyntax,\n      hasBuildSplit,\n      hasBuildUnified,\n      oldFileLines,\n      oldFileDiffLines,\n      oldFilePlainLines,\n      oldFileSyntaxLines,\n      oldFilePlaceholderLines,\n      newFileLines,\n      newFileDiffLines,\n      newFilePlainLines,\n      newFileSyntaxLines,\n      newFilePlaceholderLines,\n      splitLineLength,\n      unifiedLineLength,\n      fileLineLength,\n      additionLength,\n      deletionLength,\n      splitLeftLines,\n      splitRightLines,\n      splitHunkLines,\n      unifiedLines,\n      unifiedHunkLines,\n\n      highlighterName,\n      highlighterType,\n      composeByDiff,\n      hasSomeLineCollapsed,\n      hasExpandSplitAll,\n      hasExpandUnifiedAll,\n\n      version,\n\n      theme,\n\n      enableTemplate,\n\n      isFullMerge: false,\n    };\n  };\n\n  mergeBundle = (data: ReturnType<DiffFile[\"getBundle\"]>, notifyUpdate = true) => {\n    this.#hasInitRaw = data.hasInitRaw;\n    this.#hasInitSyntax = data.hasInitSyntax;\n    this.#hasBuildSplit = data.hasBuildSplit;\n    this.#hasBuildUnified = data.hasBuildUnified;\n    this.#composeByDiff = data.composeByDiff;\n    this.#highlighterName = data.highlighterName;\n    this.#highlighterType = data.highlighterType;\n\n    this.#oldFileLines = data.oldFileLines;\n    this.#oldFileDiffLines = data.oldFileDiffLines;\n    this.#oldFilePlainLines = data.oldFilePlainLines;\n    this.#oldFileSyntaxLines = data.oldFileSyntaxLines;\n    this.#oldFilePlaceholderLines = data.oldFilePlaceholderLines;\n    this.#newFileLines = data.newFileLines;\n    this.#newFileDiffLines = data.newFileDiffLines;\n    this.#newFilePlainLines = data.newFilePlainLines;\n    this.#newFileSyntaxLines = data.newFileSyntaxLines;\n    this.#newFilePlaceholderLines = data.newFilePlaceholderLines;\n    this.splitLineLength = data.splitLineLength;\n    this.unifiedLineLength = data.unifiedLineLength;\n    this.fileLineLength = data.fileLineLength;\n    this.additionLength = data.additionLength;\n    this.deletionLength = data.deletionLength;\n    this.hasSomeLineCollapsed = data.hasSomeLineCollapsed;\n    this.#hasExpandSplitAll = data.hasExpandSplitAll;\n    this.#hasExpandUnifiedAll = data.hasExpandUnifiedAll;\n\n    this.#splitLeftLines = data.splitLeftLines;\n    this.#splitRightLines = data.splitRightLines;\n    this.#splitHunksLines = data.splitHunkLines;\n\n    this.#unifiedLines = data.unifiedLines;\n    this.#unifiedHunksLines = data.unifiedHunkLines;\n\n    this.#theme = data.theme;\n\n    this.#enableTemplate = data.enableTemplate;\n\n    // mark this instance as a merged instance\n    this.#composeByMerge = true;\n\n    if (__DEV__ && this._version_ !== data.version) {\n      console.error(\"the version of the `diffInstance` is not match, some error may happen\");\n    }\n\n    if (__DEV__ && !data.hasInitRaw) {\n      console.error(`there are not a valid bundle data, try to call 'initRaw' function before merge / getBundle`);\n    }\n\n    if (notifyUpdate) {\n      this.notifyAll();\n    }\n  };\n\n  _getHighlighterName = () => this.#highlighterName || \"\";\n\n  _getIsPureDiffRender = () => this.#composeByDiff;\n\n  _getTheme = () => this.#theme;\n\n  _addClonedInstance = (instance: DiffFile) => {\n    const updateFunc = () => {\n      this._notifyOthers(instance);\n      // sync state from child instance trigger update\n      this._mergeFullBundle(instance._getFullBundle(), false);\n    };\n\n    updateFunc.isSyncExternal = true;\n\n    const unsubscribe = instance.subscribe(updateFunc);\n\n    this.#clonedInstance.set(instance, unsubscribe);\n  };\n\n  _notifyOthers = (instance: DiffFile) => {\n    this.#clonedInstance.forEach((_, i) => {\n      if (i !== instance) {\n        i.notifyAll(true);\n      }\n    });\n  };\n\n  _delClonedInstance = (instance: DiffFile) => {\n    const unsubscribe = this.#clonedInstance.get(instance);\n\n    unsubscribe?.();\n\n    this.#clonedInstance.delete(instance);\n  };\n\n  _getFullBundle = () => {\n    const bundle = this.getBundle();\n    const oldFileResult = this.#oldFileResult;\n    const newFileResult = this.#newFileResult;\n    const diffLines = this.#diffLines;\n    const diffListResults = this.#diffListResults;\n\n    return {\n      ...bundle,\n      oldFileResult,\n      newFileResult,\n      diffLines,\n      diffListResults,\n      // get current instance is a fullMerge instance or not\n      isFullMerge: this.#composeByMerge ? this.#composeByFullMerge : true,\n    };\n  };\n\n  _mergeFullBundle = (data: ReturnType<DiffFile[\"_getFullBundle\"]>, notifyUpdate = true) => {\n    this.mergeBundle(data, notifyUpdate);\n    try {\n      this.#oldFileResult = data.oldFileResult ? File.createInstance(data.oldFileResult) : null;\n\n      this.#newFileResult = data.newFileResult ? File.createInstance(data.newFileResult) : null;\n\n      this.#diffLines = data.diffLines;\n\n      this.#diffListResults = data.diffListResults;\n\n      this.#composeByFullMerge = data.isFullMerge;\n    } catch {\n      void 0;\n    }\n  };\n\n  _destroy = () => {\n    this.clearId();\n    this.#listeners.splice(0, this.#listeners.length);\n    this.#clonedInstance.forEach((v) => v());\n    this.#clonedInstance.clear();\n  };\n\n  clear = () => {\n    this._destroy();\n    this.#oldFileResult = null;\n    this.#newFileResult = null;\n    this.#diffLines = null;\n    this.#diffListResults = null;\n    this.#newFileDiffLines = null;\n    this.#oldFileDiffLines = null;\n    this.#newFileLines = null;\n    this.#oldFileLines = null;\n    this.#newFileSyntaxLines = null;\n    this.#oldFileSyntaxLines = null;\n    this.#splitHunksLines = null;\n    this.#splitLeftLines = null;\n    this.#splitRightLines = null;\n    this.#unifiedHunksLines = null;\n    this.#unifiedLines = null;\n    this.#theme = undefined;\n  };\n}\n\nif (__DEV__) {\n  Object.defineProperty(DiffFile.prototype, \"__full_bundle__\", {\n    get: function (this: DiffFile) {\n      return this._getFullBundle();\n    },\n  });\n}\n", "import { numIterator } from \".\";\n\nimport type { SplitLineItem, UnifiedLineItem, DiffFile } from \".\";\n\nexport enum DiffFileLineType {\n  hunk = 1,\n  content = 2,\n  widget = 3,\n  extend = 4,\n}\n\nexport enum SplitSide {\n  old = 1,\n  new = 2,\n}\n\nexport type DiffSplitContentLineItem = {\n  type: DiffFileLineType.content;\n  index: number;\n  lineNumber: number;\n  splitLine: { left: SplitLineItem; right: SplitLineItem };\n};\n\nexport type DiffUnifiedContentLineItem = {\n  type: DiffFileLineType.content;\n  index: number;\n  lineNumber: number;\n  unifiedLine: UnifiedLineItem;\n};\n\nexport type DiffSplitLineItem = {\n  type: DiffFileLineType;\n  index: number;\n  lineNumber: number;\n};\n\nexport type DiffUnifiedLineItem = {\n  type: DiffFileLineType;\n  index: number;\n  lineNumber: number;\n};\n\nexport const getSplitLines = (diffFile: DiffFile): DiffSplitLineItem[] => {\n  const splitLineLength = diffFile.splitLineLength;\n\n  const splitLines: DiffSplitLineItem[] = [];\n\n  numIterator(splitLineLength, (index) => {\n    splitLines.push({ type: DiffFileLineType.hunk, index, lineNumber: index + 1 });\n\n    splitLines.push({\n      type: DiffFileLineType.content,\n      index,\n      lineNumber: index + 1,\n    });\n\n    splitLines.push({ type: DiffFileLineType.widget, index, lineNumber: index + 1 });\n\n    splitLines.push({ type: DiffFileLineType.extend, index, lineNumber: index + 1 });\n  });\n\n  return splitLines;\n};\n\nexport const getSplitContentLines = (diffFile: DiffFile): DiffSplitContentLineItem[] => {\n  const splitLineLength = diffFile.splitLineLength;\n\n  const splitLines: DiffSplitContentLineItem[] = [];\n\n  numIterator(splitLineLength, (index) => {\n    const splitLeftLine = diffFile.getSplitLeftLine(index);\n\n    const splitRightLine = diffFile.getSplitRightLine(index);\n\n    if (!splitLeftLine?.isHidden && !splitRightLine?.isHidden) {\n      {\n        splitLines.push({\n          type: DiffFileLineType.content,\n          index,\n          lineNumber: index + 1,\n          splitLine: { left: splitLeftLine, right: splitRightLine },\n        });\n      }\n    }\n  });\n\n  return splitLines;\n};\n\nexport const getUnifiedLines = (diffFile: DiffFile): DiffUnifiedLineItem[] => {\n  const unifiedLineLength = diffFile.unifiedLineLength;\n\n  const unifiedLines: DiffUnifiedLineItem[] = [];\n\n  numIterator(unifiedLineLength, (index) => {\n    unifiedLines.push({ type: DiffFileLineType.hunk, index, lineNumber: index + 1 });\n\n    unifiedLines.push({ type: DiffFileLineType.content, index, lineNumber: index + 1 });\n\n    unifiedLines.push({ type: DiffFileLineType.widget, index, lineNumber: index + 1 });\n\n    unifiedLines.push({ type: DiffFileLineType.extend, index, lineNumber: index + 1 });\n  });\n\n  return unifiedLines;\n};\n\nexport const getUnifiedContentLine = (diffFile: DiffFile): DiffUnifiedContentLineItem[] => {\n  const unifiedLineLength = diffFile.unifiedLineLength;\n\n  const unifiedLines: DiffUnifiedContentLineItem[] = [];\n\n  numIterator(unifiedLineLength, (index) => {\n    const unifiedLine = diffFile.getUnifiedLine(index);\n\n    if (!unifiedLine.isHidden) {\n      unifiedLines.push({ type: DiffFileLineType.content, index, lineNumber: index + 1, unifiedLine: unifiedLine });\n    }\n  });\n\n  return unifiedLines;\n};\n\nexport const checkCurrentLineIsHidden = (diffFile: DiffFile, lineNumber: number, side: SplitSide) => {\n  const splitLine = diffFile.getSplitLineByLineNumber(lineNumber, side);\n\n  const unifiedLine = diffFile.getUnifiedLineByLineNumber(lineNumber, side);\n\n  return {\n    split: !splitLine || splitLine.isHidden,\n    unified: !unifiedLine || unifiedLine.isHidden,\n  };\n};\n", "export * from \"./parse\";\nexport * from \"./file\";\nexport * from \"./diff-file\";\nexport * from \"./escape-html\";\nexport * from \"./diff-file-utils\";\n\nexport * from \"@git-diff-view/lowlight\";\n\nexport const versions = __VERSION__;\n"],
  "mappings": "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",
  "names": ["longtext", "shorttext", "DiffHunkExpansionType", "NewLineSymbol", "DiffModeEnum", "fastDiff", "DiffLineType", "diffChanges", "_a", "instance", "_DiffFile_doFile", "_DiffFile_composeRaw", "_DiffFile_composeFile", "_DiffFile_composeDiff", "_a", "_DiffFile_composeSyntax", "_DiffFile_doSyntax", "_DiffFile_getOldDiffLine", "_DiffFile_getNewDiffLine", "_DiffFile_getOldRawLine", "_DiffFile_getNewRawLine", "_DiffFile_getOldSyntaxLine", "_DiffFile_getNewSyntaxLine", "DiffFileLineType", "SplitSide"]
}
